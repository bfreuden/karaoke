var $o=Object.defineProperty;var jo=(e,t,n)=>t in e?$o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var he=(e,t,n)=>jo(e,typeof t!="symbol"?t+"":t,n);import{i as _n,d as ba,e as Sa,g as G,m as se,f as zn,h as $t,j as wa,k as jt,a as ee,c as m,p as $,t as Fo,l as k,n as Dt,q as Xi,s as xs,v as Wo,x as zo,y as Ho,z as at,A as ae,B as z,C as Uo,D as qo,E as q,F as Go,T as Ko,G as Ae,I as ce,H as Yi,J as Et,K as Z,S as Ji,L as We,M as te,N as ie,O as Hn,P as Le,Q as Xe,R as Ve,U as gt,V as fe,W as At,X as Jt,Y as Ne,Z as Ke,_ as pt,$ as pe,a0 as ft,a1 as Te,a2 as Xo,a3 as Es,a4 as Qt,a5 as vt,a6 as je,a7 as Yo,a8 as Rs,a9 as Un,aa as ze,b as Q,o as K,w as I,ab as oe,ac as yt,ad as rt,ae as Ye,af as bt,ag as Jo,ah as He,ai as Qo,aj as Bt,ak as it,al as Qi,am as Zi,an as Be,ao as Rt,ap as es,aq as qn,ar as Ln,as as me,at as de,au as ri,av as Ft,aw as Wt,ax as Zo,ay as ts,az as el,aA as Pi,aB as Ce,aC as tl,aD as nl,aE as Ca,aF as Ge,aG as kn,aH as ka,aI as il,aJ as Ps,aK as sl,aL as al,aM as rl,aN as ol,aO as ll,aP as ul,aQ as cl,aR as dl,aS as Ts,aT as hl,aU as xa,aV as fl,aW as Ea,aX as vl,aY as ml}from"./index-trsR_pTX.js";import{m as we,u as ot,a as lt,b as gl}from"./tag-BC9AhPXL.js";const Ra=["top","bottom"],pl=["start","end","left","right"];function Ti(e,t){let[n,i]=e.split(" ");return i||(i=_n(Ra,n)?"start":_n(pl,n)?"top":"center"),{side:As(n,t),align:As(i,t)}}function As(e,t){return e==="start"?t?"right":"left":e==="end"?t?"left":"right":e}function oi(e){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.side],align:e.align}}function li(e){return{side:e.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.align]}}function Os(e){return{side:e.align,align:e.side}}function _s(e){return _n(Ra,e.side)?"y":"x"}class kt{constructor(t){let{x:n,y:i,width:s,height:a}=t;this.x=n,this.y=i,this.width=s,this.height=a}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function Ls(e,t){return{x:{before:Math.max(0,t.left-e.left),after:Math.max(0,e.right-t.right)},y:{before:Math.max(0,t.top-e.top),after:Math.max(0,e.bottom-t.bottom)}}}function Pa(e){return Array.isArray(e)?new kt({x:e[0],y:e[1],width:0,height:0}):e.getBoundingClientRect()}function ns(e){const t=e.getBoundingClientRect(),n=getComputedStyle(e),i=n.transform;if(i){let s,a,r,o,c;if(i.startsWith("matrix3d("))s=i.slice(9,-1).split(/, /),a=Number(s[0]),r=Number(s[5]),o=Number(s[12]),c=Number(s[13]);else if(i.startsWith("matrix("))s=i.slice(7,-1).split(/, /),a=Number(s[0]),r=Number(s[3]),o=Number(s[4]),c=Number(s[5]);else return new kt(t);const l=n.transformOrigin,u=t.x-o-(1-a)*parseFloat(l),d=t.y-c-(1-r)*parseFloat(l.slice(l.indexOf(" ")+1)),f=a?t.width/a:e.offsetWidth+1,v=r?t.height/r:e.offsetHeight+1;return new kt({x:u,y:d,width:f,height:v})}else return new kt(t)}function Lt(e,t,n){if(typeof e.animate>"u")return{finished:Promise.resolve()};let i;try{i=e.animate(t,n)}catch{return{finished:Promise.resolve()}}return typeof i.finished>"u"&&(i.finished=new Promise(s=>{i.onfinish=()=>{s(i)}})),i}const xn=new WeakMap;function yl(e,t){Object.keys(t).forEach(n=>{if(ba(n)){const i=Sa(n),s=xn.get(e);if(t[n]==null)s==null||s.forEach(a=>{const[r,o]=a;r===i&&(e.removeEventListener(i,o),s.delete(a))});else if(!s||![...s].some(a=>a[0]===i&&a[1]===t[n])){e.addEventListener(i,t[n]);const a=s||new Set;a.add([i,t[n]]),xn.has(e)||xn.set(e,a)}}else t[n]==null?e.removeAttribute(n):e.setAttribute(n,t[n])})}function bl(e,t){Object.keys(t).forEach(n=>{if(ba(n)){const i=Sa(n),s=xn.get(e);s==null||s.forEach(a=>{const[r,o]=a;r===i&&(e.removeEventListener(i,o),s.delete(a))})}else e.removeAttribute(n)})}function is(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",n=arguments.length>2?arguments[2]:void 0;return G()({name:n??zn(wa(e.replace(/__/g,"-"))),props:{tag:{type:String,default:t},...se()},setup(i,s){let{slots:a}=s;return()=>{var r;return $t(i.tag,{class:[e,i.class],style:i.style},(r=a.default)==null?void 0:r.call(a))}}})}function Ta(e){if(typeof e.getRootNode!="function"){for(;e.parentNode;)e=e.parentNode;return e!==document?null:document}const t=e.getRootNode();return t!==document&&t.getRootNode({composed:!0})!==document?null:t}const Vn="cubic-bezier(0.4, 0, 0.2, 1)",Sl="cubic-bezier(0.0, 0, 0.2, 1)",wl="cubic-bezier(0.4, 0, 1, 1)";function Aa(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(;e;){if(t?Cl(e):ss(e))return e;e=e.parentElement}return document.scrollingElement}function Dn(e,t){const n=[];if(t&&e&&!t.contains(e))return n;for(;e&&(ss(e)&&n.push(e),e!==t);)e=e.parentElement;return n}function ss(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e);return t.overflowY==="scroll"||t.overflowY==="auto"&&e.scrollHeight>e.clientHeight}function Cl(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e);return["scroll","auto"].includes(t.overflowY)}function kl(e){for(;e;){if(window.getComputedStyle(e).position==="fixed")return!0;e=e.offsetParent}return!1}function Oa(e,t){return function(){return e.apply(t,arguments)}}const{toString:xl}=Object.prototype,{getPrototypeOf:as}=Object,Gn=(e=>t=>{const n=xl.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ue=e=>(e=e.toLowerCase(),t=>Gn(t)===e),Kn=e=>t=>typeof t===e,{isArray:zt}=Array,Zt=Kn("undefined");function El(e){return e!==null&&!Zt(e)&&e.constructor!==null&&!Zt(e.constructor)&&$e(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const _a=Ue("ArrayBuffer");function Rl(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&_a(e.buffer),t}const Pl=Kn("string"),$e=Kn("function"),La=Kn("number"),Xn=e=>e!==null&&typeof e=="object",Tl=e=>e===!0||e===!1,En=e=>{if(Gn(e)!=="object")return!1;const t=as(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Al=Ue("Date"),Ol=Ue("File"),_l=Ue("Blob"),Ll=Ue("FileList"),Vl=e=>Xn(e)&&$e(e.pipe),Dl=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||$e(e.append)&&((t=Gn(e))==="formdata"||t==="object"&&$e(e.toString)&&e.toString()==="[object FormData]"))},Bl=Ue("URLSearchParams"),[Ml,Nl,Il,$l]=["ReadableStream","Request","Response","Headers"].map(Ue),jl=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function on(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let i,s;if(typeof e!="object"&&(e=[e]),zt(e))for(i=0,s=e.length;i<s;i++)t.call(null,e[i],i,e);else{const a=n?Object.getOwnPropertyNames(e):Object.keys(e),r=a.length;let o;for(i=0;i<r;i++)o=a[i],t.call(null,e[o],o,e)}}function Va(e,t){t=t.toLowerCase();const n=Object.keys(e);let i=n.length,s;for(;i-- >0;)if(s=n[i],t===s.toLowerCase())return s;return null}const Ct=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Da=e=>!Zt(e)&&e!==Ct;function Ai(){const{caseless:e}=Da(this)&&this||{},t={},n=(i,s)=>{const a=e&&Va(t,s)||s;En(t[a])&&En(i)?t[a]=Ai(t[a],i):En(i)?t[a]=Ai({},i):zt(i)?t[a]=i.slice():t[a]=i};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&on(arguments[i],n);return t}const Fl=(e,t,n,{allOwnKeys:i}={})=>(on(t,(s,a)=>{n&&$e(s)?e[a]=Oa(s,n):e[a]=s},{allOwnKeys:i}),e),Wl=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),zl=(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Hl=(e,t,n,i)=>{let s,a,r;const o={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),a=s.length;a-- >0;)r=s[a],(!i||i(r,e,t))&&!o[r]&&(t[r]=e[r],o[r]=!0);e=n!==!1&&as(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Ul=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return i!==-1&&i===n},ql=e=>{if(!e)return null;if(zt(e))return e;let t=e.length;if(!La(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Gl=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&as(Uint8Array)),Kl=(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let s;for(;(s=i.next())&&!s.done;){const a=s.value;t.call(e,a[0],a[1])}},Xl=(e,t)=>{let n;const i=[];for(;(n=e.exec(t))!==null;)i.push(n);return i},Yl=Ue("HTMLFormElement"),Jl=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,s){return i.toUpperCase()+s}),Vs=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Ql=Ue("RegExp"),Ba=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};on(n,(s,a)=>{let r;(r=t(s,a,e))!==!1&&(i[a]=r||s)}),Object.defineProperties(e,i)},Zl=e=>{Ba(e,(t,n)=>{if($e(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=e[n];if($e(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},eu=(e,t)=>{const n={},i=s=>{s.forEach(a=>{n[a]=!0})};return zt(e)?i(e):i(String(e).split(t)),n},tu=()=>{},nu=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function iu(e){return!!(e&&$e(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const su=e=>{const t=new Array(10),n=(i,s)=>{if(Xn(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[s]=i;const a=zt(i)?[]:{};return on(i,(r,o)=>{const c=n(r,s+1);!Zt(c)&&(a[o]=c)}),t[s]=void 0,a}}return i};return n(e,0)},au=Ue("AsyncFunction"),ru=e=>e&&(Xn(e)||$e(e))&&$e(e.then)&&$e(e.catch),Ma=((e,t)=>e?setImmediate:t?((n,i)=>(Ct.addEventListener("message",({source:s,data:a})=>{s===Ct&&a===n&&i.length&&i.shift()()},!1),s=>{i.push(s),Ct.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",$e(Ct.postMessage)),ou=typeof queueMicrotask<"u"?queueMicrotask.bind(Ct):typeof process<"u"&&process.nextTick||Ma,T={isArray:zt,isArrayBuffer:_a,isBuffer:El,isFormData:Dl,isArrayBufferView:Rl,isString:Pl,isNumber:La,isBoolean:Tl,isObject:Xn,isPlainObject:En,isReadableStream:Ml,isRequest:Nl,isResponse:Il,isHeaders:$l,isUndefined:Zt,isDate:Al,isFile:Ol,isBlob:_l,isRegExp:Ql,isFunction:$e,isStream:Vl,isURLSearchParams:Bl,isTypedArray:Gl,isFileList:Ll,forEach:on,merge:Ai,extend:Fl,trim:jl,stripBOM:Wl,inherits:zl,toFlatObject:Hl,kindOf:Gn,kindOfTest:Ue,endsWith:Ul,toArray:ql,forEachEntry:Kl,matchAll:Xl,isHTMLForm:Yl,hasOwnProperty:Vs,hasOwnProp:Vs,reduceDescriptors:Ba,freezeMethods:Zl,toObjectSet:eu,toCamelCase:Jl,noop:tu,toFiniteNumber:nu,findKey:Va,global:Ct,isContextDefined:Da,isSpecCompliantForm:iu,toJSONObject:su,isAsyncFn:au,isThenable:ru,setImmediate:Ma,asap:ou};function J(e,t,n,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),s&&(this.response=s,this.status=s.status?s.status:null)}T.inherits(J,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:T.toJSONObject(this.config),code:this.code,status:this.status}}});const Na=J.prototype,Ia={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Ia[e]={value:e}});Object.defineProperties(J,Ia);Object.defineProperty(Na,"isAxiosError",{value:!0});J.from=(e,t,n,i,s,a)=>{const r=Object.create(Na);return T.toFlatObject(e,r,function(c){return c!==Error.prototype},o=>o!=="isAxiosError"),J.call(r,e.message,t,n,i,s),r.cause=e,r.name=e.name,a&&Object.assign(r,a),r};const lu=null;function Oi(e){return T.isPlainObject(e)||T.isArray(e)}function $a(e){return T.endsWith(e,"[]")?e.slice(0,-2):e}function Ds(e,t,n){return e?e.concat(t).map(function(s,a){return s=$a(s),!n&&a?"["+s+"]":s}).join(n?".":""):t}function uu(e){return T.isArray(e)&&!e.some(Oi)}const cu=T.toFlatObject(T,{},null,function(t){return/^is[A-Z]/.test(t)});function Yn(e,t,n){if(!T.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=T.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,g){return!T.isUndefined(g[p])});const i=n.metaTokens,s=n.visitor||u,a=n.dots,r=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&T.isSpecCompliantForm(t);if(!T.isFunction(s))throw new TypeError("visitor must be a function");function l(h){if(h===null)return"";if(T.isDate(h))return h.toISOString();if(!c&&T.isBlob(h))throw new J("Blob is not supported. Use a Buffer instead.");return T.isArrayBuffer(h)||T.isTypedArray(h)?c&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function u(h,p,g){let y=h;if(h&&!g&&typeof h=="object"){if(T.endsWith(p,"{}"))p=i?p:p.slice(0,-2),h=JSON.stringify(h);else if(T.isArray(h)&&uu(h)||(T.isFileList(h)||T.endsWith(p,"[]"))&&(y=T.toArray(h)))return p=$a(p),y.forEach(function(w,C){!(T.isUndefined(w)||w===null)&&t.append(r===!0?Ds([p],C,a):r===null?p:p+"[]",l(w))}),!1}return Oi(h)?!0:(t.append(Ds(g,p,a),l(h)),!1)}const d=[],f=Object.assign(cu,{defaultVisitor:u,convertValue:l,isVisitable:Oi});function v(h,p){if(!T.isUndefined(h)){if(d.indexOf(h)!==-1)throw Error("Circular reference detected in "+p.join("."));d.push(h),T.forEach(h,function(y,b){(!(T.isUndefined(y)||y===null)&&s.call(t,y,T.isString(b)?b.trim():b,p,f))===!0&&v(y,p?p.concat(b):[b])}),d.pop()}}if(!T.isObject(e))throw new TypeError("data must be an object");return v(e),t}function Bs(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function rs(e,t){this._pairs=[],e&&Yn(e,this,t)}const ja=rs.prototype;ja.append=function(t,n){this._pairs.push([t,n])};ja.toString=function(t){const n=t?function(i){return t.call(this,i,Bs)}:Bs;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function du(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Fa(e,t,n){if(!t)return e;const i=n&&n.encode||du;T.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let a;if(s?a=s(t,n):a=T.isURLSearchParams(t)?t.toString():new rs(t,n).toString(i),a){const r=e.indexOf("#");r!==-1&&(e=e.slice(0,r)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class Ms{constructor(){this.handlers=[]}use(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){T.forEach(this.handlers,function(i){i!==null&&t(i)})}}const Wa={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},hu=typeof URLSearchParams<"u"?URLSearchParams:rs,fu=typeof FormData<"u"?FormData:null,vu=typeof Blob<"u"?Blob:null,mu={isBrowser:!0,classes:{URLSearchParams:hu,FormData:fu,Blob:vu},protocols:["http","https","file","blob","url","data"]},os=typeof window<"u"&&typeof document<"u",_i=typeof navigator=="object"&&navigator||void 0,gu=os&&(!_i||["ReactNative","NativeScript","NS"].indexOf(_i.product)<0),pu=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",yu=os&&window.location.href||"http://localhost",bu=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:os,hasStandardBrowserEnv:gu,hasStandardBrowserWebWorkerEnv:pu,navigator:_i,origin:yu},Symbol.toStringTag,{value:"Module"})),_e={...bu,...mu};function Su(e,t){return Yn(e,new _e.classes.URLSearchParams,Object.assign({visitor:function(n,i,s,a){return _e.isNode&&T.isBuffer(n)?(this.append(i,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}function wu(e){return T.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Cu(e){const t={},n=Object.keys(e);let i;const s=n.length;let a;for(i=0;i<s;i++)a=n[i],t[a]=e[a];return t}function za(e){function t(n,i,s,a){let r=n[a++];if(r==="__proto__")return!0;const o=Number.isFinite(+r),c=a>=n.length;return r=!r&&T.isArray(s)?s.length:r,c?(T.hasOwnProp(s,r)?s[r]=[s[r],i]:s[r]=i,!o):((!s[r]||!T.isObject(s[r]))&&(s[r]=[]),t(n,i,s[r],a)&&T.isArray(s[r])&&(s[r]=Cu(s[r])),!o)}if(T.isFormData(e)&&T.isFunction(e.entries)){const n={};return T.forEachEntry(e,(i,s)=>{t(wu(i),s,n,0)}),n}return null}function ku(e,t,n){if(T.isString(e))try{return(t||JSON.parse)(e),T.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(e)}const ln={transitional:Wa,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const i=n.getContentType()||"",s=i.indexOf("application/json")>-1,a=T.isObject(t);if(a&&T.isHTMLForm(t)&&(t=new FormData(t)),T.isFormData(t))return s?JSON.stringify(za(t)):t;if(T.isArrayBuffer(t)||T.isBuffer(t)||T.isStream(t)||T.isFile(t)||T.isBlob(t)||T.isReadableStream(t))return t;if(T.isArrayBufferView(t))return t.buffer;if(T.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(a){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Su(t,this.formSerializer).toString();if((o=T.isFileList(t))||i.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Yn(o?{"files[]":t}:t,c&&new c,this.formSerializer)}}return a||s?(n.setContentType("application/json",!1),ku(t)):t}],transformResponse:[function(t){const n=this.transitional||ln.transitional,i=n&&n.forcedJSONParsing,s=this.responseType==="json";if(T.isResponse(t)||T.isReadableStream(t))return t;if(t&&T.isString(t)&&(i&&!this.responseType||s)){const r=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(o){if(r)throw o.name==="SyntaxError"?J.from(o,J.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:_e.classes.FormData,Blob:_e.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};T.forEach(["delete","get","head","post","put","patch"],e=>{ln.headers[e]={}});const xu=T.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Eu=e=>{const t={};let n,i,s;return e&&e.split(`
`).forEach(function(r){s=r.indexOf(":"),n=r.substring(0,s).trim().toLowerCase(),i=r.substring(s+1).trim(),!(!n||t[n]&&xu[n])&&(n==="set-cookie"?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t},Ns=Symbol("internals");function Kt(e){return e&&String(e).trim().toLowerCase()}function Rn(e){return e===!1||e==null?e:T.isArray(e)?e.map(Rn):String(e)}function Ru(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}const Pu=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function ui(e,t,n,i,s){if(T.isFunction(i))return i.call(this,t,n);if(s&&(t=n),!!T.isString(t)){if(T.isString(i))return t.indexOf(i)!==-1;if(T.isRegExp(i))return i.test(t)}}function Tu(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,i)=>n.toUpperCase()+i)}function Au(e,t){const n=T.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(s,a,r){return this[i].call(this,t,s,a,r)},configurable:!0})})}let Me=class{constructor(t){t&&this.set(t)}set(t,n,i){const s=this;function a(o,c,l){const u=Kt(c);if(!u)throw new Error("header name must be a non-empty string");const d=T.findKey(s,u);(!d||s[d]===void 0||l===!0||l===void 0&&s[d]!==!1)&&(s[d||c]=Rn(o))}const r=(o,c)=>T.forEach(o,(l,u)=>a(l,u,c));if(T.isPlainObject(t)||t instanceof this.constructor)r(t,n);else if(T.isString(t)&&(t=t.trim())&&!Pu(t))r(Eu(t),n);else if(T.isHeaders(t))for(const[o,c]of t.entries())a(c,o,i);else t!=null&&a(n,t,i);return this}get(t,n){if(t=Kt(t),t){const i=T.findKey(this,t);if(i){const s=this[i];if(!n)return s;if(n===!0)return Ru(s);if(T.isFunction(n))return n.call(this,s,i);if(T.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Kt(t),t){const i=T.findKey(this,t);return!!(i&&this[i]!==void 0&&(!n||ui(this,this[i],i,n)))}return!1}delete(t,n){const i=this;let s=!1;function a(r){if(r=Kt(r),r){const o=T.findKey(i,r);o&&(!n||ui(i,i[o],o,n))&&(delete i[o],s=!0)}}return T.isArray(t)?t.forEach(a):a(t),s}clear(t){const n=Object.keys(this);let i=n.length,s=!1;for(;i--;){const a=n[i];(!t||ui(this,this[a],a,t,!0))&&(delete this[a],s=!0)}return s}normalize(t){const n=this,i={};return T.forEach(this,(s,a)=>{const r=T.findKey(i,a);if(r){n[r]=Rn(s),delete n[a];return}const o=t?Tu(a):String(a).trim();o!==a&&delete n[a],n[o]=Rn(s),i[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return T.forEach(this,(i,s)=>{i!=null&&i!==!1&&(n[s]=t&&T.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const i=new this(t);return n.forEach(s=>i.set(s)),i}static accessor(t){const i=(this[Ns]=this[Ns]={accessors:{}}).accessors,s=this.prototype;function a(r){const o=Kt(r);i[o]||(Au(s,r),i[o]=!0)}return T.isArray(t)?t.forEach(a):a(t),this}};Me.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);T.reduceDescriptors(Me.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[n]=i}}});T.freezeMethods(Me);function ci(e,t){const n=this||ln,i=t||n,s=Me.from(i.headers);let a=i.data;return T.forEach(e,function(o){a=o.call(n,a,s.normalize(),t?t.status:void 0)}),s.normalize(),a}function Ha(e){return!!(e&&e.__CANCEL__)}function Ht(e,t,n){J.call(this,e??"canceled",J.ERR_CANCELED,t,n),this.name="CanceledError"}T.inherits(Ht,J,{__CANCEL__:!0});function Ua(e,t,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(new J("Request failed with status code "+n.status,[J.ERR_BAD_REQUEST,J.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Ou(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function _u(e,t){e=e||10;const n=new Array(e),i=new Array(e);let s=0,a=0,r;return t=t!==void 0?t:1e3,function(c){const l=Date.now(),u=i[a];r||(r=l),n[s]=c,i[s]=l;let d=a,f=0;for(;d!==s;)f+=n[d++],d=d%e;if(s=(s+1)%e,s===a&&(a=(a+1)%e),l-r<t)return;const v=u&&l-u;return v?Math.round(f*1e3/v):void 0}}function Lu(e,t){let n=0,i=1e3/t,s,a;const r=(l,u=Date.now())=>{n=u,s=null,a&&(clearTimeout(a),a=null),e.apply(null,l)};return[(...l)=>{const u=Date.now(),d=u-n;d>=i?r(l,u):(s=l,a||(a=setTimeout(()=>{a=null,r(s)},i-d)))},()=>s&&r(s)]}const Bn=(e,t,n=3)=>{let i=0;const s=_u(50,250);return Lu(a=>{const r=a.loaded,o=a.lengthComputable?a.total:void 0,c=r-i,l=s(c),u=r<=o;i=r;const d={loaded:r,total:o,progress:o?r/o:void 0,bytes:c,rate:l||void 0,estimated:l&&o&&u?(o-r)/l:void 0,event:a,lengthComputable:o!=null,[t?"download":"upload"]:!0};e(d)},n)},Is=(e,t)=>{const n=e!=null;return[i=>t[0]({lengthComputable:n,total:e,loaded:i}),t[1]]},$s=e=>(...t)=>T.asap(()=>e(...t)),Vu=_e.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,_e.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(_e.origin),_e.navigator&&/(msie|trident)/i.test(_e.navigator.userAgent)):()=>!0,Du=_e.hasStandardBrowserEnv?{write(e,t,n,i,s,a){const r=[e+"="+encodeURIComponent(t)];T.isNumber(n)&&r.push("expires="+new Date(n).toGMTString()),T.isString(i)&&r.push("path="+i),T.isString(s)&&r.push("domain="+s),a===!0&&r.push("secure"),document.cookie=r.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Bu(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Mu(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function qa(e,t,n){let i=!Bu(t);return e&&(i||n==!1)?Mu(e,t):t}const js=e=>e instanceof Me?{...e}:e;function Pt(e,t){t=t||{};const n={};function i(l,u,d,f){return T.isPlainObject(l)&&T.isPlainObject(u)?T.merge.call({caseless:f},l,u):T.isPlainObject(u)?T.merge({},u):T.isArray(u)?u.slice():u}function s(l,u,d,f){if(T.isUndefined(u)){if(!T.isUndefined(l))return i(void 0,l,d,f)}else return i(l,u,d,f)}function a(l,u){if(!T.isUndefined(u))return i(void 0,u)}function r(l,u){if(T.isUndefined(u)){if(!T.isUndefined(l))return i(void 0,l)}else return i(void 0,u)}function o(l,u,d){if(d in t)return i(l,u);if(d in e)return i(void 0,l)}const c={url:a,method:a,data:a,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,withXSRFToken:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:o,headers:(l,u,d)=>s(js(l),js(u),d,!0)};return T.forEach(Object.keys(Object.assign({},e,t)),function(u){const d=c[u]||s,f=d(e[u],t[u],u);T.isUndefined(f)&&d!==o||(n[u]=f)}),n}const Ga=e=>{const t=Pt({},e);let{data:n,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:a,headers:r,auth:o}=t;t.headers=r=Me.from(r),t.url=Fa(qa(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&r.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let c;if(T.isFormData(n)){if(_e.hasStandardBrowserEnv||_e.hasStandardBrowserWebWorkerEnv)r.setContentType(void 0);else if((c=r.getContentType())!==!1){const[l,...u]=c?c.split(";").map(d=>d.trim()).filter(Boolean):[];r.setContentType([l||"multipart/form-data",...u].join("; "))}}if(_e.hasStandardBrowserEnv&&(i&&T.isFunction(i)&&(i=i(t)),i||i!==!1&&Vu(t.url))){const l=s&&a&&Du.read(a);l&&r.set(s,l)}return t},Nu=typeof XMLHttpRequest<"u",Iu=Nu&&function(e){return new Promise(function(n,i){const s=Ga(e);let a=s.data;const r=Me.from(s.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:l}=s,u,d,f,v,h;function p(){v&&v(),h&&h(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let g=new XMLHttpRequest;g.open(s.method.toUpperCase(),s.url,!0),g.timeout=s.timeout;function y(){if(!g)return;const w=Me.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),S={data:!o||o==="text"||o==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:w,config:e,request:g};Ua(function(x){n(x),p()},function(x){i(x),p()},S),g=null}"onloadend"in g?g.onloadend=y:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(y)},g.onabort=function(){g&&(i(new J("Request aborted",J.ECONNABORTED,e,g)),g=null)},g.onerror=function(){i(new J("Network Error",J.ERR_NETWORK,e,g)),g=null},g.ontimeout=function(){let C=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const S=s.transitional||Wa;s.timeoutErrorMessage&&(C=s.timeoutErrorMessage),i(new J(C,S.clarifyTimeoutError?J.ETIMEDOUT:J.ECONNABORTED,e,g)),g=null},a===void 0&&r.setContentType(null),"setRequestHeader"in g&&T.forEach(r.toJSON(),function(C,S){g.setRequestHeader(S,C)}),T.isUndefined(s.withCredentials)||(g.withCredentials=!!s.withCredentials),o&&o!=="json"&&(g.responseType=s.responseType),l&&([f,h]=Bn(l,!0),g.addEventListener("progress",f)),c&&g.upload&&([d,v]=Bn(c),g.upload.addEventListener("progress",d),g.upload.addEventListener("loadend",v)),(s.cancelToken||s.signal)&&(u=w=>{g&&(i(!w||w.type?new Ht(null,e,g):w),g.abort(),g=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const b=Ou(s.url);if(b&&_e.protocols.indexOf(b)===-1){i(new J("Unsupported protocol "+b+":",J.ERR_BAD_REQUEST,e));return}g.send(a||null)})},$u=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let i=new AbortController,s;const a=function(l){if(!s){s=!0,o();const u=l instanceof Error?l:this.reason;i.abort(u instanceof J?u:new Ht(u instanceof Error?u.message:u))}};let r=t&&setTimeout(()=>{r=null,a(new J(`timeout ${t} of ms exceeded`,J.ETIMEDOUT))},t);const o=()=>{e&&(r&&clearTimeout(r),r=null,e.forEach(l=>{l.unsubscribe?l.unsubscribe(a):l.removeEventListener("abort",a)}),e=null)};e.forEach(l=>l.addEventListener("abort",a));const{signal:c}=i;return c.unsubscribe=()=>T.asap(o),c}},ju=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let i=0,s;for(;i<n;)s=i+t,yield e.slice(i,s),i=s},Fu=async function*(e,t){for await(const n of Wu(e))yield*ju(n,t)},Wu=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:i}=await t.read();if(n)break;yield i}}finally{await t.cancel()}},Fs=(e,t,n,i)=>{const s=Fu(e,t);let a=0,r,o=c=>{r||(r=!0,i&&i(c))};return new ReadableStream({async pull(c){try{const{done:l,value:u}=await s.next();if(l){o(),c.close();return}let d=u.byteLength;if(n){let f=a+=d;n(f)}c.enqueue(new Uint8Array(u))}catch(l){throw o(l),l}},cancel(c){return o(c),s.return()}},{highWaterMark:2})},Jn=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Ka=Jn&&typeof ReadableStream=="function",zu=Jn&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Xa=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Hu=Ka&&Xa(()=>{let e=!1;const t=new Request(_e.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Ws=64*1024,Li=Ka&&Xa(()=>T.isReadableStream(new Response("").body)),Mn={stream:Li&&(e=>e.body)};Jn&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Mn[t]&&(Mn[t]=T.isFunction(e[t])?n=>n[t]():(n,i)=>{throw new J(`Response type '${t}' is not supported`,J.ERR_NOT_SUPPORT,i)})})})(new Response);const Uu=async e=>{if(e==null)return 0;if(T.isBlob(e))return e.size;if(T.isSpecCompliantForm(e))return(await new Request(_e.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(T.isArrayBufferView(e)||T.isArrayBuffer(e))return e.byteLength;if(T.isURLSearchParams(e)&&(e=e+""),T.isString(e))return(await zu(e)).byteLength},qu=async(e,t)=>{const n=T.toFiniteNumber(e.getContentLength());return n??Uu(t)},Gu=Jn&&(async e=>{let{url:t,method:n,data:i,signal:s,cancelToken:a,timeout:r,onDownloadProgress:o,onUploadProgress:c,responseType:l,headers:u,withCredentials:d="same-origin",fetchOptions:f}=Ga(e);l=l?(l+"").toLowerCase():"text";let v=$u([s,a&&a.toAbortSignal()],r),h;const p=v&&v.unsubscribe&&(()=>{v.unsubscribe()});let g;try{if(c&&Hu&&n!=="get"&&n!=="head"&&(g=await qu(u,i))!==0){let S=new Request(t,{method:"POST",body:i,duplex:"half"}),R;if(T.isFormData(i)&&(R=S.headers.get("content-type"))&&u.setContentType(R),S.body){const[x,E]=Is(g,Bn($s(c)));i=Fs(S.body,Ws,x,E)}}T.isString(d)||(d=d?"include":"omit");const y="credentials"in Request.prototype;h=new Request(t,{...f,signal:v,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:i,duplex:"half",credentials:y?d:void 0});let b=await fetch(h);const w=Li&&(l==="stream"||l==="response");if(Li&&(o||w&&p)){const S={};["status","statusText","headers"].forEach(O=>{S[O]=b[O]});const R=T.toFiniteNumber(b.headers.get("content-length")),[x,E]=o&&Is(R,Bn($s(o),!0))||[];b=new Response(Fs(b.body,Ws,x,()=>{E&&E(),p&&p()}),S)}l=l||"text";let C=await Mn[T.findKey(Mn,l)||"text"](b,e);return!w&&p&&p(),await new Promise((S,R)=>{Ua(S,R,{data:C,headers:Me.from(b.headers),status:b.status,statusText:b.statusText,config:e,request:h})})}catch(y){throw p&&p(),y&&y.name==="TypeError"&&/fetch/i.test(y.message)?Object.assign(new J("Network Error",J.ERR_NETWORK,e,h),{cause:y.cause||y}):J.from(y,y&&y.code,e,h)}}),Vi={http:lu,xhr:Iu,fetch:Gu};T.forEach(Vi,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const zs=e=>`- ${e}`,Ku=e=>T.isFunction(e)||e===null||e===!1,Ya={getAdapter:e=>{e=T.isArray(e)?e:[e];const{length:t}=e;let n,i;const s={};for(let a=0;a<t;a++){n=e[a];let r;if(i=n,!Ku(n)&&(i=Vi[(r=String(n)).toLowerCase()],i===void 0))throw new J(`Unknown adapter '${r}'`);if(i)break;s[r||"#"+a]=i}if(!i){const a=Object.entries(s).map(([o,c])=>`adapter ${o} `+(c===!1?"is not supported by the environment":"is not available in the build"));let r=t?a.length>1?`since :
`+a.map(zs).join(`
`):" "+zs(a[0]):"as no adapter specified";throw new J("There is no suitable adapter to dispatch the request "+r,"ERR_NOT_SUPPORT")}return i},adapters:Vi};function di(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ht(null,e)}function Hs(e){return di(e),e.headers=Me.from(e.headers),e.data=ci.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Ya.getAdapter(e.adapter||ln.adapter)(e).then(function(i){return di(e),i.data=ci.call(e,e.transformResponse,i),i.headers=Me.from(i.headers),i},function(i){return Ha(i)||(di(e),i&&i.response&&(i.response.data=ci.call(e,e.transformResponse,i.response),i.response.headers=Me.from(i.response.headers))),Promise.reject(i)})}const Ja="1.8.4",Qn={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Qn[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const Us={};Qn.transitional=function(t,n,i){function s(a,r){return"[Axios v"+Ja+"] Transitional option '"+a+"'"+r+(i?". "+i:"")}return(a,r,o)=>{if(t===!1)throw new J(s(r," has been removed"+(n?" in "+n:"")),J.ERR_DEPRECATED);return n&&!Us[r]&&(Us[r]=!0,console.warn(s(r," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(a,r,o):!0}};Qn.spelling=function(t){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};function Xu(e,t,n){if(typeof e!="object")throw new J("options must be an object",J.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let s=i.length;for(;s-- >0;){const a=i[s],r=t[a];if(r){const o=e[a],c=o===void 0||r(o,a,e);if(c!==!0)throw new J("option "+a+" must be "+c,J.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new J("Unknown option "+a,J.ERR_BAD_OPTION)}}const Pn={assertOptions:Xu,validators:Qn},qe=Pn.validators;let xt=class{constructor(t){this.defaults=t,this.interceptors={request:new Ms,response:new Ms}}async request(t,n){try{return await this._request(t,n)}catch(i){if(i instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const a=s.stack?s.stack.replace(/^.+\n/,""):"";try{i.stack?a&&!String(i.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+a):i.stack=a}catch{}}throw i}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Pt(this.defaults,n);const{transitional:i,paramsSerializer:s,headers:a}=n;i!==void 0&&Pn.assertOptions(i,{silentJSONParsing:qe.transitional(qe.boolean),forcedJSONParsing:qe.transitional(qe.boolean),clarifyTimeoutError:qe.transitional(qe.boolean)},!1),s!=null&&(T.isFunction(s)?n.paramsSerializer={serialize:s}:Pn.assertOptions(s,{encode:qe.function,serialize:qe.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Pn.assertOptions(n,{baseUrl:qe.spelling("baseURL"),withXsrfToken:qe.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let r=a&&T.merge(a.common,a[n.method]);a&&T.forEach(["delete","get","head","post","put","patch","common"],h=>{delete a[h]}),n.headers=Me.concat(r,a);const o=[];let c=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(n)===!1||(c=c&&p.synchronous,o.unshift(p.fulfilled,p.rejected))});const l=[];this.interceptors.response.forEach(function(p){l.push(p.fulfilled,p.rejected)});let u,d=0,f;if(!c){const h=[Hs.bind(this),void 0];for(h.unshift.apply(h,o),h.push.apply(h,l),f=h.length,u=Promise.resolve(n);d<f;)u=u.then(h[d++],h[d++]);return u}f=o.length;let v=n;for(d=0;d<f;){const h=o[d++],p=o[d++];try{v=h(v)}catch(g){p.call(this,g);break}}try{u=Hs.call(this,v)}catch(h){return Promise.reject(h)}for(d=0,f=l.length;d<f;)u=u.then(l[d++],l[d++]);return u}getUri(t){t=Pt(this.defaults,t);const n=qa(t.baseURL,t.url,t.allowAbsoluteUrls);return Fa(n,t.params,t.paramsSerializer)}};T.forEach(["delete","get","head","options"],function(t){xt.prototype[t]=function(n,i){return this.request(Pt(i||{},{method:t,url:n,data:(i||{}).data}))}});T.forEach(["post","put","patch"],function(t){function n(i){return function(a,r,o){return this.request(Pt(o||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:r}))}}xt.prototype[t]=n(),xt.prototype[t+"Form"]=n(!0)});let Yu=class Qa{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const i=this;this.promise.then(s=>{if(!i._listeners)return;let a=i._listeners.length;for(;a-- >0;)i._listeners[a](s);i._listeners=null}),this.promise.then=s=>{let a;const r=new Promise(o=>{i.subscribe(o),a=o}).then(s);return r.cancel=function(){i.unsubscribe(a)},r},t(function(a,r,o){i.reason||(i.reason=new Ht(a,r,o),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=i=>{t.abort(i)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Qa(function(s){t=s}),cancel:t}}};function Ju(e){return function(n){return e.apply(null,n)}}function Qu(e){return T.isObject(e)&&e.isAxiosError===!0}const Di={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Di).forEach(([e,t])=>{Di[t]=e});function Za(e){const t=new xt(e),n=Oa(xt.prototype.request,t);return T.extend(n,xt.prototype,t,{allOwnKeys:!0}),T.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return Za(Pt(e,s))},n}const ye=Za(ln);ye.Axios=xt;ye.CanceledError=Ht;ye.CancelToken=Yu;ye.isCancel=Ha;ye.VERSION=Ja;ye.toFormData=Yn;ye.AxiosError=J;ye.Cancel=ye.CanceledError;ye.all=function(t){return Promise.all(t)};ye.spread=Ju;ye.isAxiosError=Qu;ye.mergeConfig=Pt;ye.AxiosHeaders=Me;ye.formToJSON=e=>za(T.isHTMLForm(e)?new FormData(e):e);ye.getAdapter=Ya.getAdapter;ye.HttpStatusCode=Di;ye.default=ye;const{Axios:kv,AxiosError:xv,CanceledError:Ev,isCancel:Rv,CancelToken:Pv,VERSION:Tv,all:Av,Cancel:Ov,isAxiosError:_v,spread:Lv,toFormData:Vv,AxiosHeaders:Dv,HttpStatusCode:Bv,formToJSON:Mv,getAdapter:Nv,mergeConfig:Iv}=ye,ve=ye.create({baseURL:"/api"}),Zu=G()({name:"VCardActions",props:se(),setup(e,t){let{slots:n}=t;return jt({VBtn:{slim:!0,variant:"text"}}),ee(()=>{var i;return m("div",{class:["v-card-actions",e.class],style:e.style},[(i=n.default)==null?void 0:i.call(n)])}),{}}}),ec=$({opacity:[Number,String],...se(),...we()},"VCardSubtitle"),tc=G()({name:"VCardSubtitle",props:ec(),setup(e,t){let{slots:n}=t;return ee(()=>m(e.tag,{class:["v-card-subtitle",e.class],style:[{"--v-card-subtitle-opacity":e.opacity},e.style]},n)),{}}}),nc=is("v-card-title"),ic=$({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),ke=G(!1)({name:"VDefaultsProvider",props:ic(),setup(e,t){let{slots:n}=t;const{defaults:i,disabled:s,reset:a,root:r,scoped:o}=Fo(e);return jt(i,{reset:a,root:r,scoped:o,disabled:s}),()=>{var c;return(c=n.default)==null?void 0:c.call(n)}}});function ls(e){return Xi(()=>{const t=[],n={};if(e.value.background)if(xs(e.value.background)){if(n.backgroundColor=e.value.background,!e.value.text&&Wo(e.value.background)){const i=zo(e.value.background);if(i.a==null||i.a===1){const s=Ho(i);n.color=s,n.caretColor=s}}}else t.push(`bg-${e.value.background}`);return e.value.text&&(xs(e.value.text)?(n.color=e.value.text,n.caretColor=e.value.text):t.push(`text-${e.value.text}`)),{colorClasses:t,colorStyles:n}})}function st(e,t){const n=k(()=>({text:Dt(e)?e.value:t?e[t]:null})),{colorClasses:i,colorStyles:s}=ls(n);return{textColorClasses:i,textColorStyles:s}}function mt(e,t){const n=k(()=>({background:Dt(e)?e.value:t?e[t]:null})),{colorClasses:i,colorStyles:s}=ls(n);return{backgroundColorClasses:i,backgroundColorStyles:s}}const sc=["x-small","small","default","large","x-large"],un=$({size:{type:[String,Number],default:"default"}},"size");function cn(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:at();return Xi(()=>{let n,i;return _n(sc,e.size)?n=`${t}--size-${e.size}`:e.size&&(i={width:ae(e.size),height:ae(e.size)}),{sizeClasses:n,sizeStyles:i}})}const ac=$({color:String,disabled:Boolean,start:Boolean,end:Boolean,icon:ce,opacity:[String,Number],...se(),...un(),...we({tag:"i"}),...Ae()},"VIcon"),Se=G()({name:"VIcon",props:ac(),setup(e,t){let{attrs:n,slots:i}=t;const s=z(),{themeClasses:a}=Uo(),{iconData:r}=qo(k(()=>s.value||e.icon)),{sizeClasses:o}=cn(e),{textColorClasses:c,textColorStyles:l}=st(q(e,"color"));return ee(()=>{var f,v;const u=(f=i.default)==null?void 0:f.call(i);u&&(s.value=(v=Go(u).filter(h=>h.type===Ko&&h.children&&typeof h.children=="string")[0])==null?void 0:v.children);const d=!!(n.onClick||n.onClickOnce);return m(r.value.component,{tag:e.tag,icon:r.value.icon,class:["v-icon","notranslate",a.value,o.value,c.value,{"v-icon--clickable":d,"v-icon--disabled":e.disabled,"v-icon--start":e.start,"v-icon--end":e.end},e.class],style:[{"--v-icon-opacity":e.opacity},o.value?void 0:{fontSize:ae(e.size),height:ae(e.size),width:ae(e.size)},l.value,e.style],role:d?"button":void 0,"aria-hidden":!d,tabindex:d?e.disabled?-1:0:void 0},{default:()=>[u]})}),{}}});function rc(e){return{aspectStyles:k(()=>{const t=Number(e.aspectRatio);return t?{paddingBottom:String(1/t*100)+"%"}:void 0})}}const er=$({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...se(),...lt()},"VResponsive"),qs=G()({name:"VResponsive",props:er(),setup(e,t){let{slots:n}=t;const{aspectStyles:i}=rc(e),{dimensionStyles:s}=ot(e);return ee(()=>{var a;return m("div",{class:["v-responsive",{"v-responsive--inline":e.inline},e.class],style:[s.value,e.style]},[m("div",{class:"v-responsive__sizer",style:i.value},null),(a=n.additional)==null?void 0:a.call(n),n.default&&m("div",{class:["v-responsive__content",e.contentClass]},[n.default()])])}),{}}}),Je=$({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function Qe(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:at();return{roundedClasses:k(()=>{const i=Dt(e)?e.value:e.rounded,s=Dt(e)?e.value:e.tile,a=[];if(i===!0||i==="")a.push(`${t}--rounded`);else if(typeof i=="string"||i===0)for(const r of String(i).split(" "))a.push(`rounded-${r}`);else(s||i===!1)&&a.push("rounded-0");return a})}}const Ut=$({transition:{type:[Boolean,String,Object],default:"fade-transition",validator:e=>e!==!0}},"transition"),nt=(e,t)=>{let{slots:n}=t;const{transition:i,disabled:s,group:a,...r}=e,{component:o=a?Yi:Et,...c}=typeof i=="object"?i:{};return $t(o,Z(typeof i=="string"?{name:s?"":i}:c,typeof i=="string"?{}:Object.fromEntries(Object.entries({disabled:s,group:a}).filter(l=>{let[u,d]=l;return d!==void 0})),r),n)};function oc(e,t){if(!Ji)return;const n=t.modifiers||{},i=t.value,{handler:s,options:a}=typeof i=="object"?i:{handler:i,options:{}},r=new IntersectionObserver(function(){var d;let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],c=arguments.length>1?arguments[1]:void 0;const l=(d=e._observe)==null?void 0:d[t.instance.$.uid];if(!l)return;const u=o.some(f=>f.isIntersecting);s&&(!n.quiet||l.init)&&(!n.once||u||l.init)&&s(u,o,c),u&&n.once?tr(e,t):l.init=!0},a);e._observe=Object(e._observe),e._observe[t.instance.$.uid]={init:!1,observer:r},r.observe(e)}function tr(e,t){var i;const n=(i=e._observe)==null?void 0:i[t.instance.$.uid];n&&(n.observer.unobserve(e),delete e._observe[t.instance.$.uid])}const us={mounted:oc,unmounted:tr},lc=$({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...er(),...se(),...Je(),...Ut()},"VImg"),nr=G()({name:"VImg",directives:{intersect:us},props:lc(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,t){let{emit:n,slots:i}=t;const{backgroundColorClasses:s,backgroundColorStyles:a}=mt(q(e,"color")),{roundedClasses:r}=Qe(e),o=We("VImg"),c=te(""),l=z(),u=te(e.eager?"loading":"idle"),d=te(),f=te(),v=k(()=>e.src&&typeof e.src=="object"?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),h=k(()=>v.value.aspect||d.value/f.value||0);ie(()=>e.src,()=>{p(u.value!=="idle")}),ie(h,(P,A)=>{!P&&A&&l.value&&C(l.value)}),Hn(()=>p());function p(P){if(!(e.eager&&P)&&!(Ji&&!P&&!e.eager)){if(u.value="loading",v.value.lazySrc){const A=new Image;A.src=v.value.lazySrc,C(A,null)}v.value.src&&Le(()=>{var A;n("loadstart",((A=l.value)==null?void 0:A.currentSrc)||v.value.src),setTimeout(()=>{var M;if(!o.isUnmounted)if((M=l.value)!=null&&M.complete){if(l.value.naturalWidth||y(),u.value==="error")return;h.value||C(l.value,null),u.value==="loading"&&g()}else h.value||C(l.value),b()})})}}function g(){var P;o.isUnmounted||(b(),C(l.value),u.value="loaded",n("load",((P=l.value)==null?void 0:P.currentSrc)||v.value.src))}function y(){var P;o.isUnmounted||(u.value="error",n("error",((P=l.value)==null?void 0:P.currentSrc)||v.value.src))}function b(){const P=l.value;P&&(c.value=P.currentSrc||P.src)}let w=-1;Xe(()=>{clearTimeout(w)});function C(P){let A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const M=()=>{if(clearTimeout(w),o.isUnmounted)return;const{naturalHeight:H,naturalWidth:W}=P;H||W?(d.value=W,f.value=H):!P.complete&&u.value==="loading"&&A!=null?w=window.setTimeout(M,A):(P.currentSrc.endsWith(".svg")||P.currentSrc.startsWith("data:image/svg+xml"))&&(d.value=1,f.value=1)};M()}const S=k(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),R=()=>{var M;if(!v.value.src||u.value==="idle")return null;const P=m("img",{class:["v-img__img",S.value],style:{objectPosition:e.position},crossorigin:e.crossorigin,src:v.value.src,srcset:v.value.srcset,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable,sizes:e.sizes,ref:l,onLoad:g,onError:y},null),A=(M=i.sources)==null?void 0:M.call(i);return m(nt,{transition:e.transition,appear:!0},{default:()=>[Ve(A?m("picture",{class:"v-img__picture"},[A,P]):P,[[At,u.value==="loaded"]])]})},x=()=>m(nt,{transition:e.transition},{default:()=>[v.value.lazySrc&&u.value!=="loaded"&&m("img",{class:["v-img__img","v-img__img--preload",S.value],style:{objectPosition:e.position},crossorigin:e.crossorigin,src:v.value.lazySrc,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable},null)]}),E=()=>i.placeholder?m(nt,{transition:e.transition,appear:!0},{default:()=>[(u.value==="loading"||u.value==="error"&&!i.error)&&m("div",{class:"v-img__placeholder"},[i.placeholder()])]}):null,O=()=>i.error?m(nt,{transition:e.transition,appear:!0},{default:()=>[u.value==="error"&&m("div",{class:"v-img__error"},[i.error()])]}):null,B=()=>e.gradient?m("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,_=te(!1);{const P=ie(h,A=>{A&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{_.value=!0})}),P())})}return ee(()=>{const P=qs.filterProps(e);return Ve(m(qs,Z({class:["v-img",{"v-img--absolute":e.absolute,"v-img--booting":!_.value},s.value,r.value,e.class],style:[{width:ae(e.width==="auto"?d.value:e.width)},a.value,e.style]},P,{aspectRatio:h.value,"aria-label":e.alt,role:e.alt?"img":void 0}),{additional:()=>m(fe,null,[m(R,null,null),m(x,null,null),m(B,null,null),m(E,null,null),m(O,null,null)]),default:i.default}),[[gt("intersect"),{handler:p,options:e.options},null,{once:!0}]])}),{currentSrc:c,image:l,state:u,naturalWidth:d,naturalHeight:f}}}),Ot=$({border:[Boolean,Number,String]},"border");function _t(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:at();return{borderClasses:k(()=>{const i=Dt(e)?e.value:e.border,s=[];if(i===!0||i==="")s.push(`${t}--border`);else if(typeof i=="string"||i===0)for(const a of String(i).split(" "))s.push(`border-${a}`);return s})}}const uc=[null,"default","comfortable","compact"],Ze=$({density:{type:String,default:"default",validator:e=>uc.includes(e)}},"density");function ut(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:at();return{densityClasses:k(()=>`${t}--density-${e.density}`)}}const cc=["elevated","flat","tonal","outlined","text","plain"];function dn(e,t){return m(fe,null,[e&&m("span",{key:"overlay",class:`${t}__overlay`},null),m("span",{key:"underlay",class:`${t}__underlay`},null)])}const St=$({color:String,variant:{type:String,default:"elevated",validator:e=>cc.includes(e)}},"variant");function hn(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:at();const n=k(()=>{const{variant:a}=Jt(e);return`${t}--variant-${a}`}),{colorClasses:i,colorStyles:s}=ls(k(()=>{const{variant:a,color:r}=Jt(e);return{[["elevated","flat"].includes(a)?"background":"text"]:r}}));return{colorClasses:i,colorStyles:s,variantClasses:n}}const dc=$({start:Boolean,end:Boolean,icon:ce,image:String,text:String,...Ot(),...se(),...Ze(),...Je(),...un(),...we(),...Ae(),...St({variant:"flat"})},"VAvatar"),Tt=G()({name:"VAvatar",props:dc(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=Ne(e),{borderClasses:s}=_t(e),{colorClasses:a,colorStyles:r,variantClasses:o}=hn(e),{densityClasses:c}=ut(e),{roundedClasses:l}=Qe(e),{sizeClasses:u,sizeStyles:d}=cn(e);return ee(()=>m(e.tag,{class:["v-avatar",{"v-avatar--start":e.start,"v-avatar--end":e.end},i.value,s.value,a.value,c.value,l.value,u.value,o.value,e.class],style:[r.value,d.value,e.style]},{default:()=>[n.default?m(ke,{key:"content-defaults",defaults:{VImg:{cover:!0,src:e.image},VIcon:{icon:e.icon}}},{default:()=>[n.default()]}):e.image?m(nr,{key:"image",src:e.image,alt:"",cover:!0},null):e.icon?m(Se,{key:"icon",icon:e.icon},null):e.text,dn(!1,"v-avatar")]})),{}}}),hc=$({appendAvatar:String,appendIcon:ce,prependAvatar:String,prependIcon:ce,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...se(),...Ze()},"VCardItem"),fc=G()({name:"VCardItem",props:hc(),setup(e,t){let{slots:n}=t;return ee(()=>{var l;const i=!!(e.prependAvatar||e.prependIcon),s=!!(i||n.prepend),a=!!(e.appendAvatar||e.appendIcon),r=!!(a||n.append),o=!!(e.title!=null||n.title),c=!!(e.subtitle!=null||n.subtitle);return m("div",{class:["v-card-item",e.class],style:e.style},[s&&m("div",{key:"prepend",class:"v-card-item__prepend"},[n.prepend?m(ke,{key:"prepend-defaults",disabled:!i,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon}}},n.prepend):m(fe,null,[e.prependAvatar&&m(Tt,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&m(Se,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]),m("div",{class:"v-card-item__content"},[o&&m(nc,{key:"title"},{default:()=>{var u;return[((u=n.title)==null?void 0:u.call(n))??Ke(e.title)]}}),c&&m(tc,{key:"subtitle"},{default:()=>{var u;return[((u=n.subtitle)==null?void 0:u.call(n))??Ke(e.subtitle)]}}),(l=n.default)==null?void 0:l.call(n)]),r&&m("div",{key:"append",class:"v-card-item__append"},[n.append?m(ke,{key:"append-defaults",disabled:!a,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon}}},n.append):m(fe,null,[e.appendIcon&&m(Se,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&m(Tt,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)])])])}),{}}}),vc=$({opacity:[Number,String],...se(),...we()},"VCardText"),mc=G()({name:"VCardText",props:vc(),setup(e,t){let{slots:n}=t;return ee(()=>m(e.tag,{class:["v-card-text",e.class],style:[{"--v-card-text-opacity":e.opacity},e.style]},n)),{}}}),qt=$({elevation:{type:[Number,String],validator(e){const t=parseInt(e);return!isNaN(t)&&t>=0&&t<=24}}},"elevation");function Gt(e){return{elevationClasses:k(()=>{const n=Dt(e)?e.value:e.elevation,i=[];return n==null||i.push(`elevation-${n}`),i})}}function ir(e,t){const n=z(),i=te(!1);if(Ji){const s=new IntersectionObserver(a=>{i.value=!!a.find(r=>r.isIntersecting)},t);Xe(()=>{s.disconnect()}),ie(n,(a,r)=>{r&&(s.unobserve(r),i.value=!1),a&&s.observe(a)},{flush:"post"})}return{intersectionRef:n,isIntersecting:i}}const Gs={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},Zn=$({location:String},"location");function cs(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2?arguments[2]:void 0;const{isRtl:i}=pt();return{locationStyles:k(()=>{if(!e.location)return{};const{side:a,align:r}=Ti(e.location.split(" ").length>1?e.location:`${e.location} center`,i.value);function o(l){return n?n(l):0}const c={};return a!=="center"&&(t?c[Gs[a]]=`calc(100% - ${o(a)}px)`:c[a]=0),r!=="center"?t?c[Gs[r]]=`calc(100% - ${o(r)}px)`:c[r]=0:(a==="center"?c.top=c.left="50%":c[{top:"left",bottom:"left",left:"top",right:"top"}[a]]="50%",c.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[a]),c})}}const gc=$({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},bufferColor:String,bufferOpacity:[Number,String],clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},opacity:[Number,String],reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...se(),...Zn({location:"top"}),...Je(),...we(),...Ae()},"VProgressLinear"),ds=G()({name:"VProgressLinear",props:gc(),emits:{"update:modelValue":e=>!0},setup(e,t){var _;let{slots:n}=t;const i=pe(e,"modelValue"),{isRtl:s,rtlClasses:a}=pt(),{themeClasses:r}=Ne(e),{locationStyles:o}=cs(e),{textColorClasses:c,textColorStyles:l}=st(e,"color"),{backgroundColorClasses:u,backgroundColorStyles:d}=mt(k(()=>e.bgColor||e.color)),{backgroundColorClasses:f,backgroundColorStyles:v}=mt(k(()=>e.bufferColor||e.bgColor||e.color)),{backgroundColorClasses:h,backgroundColorStyles:p}=mt(e,"color"),{roundedClasses:g}=Qe(e),{intersectionRef:y,isIntersecting:b}=ir(),w=k(()=>parseFloat(e.max)),C=k(()=>parseFloat(e.height)),S=k(()=>ft(parseFloat(e.bufferValue)/w.value*100,0,100)),R=k(()=>ft(parseFloat(i.value)/w.value*100,0,100)),x=k(()=>s.value!==e.reverse),E=k(()=>e.indeterminate?"fade-transition":"slide-x-transition"),O=Te&&((_=window.matchMedia)==null?void 0:_.call(window,"(forced-colors: active)").matches);function B(P){if(!y.value)return;const{left:A,right:M,width:H}=y.value.getBoundingClientRect(),W=x.value?H-P.clientX+(M-H):P.clientX-A;i.value=Math.round(W/H*w.value)}return ee(()=>m(e.tag,{ref:y,class:["v-progress-linear",{"v-progress-linear--absolute":e.absolute,"v-progress-linear--active":e.active&&b.value,"v-progress-linear--reverse":x.value,"v-progress-linear--rounded":e.rounded,"v-progress-linear--rounded-bar":e.roundedBar,"v-progress-linear--striped":e.striped},g.value,r.value,a.value,e.class],style:[{bottom:e.location==="bottom"?0:void 0,top:e.location==="top"?0:void 0,height:e.active?ae(C.value):0,"--v-progress-linear-height":ae(C.value),...e.absolute?o.value:{}},e.style],role:"progressbar","aria-hidden":e.active?"false":"true","aria-valuemin":"0","aria-valuemax":e.max,"aria-valuenow":e.indeterminate?void 0:Math.min(parseFloat(i.value),w.value),onClick:e.clickable&&B},{default:()=>[e.stream&&m("div",{key:"stream",class:["v-progress-linear__stream",c.value],style:{...l.value,[x.value?"left":"right"]:ae(-C.value),borderTop:`${ae(C.value/2)} dotted`,opacity:parseFloat(e.bufferOpacity),top:`calc(50% - ${ae(C.value/4)})`,width:ae(100-S.value,"%"),"--v-progress-linear-stream-to":ae(C.value*(x.value?1:-1))}},null),m("div",{class:["v-progress-linear__background",O?void 0:u.value],style:[d.value,{opacity:parseFloat(e.bgOpacity),width:e.stream?0:void 0}]},null),m("div",{class:["v-progress-linear__buffer",O?void 0:f.value],style:[v.value,{opacity:parseFloat(e.bufferOpacity),width:ae(S.value,"%")}]},null),m(Et,{name:E.value},{default:()=>[e.indeterminate?m("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(P=>m("div",{key:P,class:["v-progress-linear__indeterminate",P,O?void 0:h.value],style:p.value},null))]):m("div",{class:["v-progress-linear__determinate",O?void 0:h.value],style:[p.value,{width:ae(R.value,"%")}]},null)]}),n.default&&m("div",{class:"v-progress-linear__content"},[n.default({value:R.value,buffer:S.value})])]})),{}}}),hs=$({loading:[Boolean,String]},"loader");function ei(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:at();return{loaderClasses:k(()=>({[`${t}--loading`]:e.loading}))}}function fs(e,t){var i;let{slots:n}=t;return m("div",{class:`${e.name}__loader`},[((i=n.default)==null?void 0:i.call(n,{color:e.color,isActive:e.active}))||m(ds,{absolute:e.absolute,active:e.active,color:e.color,height:"2",indeterminate:!0},null)])}const pc=["static","relative","fixed","absolute","sticky"],sr=$({position:{type:String,validator:e=>pc.includes(e)}},"position");function ar(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:at();return{positionClasses:k(()=>e.position?`${t}--${e.position}`:void 0)}}function yc(){const e=We("useRoute");return k(()=>{var t;return(t=e==null?void 0:e.proxy)==null?void 0:t.$route})}function bc(){var e,t;return(t=(e=We("useRouter"))==null?void 0:e.proxy)==null?void 0:t.$router}function ti(e,t){var d,f;const n=Xo("RouterLink"),i=k(()=>!!(e.href||e.to)),s=k(()=>(i==null?void 0:i.value)||Es(t,"click")||Es(e,"click"));if(typeof n=="string"||!("useLink"in n)){const v=q(e,"href");return{isLink:i,isClickable:s,href:v,linkProps:Qt({href:v})}}const a=k(()=>({...e,to:q(()=>e.to||"")})),r=n.useLink(a.value),o=k(()=>e.to?r:void 0),c=yc(),l=k(()=>{var v,h,p;return o.value?e.exact?c.value?((p=o.value.isExactActive)==null?void 0:p.value)&&vt(o.value.route.value.query,c.value.query):((h=o.value.isExactActive)==null?void 0:h.value)??!1:((v=o.value.isActive)==null?void 0:v.value)??!1:!1}),u=k(()=>{var v;return e.to?(v=o.value)==null?void 0:v.route.value.href:e.href});return{isLink:i,isClickable:s,isActive:l,route:(d=o.value)==null?void 0:d.route,navigate:(f=o.value)==null?void 0:f.navigate,href:u,linkProps:Qt({href:u,"aria-current":k(()=>l.value?"page":void 0)})}}const ni=$({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let hi=!1;function Sc(e,t){let n=!1,i,s;Te&&(e!=null&&e.beforeEach)&&(Le(()=>{window.addEventListener("popstate",a),i=e.beforeEach((r,o,c)=>{hi?n?t(c):c():setTimeout(()=>n?t(c):c()),hi=!0}),s=e==null?void 0:e.afterEach(()=>{hi=!1})}),je(()=>{window.removeEventListener("popstate",a),i==null||i(),s==null||s()}));function a(r){var o;(o=r.state)!=null&&o.replaced||(n=!0,setTimeout(()=>n=!1))}}const Bi=Symbol("rippleStop"),wc=80;function Ks(e,t){e.style.transform=t,e.style.webkitTransform=t}function Mi(e){return e.constructor.name==="TouchEvent"}function rr(e){return e.constructor.name==="KeyboardEvent"}const Cc=function(e,t){var d;let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=0,s=0;if(!rr(e)){const f=t.getBoundingClientRect(),v=Mi(e)?e.touches[e.touches.length-1]:e;i=v.clientX-f.left,s=v.clientY-f.top}let a=0,r=.3;(d=t._ripple)!=null&&d.circle?(r=.15,a=t.clientWidth/2,a=n.center?a:a+Math.sqrt((i-a)**2+(s-a)**2)/4):a=Math.sqrt(t.clientWidth**2+t.clientHeight**2)/2;const o=`${(t.clientWidth-a*2)/2}px`,c=`${(t.clientHeight-a*2)/2}px`,l=n.center?o:`${i-a}px`,u=n.center?c:`${s-a}px`;return{radius:a,scale:r,x:l,y:u,centerX:o,centerY:c}},Nn={show(e,t){var v;let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!((v=t==null?void 0:t._ripple)!=null&&v.enabled))return;const i=document.createElement("span"),s=document.createElement("span");i.appendChild(s),i.className="v-ripple__container",n.class&&(i.className+=` ${n.class}`);const{radius:a,scale:r,x:o,y:c,centerX:l,centerY:u}=Cc(e,t,n),d=`${a*2}px`;s.className="v-ripple__animation",s.style.width=d,s.style.height=d,t.appendChild(i);const f=window.getComputedStyle(t);f&&f.position==="static"&&(t.style.position="relative",t.dataset.previousPosition="static"),s.classList.add("v-ripple__animation--enter"),s.classList.add("v-ripple__animation--visible"),Ks(s,`translate(${o}, ${c}) scale3d(${r},${r},${r})`),s.dataset.activated=String(performance.now()),requestAnimationFrame(()=>{requestAnimationFrame(()=>{s.classList.remove("v-ripple__animation--enter"),s.classList.add("v-ripple__animation--in"),Ks(s,`translate(${l}, ${u}) scale3d(1,1,1)`)})})},hide(e){var a;if(!((a=e==null?void 0:e._ripple)!=null&&a.enabled))return;const t=e.getElementsByClassName("v-ripple__animation");if(t.length===0)return;const n=t[t.length-1];if(n.dataset.isHiding)return;n.dataset.isHiding="true";const i=performance.now()-Number(n.dataset.activated),s=Math.max(250-i,0);setTimeout(()=>{n.classList.remove("v-ripple__animation--in"),n.classList.add("v-ripple__animation--out"),setTimeout(()=>{var o;e.getElementsByClassName("v-ripple__animation").length===1&&e.dataset.previousPosition&&(e.style.position=e.dataset.previousPosition,delete e.dataset.previousPosition),((o=n.parentNode)==null?void 0:o.parentNode)===e&&e.removeChild(n.parentNode)},300)},s)}};function or(e){return typeof e>"u"||!!e}function en(e){const t={},n=e.currentTarget;if(!(!(n!=null&&n._ripple)||n._ripple.touched||e[Bi])){if(e[Bi]=!0,Mi(e))n._ripple.touched=!0,n._ripple.isTouch=!0;else if(n._ripple.isTouch)return;if(t.center=n._ripple.centered||rr(e),n._ripple.class&&(t.class=n._ripple.class),Mi(e)){if(n._ripple.showTimerCommit)return;n._ripple.showTimerCommit=()=>{Nn.show(e,n,t)},n._ripple.showTimer=window.setTimeout(()=>{var i;(i=n==null?void 0:n._ripple)!=null&&i.showTimerCommit&&(n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null)},wc)}else Nn.show(e,n,t)}}function Xs(e){e[Bi]=!0}function Ie(e){const t=e.currentTarget;if(t!=null&&t._ripple){if(window.clearTimeout(t._ripple.showTimer),e.type==="touchend"&&t._ripple.showTimerCommit){t._ripple.showTimerCommit(),t._ripple.showTimerCommit=null,t._ripple.showTimer=window.setTimeout(()=>{Ie(e)});return}window.setTimeout(()=>{t._ripple&&(t._ripple.touched=!1)}),Nn.hide(t)}}function lr(e){const t=e.currentTarget;t!=null&&t._ripple&&(t._ripple.showTimerCommit&&(t._ripple.showTimerCommit=null),window.clearTimeout(t._ripple.showTimer))}let tn=!1;function ur(e){!tn&&(e.keyCode===Rs.enter||e.keyCode===Rs.space)&&(tn=!0,en(e))}function cr(e){tn=!1,Ie(e)}function dr(e){tn&&(tn=!1,Ie(e))}function hr(e,t,n){const{value:i,modifiers:s}=t,a=or(i);if(a||Nn.hide(e),e._ripple=e._ripple??{},e._ripple.enabled=a,e._ripple.centered=s.center,e._ripple.circle=s.circle,Yo(i)&&i.class&&(e._ripple.class=i.class),a&&!n){if(s.stop){e.addEventListener("touchstart",Xs,{passive:!0}),e.addEventListener("mousedown",Xs);return}e.addEventListener("touchstart",en,{passive:!0}),e.addEventListener("touchend",Ie,{passive:!0}),e.addEventListener("touchmove",lr,{passive:!0}),e.addEventListener("touchcancel",Ie),e.addEventListener("mousedown",en),e.addEventListener("mouseup",Ie),e.addEventListener("mouseleave",Ie),e.addEventListener("keydown",ur),e.addEventListener("keyup",cr),e.addEventListener("blur",dr),e.addEventListener("dragstart",Ie,{passive:!0})}else!a&&n&&fr(e)}function fr(e){e.removeEventListener("mousedown",en),e.removeEventListener("touchstart",en),e.removeEventListener("touchend",Ie),e.removeEventListener("touchmove",lr),e.removeEventListener("touchcancel",Ie),e.removeEventListener("mouseup",Ie),e.removeEventListener("mouseleave",Ie),e.removeEventListener("keydown",ur),e.removeEventListener("keyup",cr),e.removeEventListener("dragstart",Ie),e.removeEventListener("blur",dr)}function kc(e,t){hr(e,t,!1)}function xc(e){delete e._ripple,fr(e)}function Ec(e,t){if(t.value===t.oldValue)return;const n=or(t.oldValue);hr(e,t,n)}const fn={mounted:kc,unmounted:xc,updated:Ec},Rc=$({appendAvatar:String,appendIcon:ce,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:ce,ripple:{type:[Boolean,Object],default:!0},subtitle:{type:[String,Number,Boolean],default:void 0},text:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...Ot(),...se(),...Ze(),...lt(),...qt(),...hs(),...Zn(),...sr(),...Je(),...ni(),...we(),...Ae(),...St({variant:"elevated"})},"VCard"),ct=G()({name:"VCard",directives:{Ripple:fn},props:Rc(),setup(e,t){let{attrs:n,slots:i}=t;const{themeClasses:s}=Ne(e),{borderClasses:a}=_t(e),{colorClasses:r,colorStyles:o,variantClasses:c}=hn(e),{densityClasses:l}=ut(e),{dimensionStyles:u}=ot(e),{elevationClasses:d}=Gt(e),{loaderClasses:f}=ei(e),{locationStyles:v}=cs(e),{positionClasses:h}=ar(e),{roundedClasses:p}=Qe(e),g=ti(e,n),y=k(()=>e.link!==!1&&g.isLink.value),b=k(()=>!e.disabled&&e.link!==!1&&(e.link||g.isClickable.value));return ee(()=>{const w=y.value?"a":e.tag,C=!!(i.title||e.title!=null),S=!!(i.subtitle||e.subtitle!=null),R=C||S,x=!!(i.append||e.appendAvatar||e.appendIcon),E=!!(i.prepend||e.prependAvatar||e.prependIcon),O=!!(i.image||e.image),B=R||E||x,_=!!(i.text||e.text!=null);return Ve(m(w,Z({class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":b.value},s.value,a.value,r.value,l.value,d.value,f.value,h.value,p.value,c.value,e.class],style:[o.value,u.value,v.value,e.style],onClick:b.value&&g.navigate,tabindex:e.disabled?-1:void 0},g.linkProps),{default:()=>{var P;return[O&&m("div",{key:"image",class:"v-card__image"},[i.image?m(ke,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},i.image):m(nr,{key:"image-img",cover:!0,src:e.image},null)]),m(fs,{name:"v-card",active:!!e.loading,color:typeof e.loading=="boolean"?void 0:e.loading},{default:i.loader}),B&&m(fc,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:i.item,prepend:i.prepend,title:i.title,subtitle:i.subtitle,append:i.append}),_&&m(mc,{key:"text"},{default:()=>{var A;return[((A=i.text)==null?void 0:A.call(i))??e.text]}}),(P=i.default)==null?void 0:P.call(i),i.actions&&m(Zu,null,{default:i.actions}),dn(b.value,"v-card")]}}),[[gt("ripple"),b.value&&e.ripple]])}),{}}}),Pc=$({fluid:{type:Boolean,default:!1},...se(),...lt(),...we()},"VContainer"),Tc=G()({name:"VContainer",props:Pc(),setup(e,t){let{slots:n}=t;const{rtlClasses:i}=pt(),{dimensionStyles:s}=ot(e);return ee(()=>m(e.tag,{class:["v-container",{"v-container--fluid":e.fluid},i.value,e.class],style:[s.value,e.style]},n)),{}}}),vr=Un.reduce((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e),{}),mr=Un.reduce((e,t)=>{const n="offset"+zn(t);return e[n]={type:[String,Number],default:null},e},{}),gr=Un.reduce((e,t)=>{const n="order"+zn(t);return e[n]={type:[String,Number],default:null},e},{}),Ys={col:Object.keys(vr),offset:Object.keys(mr),order:Object.keys(gr)};function Ac(e,t,n){let i=e;if(!(n==null||n===!1)){if(t){const s=t.replace(e,"");i+=`-${s}`}return e==="col"&&(i="v-"+i),e==="col"&&(n===""||n===!0)||(i+=`-${n}`),i.toLowerCase()}}const Oc=["auto","start","end","center","baseline","stretch"],_c=$({cols:{type:[Boolean,String,Number],default:!1},...vr,offset:{type:[String,Number],default:null},...mr,order:{type:[String,Number],default:null},...gr,alignSelf:{type:String,default:null,validator:e=>Oc.includes(e)},...se(),...we()},"VCol"),ue=G()({name:"VCol",props:_c(),setup(e,t){let{slots:n}=t;const i=k(()=>{const s=[];let a;for(a in Ys)Ys[a].forEach(o=>{const c=e[o],l=Ac(a,o,c);l&&s.push(l)});const r=s.some(o=>o.startsWith("v-col-"));return s.push({"v-col":!r||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),s});return()=>{var s;return $t(e.tag,{class:[i.value,e.class],style:e.style},(s=n.default)==null?void 0:s.call(n))}}}),vs=["start","end","center"],pr=["space-between","space-around","space-evenly"];function ms(e,t){return Un.reduce((n,i)=>{const s=e+zn(i);return n[s]=t(),n},{})}const Lc=[...vs,"baseline","stretch"],yr=e=>Lc.includes(e),br=ms("align",()=>({type:String,default:null,validator:yr})),Vc=[...vs,...pr],Sr=e=>Vc.includes(e),wr=ms("justify",()=>({type:String,default:null,validator:Sr})),Dc=[...vs,...pr,"stretch"],Cr=e=>Dc.includes(e),kr=ms("alignContent",()=>({type:String,default:null,validator:Cr})),Js={align:Object.keys(br),justify:Object.keys(wr),alignContent:Object.keys(kr)},Bc={align:"align",justify:"justify",alignContent:"align-content"};function Mc(e,t,n){let i=Bc[e];if(n!=null){if(t){const s=t.replace(e,"");i+=`-${s}`}return i+=`-${n}`,i.toLowerCase()}}const Nc=$({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:yr},...br,justify:{type:String,default:null,validator:Sr},...wr,alignContent:{type:String,default:null,validator:Cr},...kr,...se(),...we()},"VRow"),Vt=G()({name:"VRow",props:Nc(),setup(e,t){let{slots:n}=t;const i=k(()=>{const s=[];let a;for(a in Js)Js[a].forEach(r=>{const o=e[r],c=Mc(a,r,o);c&&s.push(c)});return s.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),s});return()=>{var s;return $t(e.tag,{class:["v-row",i.value,e.class],style:e.style},(s=n.default)==null?void 0:s.call(n))}}}),xe=is("v-spacer","div","VSpacer"),Ic={props:["projectName"],data:()=>({steps:0,step:0,message:""}),mounted(){const e=new WebSocket(`ws://${window.location.host}/ws/realign`),t=this;e.addEventListener("message",n=>{console.log("Message from server ",n.data);const i=JSON.parse(n.data);if(!i.ping&&(t.step=i.step,t.steps=i.steps,t.message=i.message,t.steps!==0&&t.step===t.steps)){console.log("closing websocket"),e.close();const s={realignment_ready:!0};ve.patch(`/karaoke/${this.projectName}`,s).then(a=>{this.$emit("words-realigned")})}}),e.addEventListener("open",n=>{console.log("websocket open"),ve.post(`/karaoke/${this.projectName}/_realign`)})}};function $c(e,t,n,i,s,a){return K(),Q(ct,{class:"py-4",color:"surface-variant","prepend-icon":"mdi-rocket-launch-outline",rounded:"lg",variant:"tonal"},{title:I(()=>t[1]||(t[1]=[oe("h2",{class:"text-h5 font-weight-bold"}," Ralignement des mots en cours... ",-1)])),text:I(()=>[oe("div",null,Ke(e.message),1),m(ds,{modelValue:e.step,"onUpdate:modelValue":t[0]||(t[0]=r=>e.step=r),max:e.steps},null,8,["modelValue","max"])]),actions:I(()=>[m(xe),m(xe)]),_:1})}const xr=ze(Ic,[["render",$c]]);function Ee(e,t,n,i){return new(n||(n=Promise))(function(s,a){function r(l){try{c(i.next(l))}catch(u){a(u)}}function o(l){try{c(i.throw(l))}catch(u){a(u)}}function c(l){var u;l.done?s(l.value):(u=l.value,u instanceof n?u:new n(function(d){d(u)})).then(r,o)}c((i=i.apply(e,t||[])).next())})}let vn=class{constructor(){this.listeners={}}on(t,n,i){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),i==null?void 0:i.once){const s=()=>{this.un(t,s),this.un(t,n)};return this.on(t,s),s}return()=>this.un(t,n)}un(t,n){var i;(i=this.listeners[t])===null||i===void 0||i.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(i=>i(...n))}};const pn={decode:function(e,t){return Ee(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})},createBuffer:function(e,t){return typeof e[0]=="number"&&(e=[e]),function(n){const i=n[0];if(i.some(s=>s>1||s<-1)){const s=i.length;let a=0;for(let r=0;r<s;r++){const o=Math.abs(i[r]);o>a&&(a=o)}for(const r of n)for(let o=0;o<s;o++)r[o]/=a}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function Er(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[i,s]of Object.entries(t))if(i==="children")for(const[a,r]of Object.entries(t))typeof r=="string"?n.appendChild(document.createTextNode(r)):n.appendChild(Er(a,r));else i==="style"?Object.assign(n.style,s):i==="textContent"?n.textContent=s:n.setAttribute(i,s.toString());return n}function Qs(e,t,n){const i=Er(e,t||{});return n==null||n.appendChild(i),i}var jc=Object.freeze({__proto__:null,createElement:Qs,default:Qs});const Fc={fetchBlob:function(e,t,n){return Ee(this,void 0,void 0,function*(){const i=yield fetch(e,n);if(i.status>=400)throw new Error(`Failed to fetch ${e}: ${i.status} (${i.statusText})`);return function(s,a){Ee(this,void 0,void 0,function*(){if(!s.body||!s.headers)return;const r=s.body.getReader(),o=Number(s.headers.get("Content-Length"))||0;let c=0;const l=d=>Ee(this,void 0,void 0,function*(){c+=(d==null?void 0:d.length)||0;const f=Math.round(c/o*100);a(f)}),u=()=>Ee(this,void 0,void 0,function*(){let d;try{d=yield r.read()}catch{return}d.done||(l(d.value),yield u())});u()})}(i.clone(),t),i.blob()})}};let Wc=class extends vn{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)},{once:!0})}onMediaEvent(t,n,i){return this.media.addEventListener(t,n,i),()=>this.media.removeEventListener(t,n,i)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,n){const i=this.getSrc();if(t&&i===t)return;this.revokeSrc();const s=n instanceof Blob&&(this.canPlayType(n.type)||!t)?URL.createObjectURL(n):t;i&&(this.media.src="");try{this.media.src=s}catch{this.media.src=t}}destroy(){this.isExternalMedia||(this.media.pause(),this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return Ee(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=Math.max(0,Math.min(t,this.getDuration()))}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}},Ni=class Ii extends vn{constructor(t,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.subscriptions=[],this.options=t;const i=this.parentFromOptionsContainer(t.container);this.parent=i;const[s,a]=this.initHtml();i.appendChild(s),this.container=s,this.scrollContainer=a.querySelector(".scroll"),this.wrapper=a.querySelector(".wrapper"),this.canvasWrapper=a.querySelector(".canvases"),this.progressWrapper=a.querySelector(".progress"),this.cursor=a.querySelector(".cursor"),n&&a.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=n=>{const i=this.wrapper.getBoundingClientRect(),s=n.clientX-i.left,a=n.clientY-i.top;return[s/i.width,a/i.height]};if(this.wrapper.addEventListener("click",n=>{const[i,s]=t(n);this.emit("click",i,s)}),this.wrapper.addEventListener("dblclick",n=>{const[i,s]=t(n);this.emit("dblclick",i,s)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:n,scrollWidth:i,clientWidth:s}=this.scrollContainer,a=n/i,r=(n+s)/i;this.emit("scroll",a,r,n,n+s)}),typeof ResizeObserver=="function"){const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push(function(t,n,i,s,a=3,r=0,o=100){if(!t)return()=>{};const c=matchMedia("(pointer: coarse)").matches;let l=()=>{};const u=d=>{if(d.button!==r)return;d.preventDefault(),d.stopPropagation();let f=d.clientX,v=d.clientY,h=!1;const p=Date.now(),g=S=>{if(S.preventDefault(),S.stopPropagation(),c&&Date.now()-p<o)return;const R=S.clientX,x=S.clientY,E=R-f,O=x-v;if(h||Math.abs(E)>a||Math.abs(O)>a){const B=t.getBoundingClientRect(),{left:_,top:P}=B;h||(i==null||i(f-_,v-P),h=!0),n(E,O,R-_,x-P),f=R,v=x}},y=S=>{if(h){const R=S.clientX,x=S.clientY,E=t.getBoundingClientRect(),{left:O,top:B}=E;s==null||s(R-O,x-B)}l()},b=S=>{S.relatedTarget&&S.relatedTarget!==document.documentElement||y(S)},w=S=>{h&&(S.stopPropagation(),S.preventDefault())},C=S=>{h&&S.preventDefault()};document.addEventListener("pointermove",g),document.addEventListener("pointerup",y),document.addEventListener("pointerout",b),document.addEventListener("pointercancel",b),document.addEventListener("touchmove",C,{passive:!1}),document.addEventListener("click",w,{capture:!0}),l=()=>{document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",y),document.removeEventListener("pointerout",b),document.removeEventListener("pointercancel",b),document.removeEventListener("touchmove",C),setTimeout(()=>{document.removeEventListener("click",w,{capture:!0})},10)}};return t.addEventListener("pointerdown",u),()=>{l(),t.removeEventListener("pointerdown",u)}}(this.wrapper,(t,n,i)=>{this.emit("drag",Math.max(0,Math.min(1,i/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}))}getHeight(t,n){var i;const s=((i=this.audioData)===null||i===void 0?void 0:i.numberOfChannels)||1;if(t==null)return 128;if(!isNaN(Number(t)))return Number(t);if(t==="auto"){const a=this.parent.clientHeight||128;return n!=null&&n.every(r=>!r.overlay)?a/s:a}return 128}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"}),i=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return n.innerHTML=`
      <style${i?` nonce="${i}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:n}=this.scrollContainer,i=n*t;this.setScroll(i)}destroy(){var t,n;this.subscriptions.forEach(i=>i()),this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(n=this.unsubscribeOnScroll)===null||n===void 0||n.forEach(i=>i()),this.unsubscribeOnScroll=[]}createDelay(t=10){let n,i;const s=()=>{n&&clearTimeout(n),i&&i()};return this.timeouts.push(s),()=>new Promise((a,r)=>{s(),i=r,n=setTimeout(()=>{n=void 0,i=void 0,a()},t)})}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),i=n.getContext("2d"),s=n.height*(window.devicePixelRatio||1),a=i.createLinearGradient(0,0,0,s),r=1/(t.length-1);return t.forEach((o,c)=>{const l=c*r;a.addColorStop(l,o)}),a}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(t,n,i,s){const a=t[0],r=t[1]||t[0],o=a.length,{width:c,height:l}=i.canvas,u=l/2,d=this.getPixelRatio(),f=n.barWidth?n.barWidth*d:1,v=n.barGap?n.barGap*d:n.barWidth?f/2:0,h=n.barRadius||0,p=c/(f+v)/o,g=h&&"roundRect"in i?"roundRect":"rect";i.beginPath();let y=0,b=0,w=0;for(let C=0;C<=o;C++){const S=Math.round(C*p);if(S>y){const E=Math.round(b*u*s),O=E+Math.round(w*u*s)||1;let B=u-E;n.barAlign==="top"?B=0:n.barAlign==="bottom"&&(B=l-O),i[g](y*(f+v),B,f,O,h),y=S,b=0,w=0}const R=Math.abs(a[C]||0),x=Math.abs(r[C]||0);R>b&&(b=R),x>w&&(w=x)}i.fill(),i.closePath()}renderLineWaveform(t,n,i,s){const a=r=>{const o=t[r]||t[0],c=o.length,{height:l}=i.canvas,u=l/2,d=i.canvas.width/c;i.moveTo(0,u);let f=0,v=0;for(let h=0;h<=c;h++){const p=Math.round(h*d);if(p>f){const y=u+(Math.round(v*u*s)||1)*(r===0?-1:1);i.lineTo(f,y),f=p,v=0}const g=Math.abs(o[h]||0);g>v&&(v=g)}i.lineTo(f,u)};i.beginPath(),a(0),a(1),i.fill(),i.closePath()}renderWaveform(t,n,i){if(i.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction)return void n.renderFunction(t,i);let s=n.barHeight||1;if(n.normalize){const a=Array.from(t[0]).reduce((r,o)=>Math.max(r,Math.abs(o)),0);s=a?1/a:1}n.barWidth||n.barGap||n.barAlign?this.renderBarWaveform(t,n,i,s):this.renderLineWaveform(t,n,i,s)}renderSingleCanvas(t,n,i,s,a,r,o){const c=this.getPixelRatio(),l=document.createElement("canvas");l.width=Math.round(i*c),l.height=Math.round(s*c),l.style.width=`${i}px`,l.style.height=`${s}px`,l.style.left=`${Math.round(a)}px`,r.appendChild(l);const u=l.getContext("2d");if(this.renderWaveform(t,n,u),l.width>0&&l.height>0){const d=l.cloneNode(),f=d.getContext("2d");f.drawImage(l,0,0),f.globalCompositeOperation="source-in",f.fillStyle=this.convertColorValues(n.progressColor),f.fillRect(0,0,l.width,l.height),o.appendChild(d)}}renderMultiCanvas(t,n,i,s,a,r){const o=this.getPixelRatio(),{clientWidth:c}=this.scrollContainer,l=i/o;let u=Math.min(Ii.MAX_CANVAS_WIDTH,c,l),d={};if(u===0)return;if(n.barWidth||n.barGap){const g=n.barWidth||.5,y=g+(n.barGap||g/2);u%y!=0&&(u=Math.floor(u/y)*y)}const f=g=>{if(g<0||g>=v||d[g])return;d[g]=!0;const y=g*u,b=Math.min(l-y,u);if(b<=0)return;const w=t.map(C=>{const S=Math.floor(y/l*C.length),R=Math.floor((y+b)/l*C.length);return C.slice(S,R)});this.renderSingleCanvas(w,n,b,s,y,a,r)},v=Math.ceil(l/u);if(!this.isScrollable){for(let g=0;g<v;g++)f(g);return}const h=this.scrollContainer.scrollLeft/l,p=Math.floor(h*v);if(f(p-1),f(p),f(p+1),v>1){const g=this.on("scroll",()=>{const{scrollLeft:y}=this.scrollContainer,b=Math.floor(y/l*v);Object.keys(d).length>Ii.MAX_NODES&&(a.innerHTML="",r.innerHTML="",d={}),f(b-1),f(b),f(b+1)});this.unsubscribeOnScroll.push(g)}}renderChannel(t,n,i,s){var{overlay:a}=n,r=function(u,d){var f={};for(var v in u)Object.prototype.hasOwnProperty.call(u,v)&&d.indexOf(v)<0&&(f[v]=u[v]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function"){var h=0;for(v=Object.getOwnPropertySymbols(u);h<v.length;h++)d.indexOf(v[h])<0&&Object.prototype.propertyIsEnumerable.call(u,v[h])&&(f[v[h]]=u[v[h]])}return f}(n,["overlay"]);const o=document.createElement("div"),c=this.getHeight(r.height,r.splitChannels);o.style.height=`${c}px`,a&&s>0&&(o.style.marginTop=`-${c}px`),this.canvasWrapper.style.minHeight=`${c}px`,this.canvasWrapper.appendChild(o);const l=o.cloneNode();this.progressWrapper.appendChild(l),this.renderMultiCanvas(t,r,i,c,o,l)}render(t){return Ee(this,void 0,void 0,function*(){var n;this.timeouts.forEach(c=>c()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const i=this.getPixelRatio(),s=this.scrollContainer.clientWidth,a=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=a>s;const r=this.options.fillParent&&!this.isScrollable,o=(r?s:a)*i;if(this.wrapper.style.width=r?"100%":`${a}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render"),this.options.splitChannels)for(let c=0;c<t.numberOfChannels;c++){const l=Object.assign(Object.assign({},this.options),(n=this.options.splitChannels)===null||n===void 0?void 0:n[c]);this.renderChannel([t.getChannelData(c)],l,o,c)}else{const c=[t.getChannelData(0)];t.numberOfChannels>1&&c.push(t.getChannelData(1)),this.renderChannel(c,this.options,o,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){if(this.unsubscribeOnScroll.forEach(i=>i()),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:t}=this.scrollContainer,{right:n}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&t!==this.scrollContainer.scrollWidth){const{right:i}=this.progressWrapper.getBoundingClientRect();let s=i-n;s*=2,s=s<0?Math.floor(s):Math.ceil(s),s/=2,this.scrollContainer.scrollLeft+=s}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{scrollLeft:i,scrollWidth:s,clientWidth:a}=this.scrollContainer,r=t*s,o=i,c=i+a,l=a/2;if(this.isDragging)r+30>c?this.scrollContainer.scrollLeft+=30:r-30<o&&(this.scrollContainer.scrollLeft-=30);else{(r<o||r>c)&&(this.scrollContainer.scrollLeft=r-(this.options.autoCenter?l:0));const u=r-i-l;n&&this.options.autoCenter&&u>0&&(this.scrollContainer.scrollLeft+=Math.min(u,10))}{const u=this.scrollContainer.scrollLeft,d=u/s,f=(u+a)/s;this.emit("scroll",d,f,u,u+a)}}renderProgress(t,n){if(isNaN(t))return;const i=100*t;this.canvasWrapper.style.clipPath=`polygon(${i}% 0, 100% 0, 100% 100%, ${i}% 100%)`,this.progressWrapper.style.width=`${i}%`,this.cursor.style.left=`${i}%`,this.cursor.style.transform=`translateX(-${Math.round(i)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,n)}exportImage(t,n,i){return Ee(this,void 0,void 0,function*(){const s=this.canvasWrapper.querySelectorAll("canvas");if(!s.length)throw new Error("No waveform data");if(i==="dataURL"){const a=Array.from(s).map(r=>r.toDataURL(t,n));return Promise.resolve(a)}return Promise.all(Array.from(s).map(a=>new Promise((r,o)=>{a.toBlob(c=>{c?r(c):o(new Error("Could not export image"))},t,n)})))})}};Ni.MAX_CANVAS_WIDTH=8e3,Ni.MAX_NODES=10;let zc=class extends vn{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}},fi=class extends vn{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return Ee(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then(n=>{if(n.status>=400)throw new Error(`Failed to fetch ${t}: ${n.status} (${n.statusText})`);return n.arrayBuffer()}).then(n=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(n)).then(n=>{this.currentSrc===t&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var t;if(!this.paused)return;this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let n=this.playedDuration*this._playbackRate;(n>=this.duration||n<0)&&(n=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,n),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return Ee(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){const n=t-this.currentTime,i=this.bufferNode;i==null||i.stop(this.audioContext.currentTime+n),i==null||i.addEventListener("ended",()=>{i===this.bufferNode&&(this.bufferNode=null,this.pause())},{once:!0})}setSinkId(t){return Ee(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const n=!this.paused;n&&this._pause(),this.playedDuration=t/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,n;return(t=this._duration)!==null&&t!==void 0?t:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const n=this.buffer.numberOfChannels;for(let i=0;i<n;i++)t.push(this.buffer.getChannelData(i));return t}};const Hc={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};let nn=class Rr extends Wc{static create(t){return new Rr(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new fi:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.stopAtPosition=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},Hc,t),this.timer=new zc;const i=n?void 0:this.getMediaElement();this.renderer=new Ni(this.options,i),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const s=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:a,duration:r}=this.options;(s||a&&r)&&this.load(s,a,r).catch(()=>null)})}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t),this.stopAtPosition!=null&&this.isPlaying()&&t>=this.stopAtPosition&&this.pause()}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.updateProgress();this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop(),this.stopAtPosition=null}),this.onMediaEvent("emptied",()=>{this.timer.stop(),this.stopAtPosition=null}),this.onMediaEvent("ended",()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish"),this.stopAtPosition=null}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",()=>{var t;this.emit("error",(t=this.getMediaElement().error)!==null&&t!==void 0?t:new Error("Media error")),this.stopAtPosition=null}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n,i,s)=>{const a=this.getDuration();this.emit("scroll",t*a,n*a,i,s)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",t=>{this.emit("dragstart",t)}),this.renderer.on("dragend",t=>{this.emit("dragend",t)}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{if(!this.options.interact)return;let i;this.renderer.renderProgress(n),clearTimeout(t),this.isPlaying()?i=0:this.options.dragToSeek===!0?i=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(i=this.options.dragToSeek.debounceTime),t=setTimeout(()=>{this.seekTo(n)},i),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),t.duration&&!t.peaks&&(this.decodedData=pn.createBuffer(this.exportPeaks(),t.duration)),t.peaks&&t.duration&&(this.decodedData=pn.createBuffer(t.peaks,t.duration)),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t._init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const n=t/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(t,n,i,s){return Ee(this,void 0,void 0,function*(){var a;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,this.stopAtPosition=null,!n&&!i){const o=this.options.fetchParams||{};window.AbortController&&!o.signal&&(this.abortController=new AbortController,o.signal=(a=this.abortController)===null||a===void 0?void 0:a.signal);const c=u=>this.emit("loading",u);n=yield Fc.fetchBlob(t,c,o);const l=this.options.blobMimeType;l&&(n=new Blob([n],{type:l}))}this.setSrc(t,n);const r=yield new Promise(o=>{const c=s||this.getDuration();c?o(c):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>o(this.getDuration()),{once:!0}))});if(!t&&!n){const o=this.getMediaElement();o instanceof fi&&(o.duration=r)}if(i)this.decodedData=pn.createBuffer(i,r||0);else if(n){const o=yield n.arrayBuffer();this.decodedData=yield pn.decode(o,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(t,n,i){return Ee(this,void 0,void 0,function*(){try{return yield this.loadAudio(t,void 0,n,i)}catch(s){throw this.emit("error",s),s}})}loadBlob(t,n,i){return Ee(this,void 0,void 0,function*(){try{return yield this.loadAudio("",t,n,i)}catch(s){throw this.emit("error",s),s}})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:i=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const s=Math.min(t,this.decodedData.numberOfChannels),a=[];for(let r=0;r<s;r++){const o=this.decodedData.getChannelData(r),c=[],l=o.length/n;for(let u=0;u<n;u++){const d=o.slice(Math.floor(u*l),Math.ceil((u+1)*l));let f=0;for(let v=0;v<d.length;v++){const h=d[v];Math.abs(h)>Math.abs(f)&&(f=h)}c.push(Math.round(f*i)/i)}a.push(c)}return a}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){this.stopAtPosition=null,super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}play(t,n){const i=Object.create(null,{play:{get:()=>super.play}});return Ee(this,void 0,void 0,function*(){t!=null&&this.setTime(t);const s=yield i.play.call(this);return n!=null&&(this.media instanceof fi?this.media.stopAt(n):this.stopAtPosition=n),s})}playPause(){return Ee(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return Ee(this,arguments,void 0,function*(t="image/png",n=1,i="dataURL"){return this.renderer.exportImage(t,n,i)})}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach(n=>n.destroy()),this.subscriptions.forEach(n=>n()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}};nn.BasePlugin=class extends vn{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}_init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}},nn.dom=jc;let Pr=class{constructor(){this.listeners={}}on(t,n,i){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),i==null?void 0:i.once){const s=()=>{this.un(t,s),this.un(t,n)};return this.on(t,s),s}return()=>this.un(t,n)}un(t,n){var i;(i=this.listeners[t])===null||i===void 0||i.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(i=>i(...n))}},Uc=class extends Pr{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}_init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}};function Tn(e,t,n,i,s=3,a=0,r=100){if(!e)return()=>{};const o=matchMedia("(pointer: coarse)").matches;let c=()=>{};const l=u=>{if(u.button!==a)return;u.preventDefault(),u.stopPropagation();let d=u.clientX,f=u.clientY,v=!1;const h=Date.now(),p=C=>{if(C.preventDefault(),C.stopPropagation(),o&&Date.now()-h<r)return;const S=C.clientX,R=C.clientY,x=S-d,E=R-f;if(v||Math.abs(x)>s||Math.abs(E)>s){const O=e.getBoundingClientRect(),{left:B,top:_}=O;v||(n==null||n(d-B,f-_),v=!0),t(x,E,S-B,R-_),d=S,f=R}},g=C=>{if(v){const S=C.clientX,R=C.clientY,x=e.getBoundingClientRect(),{left:E,top:O}=x;i==null||i(S-E,R-O)}c()},y=C=>{C.relatedTarget&&C.relatedTarget!==document.documentElement||g(C)},b=C=>{v&&(C.stopPropagation(),C.preventDefault())},w=C=>{v&&C.preventDefault()};document.addEventListener("pointermove",p),document.addEventListener("pointerup",g),document.addEventListener("pointerout",y),document.addEventListener("pointercancel",y),document.addEventListener("touchmove",w,{passive:!1}),document.addEventListener("click",b,{capture:!0}),c=()=>{document.removeEventListener("pointermove",p),document.removeEventListener("pointerup",g),document.removeEventListener("pointerout",y),document.removeEventListener("pointercancel",y),document.removeEventListener("touchmove",w),setTimeout(()=>{document.removeEventListener("click",b,{capture:!0})},10)}};return e.addEventListener("pointerdown",l),()=>{c(),e.removeEventListener("pointerdown",l)}}function Tr(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[i,s]of Object.entries(t))if(i==="children")for(const[a,r]of Object.entries(t))typeof r=="string"?n.appendChild(document.createTextNode(r)):n.appendChild(Tr(a,r));else i==="style"?Object.assign(n.style,s):i==="textContent"?n.textContent=s:n.setAttribute(i,s.toString());return n}function Yt(e,t,n){const i=Tr(e,t||{});return n==null||n.appendChild(i),i}let Zs=class extends Pr{constructor(t,n,i=0){var s,a,r,o,c,l,u,d,f,v;super(),this.totalDuration=n,this.numberOfChannels=i,this.minLength=0,this.maxLength=1/0,this.contentEditable=!1,this.subscriptions=[],this.subscriptions=[],this.id=t.id||`region-${Math.random().toString(32).slice(2)}`,this.start=this.clampPosition(t.start),this.end=this.clampPosition((s=t.end)!==null&&s!==void 0?s:t.start),this.drag=(a=t.drag)===null||a===void 0||a,this.resize=(r=t.resize)===null||r===void 0||r,this.resizeStart=(o=t.resizeStart)===null||o===void 0||o,this.resizeEnd=(c=t.resizeEnd)===null||c===void 0||c,this.color=(l=t.color)!==null&&l!==void 0?l:"rgba(0, 0, 0, 0.1)",this.minLength=(u=t.minLength)!==null&&u!==void 0?u:this.minLength,this.maxLength=(d=t.maxLength)!==null&&d!==void 0?d:this.maxLength,this.channelIdx=(f=t.channelIdx)!==null&&f!==void 0?f:-1,this.contentEditable=(v=t.contentEditable)!==null&&v!==void 0?v:this.contentEditable,this.element=this.initElement(),this.setContent(t.content),this.setPart(),this.renderPosition(),this.initMouseEvents()}clampPosition(t){return Math.max(0,Math.min(this.totalDuration,t))}setPart(){const t=this.start===this.end;this.element.setAttribute("part",`${t?"marker":"region"} ${this.id}`)}addResizeHandles(t){const n={position:"absolute",zIndex:"2",width:"6px",height:"100%",top:"0",cursor:"ew-resize",wordBreak:"keep-all"},i=Yt("div",{part:"region-handle region-handle-left",style:Object.assign(Object.assign({},n),{left:"0",borderLeft:"2px solid rgba(0, 0, 0, 0.5)",borderRadius:"2px 0 0 2px"})},t),s=Yt("div",{part:"region-handle region-handle-right",style:Object.assign(Object.assign({},n),{right:"0",borderRight:"2px solid rgba(0, 0, 0, 0.5)",borderRadius:"0 2px 2px 0"})},t);this.subscriptions.push(Tn(i,a=>this.onResize(a,"start"),()=>null,()=>this.onEndResizing(),1),Tn(s,a=>this.onResize(a,"end"),()=>null,()=>this.onEndResizing(),1))}removeResizeHandles(t){const n=t.querySelector('[part*="region-handle-left"]'),i=t.querySelector('[part*="region-handle-right"]');n&&t.removeChild(n),i&&t.removeChild(i)}initElement(){const t=this.start===this.end;let n=0,i=100;this.channelIdx>=0&&this.channelIdx<this.numberOfChannels&&(i=100/this.numberOfChannels,n=i*this.channelIdx);const s=Yt("div",{style:{position:"absolute",top:`${n}%`,height:`${i}%`,backgroundColor:t?"none":this.color,borderLeft:t?"2px solid "+this.color:"none",borderRadius:"2px",boxSizing:"border-box",transition:"background-color 0.2s ease",cursor:this.drag?"grab":"default",pointerEvents:"all"}});return!t&&this.resize&&this.addResizeHandles(s),s}renderPosition(){const t=this.start/this.totalDuration,n=(this.totalDuration-this.end)/this.totalDuration;this.element.style.left=100*t+"%",this.element.style.right=100*n+"%"}toggleCursor(t){var n;this.drag&&(!((n=this.element)===null||n===void 0)&&n.style)&&(this.element.style.cursor=t?"grabbing":"grab")}initMouseEvents(){const{element:t}=this;t&&(t.addEventListener("click",n=>this.emit("click",n)),t.addEventListener("mouseenter",n=>this.emit("over",n)),t.addEventListener("mouseleave",n=>this.emit("leave",n)),t.addEventListener("dblclick",n=>this.emit("dblclick",n)),t.addEventListener("pointerdown",()=>this.toggleCursor(!0)),t.addEventListener("pointerup",()=>this.toggleCursor(!1)),this.subscriptions.push(Tn(t,n=>this.onMove(n),()=>this.toggleCursor(!0),()=>{this.toggleCursor(!1),this.drag&&this.emit("update-end")})),this.contentEditable&&this.content&&(this.content.addEventListener("click",n=>this.onContentClick(n)),this.content.addEventListener("blur",()=>this.onContentBlur())))}_onUpdate(t,n){if(!this.element.parentElement)return;const{width:i}=this.element.parentElement.getBoundingClientRect(),s=t/i*this.totalDuration,a=n&&n!=="start"?this.start:this.start+s,r=n&&n!=="end"?this.end:this.end+s,o=r-a;a>=0&&r<=this.totalDuration&&a<=r&&o>=this.minLength&&o<=this.maxLength&&(this.start=a,this.end=r,this.renderPosition(),this.emit("update",n))}onMove(t){this.drag&&this._onUpdate(t)}onResize(t,n){this.resize&&(this.resizeStart||n!=="start")&&(this.resizeEnd||n!=="end")&&this._onUpdate(t,n)}onEndResizing(){this.resize&&this.emit("update-end")}onContentClick(t){t.stopPropagation(),t.target.focus(),this.emit("click",t)}onContentBlur(){this.emit("update-end")}_setTotalDuration(t){this.totalDuration=t,this.renderPosition()}play(t){this.emit("play",t&&this.end!==this.start?this.end:void 0)}setContent(t){var n;if((n=this.content)===null||n===void 0||n.remove(),t){if(typeof t=="string"){const i=this.start===this.end;this.content=Yt("div",{style:{padding:`0.2em ${i?.2:.4}em`,display:"inline-block"},textContent:t})}else this.content=t;this.contentEditable&&(this.content.contentEditable="true"),this.content.setAttribute("part","region-content"),this.element.appendChild(this.content)}else this.content=void 0}setOptions(t){var n,i;if(t.color&&(this.color=t.color,this.element.style.backgroundColor=this.color),t.drag!==void 0&&(this.drag=t.drag,this.element.style.cursor=this.drag?"grab":"default"),t.start!==void 0||t.end!==void 0){const s=this.start===this.end;this.start=this.clampPosition((n=t.start)!==null&&n!==void 0?n:this.start),this.end=this.clampPosition((i=t.end)!==null&&i!==void 0?i:s?this.start:this.end),this.renderPosition(),this.setPart()}if(t.content&&this.setContent(t.content),t.id&&(this.id=t.id,this.setPart()),t.resize!==void 0&&t.resize!==this.resize){const s=this.start===this.end;this.resize=t.resize,this.resize&&!s?this.addResizeHandles(this.element):this.removeResizeHandles(this.element)}t.resizeStart!==void 0&&(this.resizeStart=t.resizeStart),t.resizeEnd!==void 0&&(this.resizeEnd=t.resizeEnd)}remove(){this.emit("remove"),this.subscriptions.forEach(t=>t()),this.element.remove(),this.element=null}},Ar=class Or extends Uc{constructor(t){super(t),this.regions=[],this.regionsContainer=this.initRegionsContainer()}static create(t){return new Or(t)}onInit(){if(!this.wavesurfer)throw Error("WaveSurfer is not initialized");this.wavesurfer.getWrapper().appendChild(this.regionsContainer);let t=[];this.subscriptions.push(this.wavesurfer.on("timeupdate",n=>{const i=this.regions.filter(s=>s.start<=n&&(s.end===s.start?s.start+.05:s.end)>=n);i.forEach(s=>{t.includes(s)||this.emit("region-in",s)}),t.forEach(s=>{i.includes(s)||this.emit("region-out",s)}),t=i}))}initRegionsContainer(){return Yt("div",{style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",zIndex:"5",pointerEvents:"none"}})}getRegions(){return this.regions}avoidOverlapping(t){t.content&&setTimeout(()=>{const n=t.content,i=n.getBoundingClientRect(),s=this.regions.map(a=>{if(a===t||!a.content)return 0;const r=a.content.getBoundingClientRect();return i.left<r.left+r.width&&r.left<i.left+i.width?r.height:0}).reduce((a,r)=>a+r,0);n.style.marginTop=`${s}px`},10)}adjustScroll(t){var n,i;const s=(i=(n=this.wavesurfer)===null||n===void 0?void 0:n.getWrapper())===null||i===void 0?void 0:i.parentElement;if(!s)return;const{clientWidth:a,scrollWidth:r}=s;if(r<=a)return;const o=s.getBoundingClientRect(),c=t.element.getBoundingClientRect(),l=c.left-o.left,u=c.right-o.left;l<0?s.scrollLeft+=l:u>a&&(s.scrollLeft+=u-a)}virtualAppend(t,n,i){const s=()=>{if(!this.wavesurfer)return;const a=this.wavesurfer.getWidth(),r=this.wavesurfer.getScroll(),o=n.clientWidth,c=this.wavesurfer.getDuration(),l=Math.round(t.start/c*o),u=l+(Math.round((t.end-t.start)/c*o)||1)>r&&l<r+a;u&&!i.parentElement?n.appendChild(i):!u&&i.parentElement&&i.remove()};setTimeout(()=>{if(!this.wavesurfer)return;s();const a=this.wavesurfer.on("scroll",s);this.subscriptions.push(t.once("remove",a),a)},0)}saveRegion(t){this.virtualAppend(t,this.regionsContainer,t.element),this.avoidOverlapping(t),this.regions.push(t);const n=[t.on("update",i=>{i||this.adjustScroll(t),this.emit("region-update",t,i)}),t.on("update-end",()=>{this.avoidOverlapping(t),this.emit("region-updated",t)}),t.on("play",i=>{var s;(s=this.wavesurfer)===null||s===void 0||s.play(t.start,i)}),t.on("click",i=>{this.emit("region-clicked",t,i)}),t.on("dblclick",i=>{this.emit("region-double-clicked",t,i)}),t.once("remove",()=>{n.forEach(i=>i()),this.regions=this.regions.filter(i=>i!==t),this.emit("region-removed",t)})];this.subscriptions.push(...n),this.emit("region-created",t)}addRegion(t){var n,i;if(!this.wavesurfer)throw Error("WaveSurfer is not initialized");const s=this.wavesurfer.getDuration(),a=(i=(n=this.wavesurfer)===null||n===void 0?void 0:n.getDecodedData())===null||i===void 0?void 0:i.numberOfChannels,r=new Zs(t,s,a);return s?this.saveRegion(r):this.subscriptions.push(this.wavesurfer.once("ready",o=>{r._setTotalDuration(o),this.saveRegion(r)})),r}enableDragSelection(t,n=3){var i;const s=(i=this.wavesurfer)===null||i===void 0?void 0:i.getWrapper();if(!(s&&s instanceof HTMLElement))return()=>{};let a=null,r=0;return Tn(s,(o,c,l)=>{a&&a._onUpdate(o,l>r?"end":"start")},o=>{var c,l;if(r=o,!this.wavesurfer)return;const u=this.wavesurfer.getDuration(),d=(l=(c=this.wavesurfer)===null||c===void 0?void 0:c.getDecodedData())===null||l===void 0?void 0:l.numberOfChannels,{width:f}=this.wavesurfer.getWrapper().getBoundingClientRect(),v=o/f*u,h=(o+5)/f*u;a=new Zs(Object.assign(Object.assign({},t),{start:v,end:h}),u,d),this.regionsContainer.appendChild(a.element)},()=>{a&&(this.saveRegion(a),a=null)},n)}clearRegions(){this.regions.slice().forEach(t=>t.remove()),this.regions=[]}destroy(){this.clearRegions(),super.destroy(),this.regionsContainer.remove()}};const _r=$({baseColor:String,divided:Boolean,...Ot(),...se(),...Ze(),...qt(),...Je(),...we(),...Ae(),...St()},"VBtnGroup"),ea=G()({name:"VBtnGroup",props:_r(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=Ne(e),{densityClasses:s}=ut(e),{borderClasses:a}=_t(e),{elevationClasses:r}=Gt(e),{roundedClasses:o}=Qe(e);jt({VBtn:{height:"auto",baseColor:q(e,"baseColor"),color:q(e,"color"),density:q(e,"density"),flat:!0,variant:q(e,"variant")}}),ee(()=>m(e.tag,{class:["v-btn-group",{"v-btn-group--divided":e.divided},i.value,a.value,s.value,r.value,o.value,e.class],style:e.style},n))}}),gs=$({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),Lr=$({value:null,disabled:Boolean,selectedClass:String},"group-item");function Vr(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const i=We("useGroupItem");if(!i)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const s=yt();rt(Symbol.for(`${t.description}:id`),s);const a=Ye(t,null);if(!a){if(!n)return a;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${t.description}`)}const r=q(e,"value"),o=k(()=>!!(a.disabled.value||e.disabled));a.register({id:s,value:r,disabled:o},i),Xe(()=>{a.unregister(s)});const c=k(()=>a.isSelected(s)),l=k(()=>a.items.value[0].id===s),u=k(()=>a.items.value[a.items.value.length-1].id===s),d=k(()=>c.value&&[a.selectedClass.value,e.selectedClass]);return ie(c,f=>{i.emit("group:selected",{value:f})},{flush:"sync"}),{id:s,isSelected:c,isFirst:l,isLast:u,toggle:()=>a.select(s,!c.value),select:f=>a.select(s,f),selectedClass:d,value:r,disabled:o,group:a}}function ps(e,t){let n=!1;const i=Qt([]),s=pe(e,"modelValue",[],f=>f==null?[]:Dr(i,He(f)),f=>{const v=Gc(i,f);return e.multiple?v:v[0]}),a=We("useGroup");function r(f,v){const h=f,p=Symbol.for(`${t.description}:id`),y=Qo(p,a==null?void 0:a.vnode).indexOf(v);Jt(h.value)==null&&(h.value=y,h.useIndexAsValue=!0),y>-1?i.splice(y,0,h):i.push(h)}function o(f){if(n)return;c();const v=i.findIndex(h=>h.id===f);i.splice(v,1)}function c(){const f=i.find(v=>!v.disabled);f&&e.mandatory==="force"&&!s.value.length&&(s.value=[f.id])}bt(()=>{c()}),Xe(()=>{n=!0}),Jo(()=>{for(let f=0;f<i.length;f++)i[f].useIndexAsValue&&(i[f].value=f)});function l(f,v){const h=i.find(p=>p.id===f);if(!(v&&(h!=null&&h.disabled)))if(e.multiple){const p=s.value.slice(),g=p.findIndex(b=>b===f),y=~g;if(v=v??!y,y&&e.mandatory&&p.length<=1||!y&&e.max!=null&&p.length+1>e.max)return;g<0&&v?p.push(f):g>=0&&!v&&p.splice(g,1),s.value=p}else{const p=s.value.includes(f);if(e.mandatory&&p)return;s.value=v??!p?[f]:[]}}function u(f){if(e.multiple,s.value.length){const v=s.value[0],h=i.findIndex(y=>y.id===v);let p=(h+f)%i.length,g=i[p];for(;g.disabled&&p!==h;)p=(p+f)%i.length,g=i[p];if(g.disabled)return;s.value=[i[p].id]}else{const v=i.find(h=>!h.disabled);v&&(s.value=[v.id])}}const d={register:r,unregister:o,selected:s,select:l,disabled:q(e,"disabled"),prev:()=>u(i.length-1),next:()=>u(1),isSelected:f=>s.value.includes(f),selectedClass:k(()=>e.selectedClass),items:k(()=>i),getItemIndex:f=>qc(i,f)};return rt(t,d),d}function qc(e,t){const n=Dr(e,[t]);return n.length?e.findIndex(i=>i.id===n[0]):-1}function Dr(e,t){const n=[];return t.forEach(i=>{const s=e.find(r=>vt(i,r.value)),a=e[i];(s==null?void 0:s.value)!=null?n.push(s.id):a!=null&&n.push(a.id)}),n}function Gc(e,t){const n=[];return t.forEach(i=>{const s=e.findIndex(a=>a.id===i);if(~s){const a=e[s];n.push(a.value!=null?a.value:s)}}),n}const Br=Symbol.for("vuetify:v-btn-toggle"),Kc=$({..._r(),...gs()},"VBtnToggle");G()({name:"VBtnToggle",props:Kc(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isSelected:i,next:s,prev:a,select:r,selected:o}=ps(e,Br);return ee(()=>{const c=ea.filterProps(e);return m(ea,Z({class:["v-btn-toggle",e.class]},c,{style:e.style}),{default:()=>{var l;return[(l=n.default)==null?void 0:l.call(n,{isSelected:i,next:s,prev:a,select:r,selected:o})]}})}),{next:s,prev:a,select:r}}});const Xc=$({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...se(),...un(),...we({tag:"div"}),...Ae()},"VProgressCircular"),ys=G()({name:"VProgressCircular",props:Xc(),setup(e,t){let{slots:n}=t;const i=20,s=2*Math.PI*i,a=z(),{themeClasses:r}=Ne(e),{sizeClasses:o,sizeStyles:c}=cn(e),{textColorClasses:l,textColorStyles:u}=st(q(e,"color")),{textColorClasses:d,textColorStyles:f}=st(q(e,"bgColor")),{intersectionRef:v,isIntersecting:h}=ir(),{resizeRef:p,contentRect:g}=Bt(),y=k(()=>Math.max(0,Math.min(100,parseFloat(e.modelValue)))),b=k(()=>Number(e.width)),w=k(()=>c.value?Number(e.size):g.value?g.value.width:Math.max(b.value,32)),C=k(()=>i/(1-b.value/w.value)*2),S=k(()=>b.value/w.value*C.value),R=k(()=>ae((100-y.value)/100*s));return it(()=>{v.value=a.value,p.value=a.value}),ee(()=>m(e.tag,{ref:a,class:["v-progress-circular",{"v-progress-circular--indeterminate":!!e.indeterminate,"v-progress-circular--visible":h.value,"v-progress-circular--disable-shrink":e.indeterminate==="disable-shrink"},r.value,o.value,l.value,e.class],style:[c.value,u.value,e.style],role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.indeterminate?void 0:y.value},{default:()=>[m("svg",{style:{transform:`rotate(calc(-90deg + ${Number(e.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${C.value} ${C.value}`},[m("circle",{class:["v-progress-circular__underlay",d.value],style:f.value,fill:"transparent",cx:"50%",cy:"50%",r:i,"stroke-width":S.value,"stroke-dasharray":s,"stroke-dashoffset":0},null),m("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:i,"stroke-width":S.value,"stroke-dasharray":s,"stroke-dashoffset":R.value},null)]),n.default&&m("div",{class:"v-progress-circular__content"},[n.default({value:y.value})])]})),{}}});function Yc(e,t){ie(()=>{var n;return(n=e.isActive)==null?void 0:n.value},n=>{e.isLink.value&&n&&t&&Le(()=>{t(!0)})},{immediate:!0})}const Mr=$({active:{type:Boolean,default:void 0},activeColor:String,baseColor:String,symbol:{type:null,default:Br},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:ce,appendIcon:ce,block:Boolean,readonly:Boolean,slim:Boolean,stacked:Boolean,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},...Ot(),...se(),...Ze(),...lt(),...qt(),...Lr(),...hs(),...Zn(),...sr(),...Je(),...ni(),...un(),...we({tag:"button"}),...Ae(),...St({variant:"elevated"})},"VBtn"),be=G()({name:"VBtn",props:Mr(),emits:{"group:selected":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const{themeClasses:s}=Ne(e),{borderClasses:a}=_t(e),{densityClasses:r}=ut(e),{dimensionStyles:o}=ot(e),{elevationClasses:c}=Gt(e),{loaderClasses:l}=ei(e),{locationStyles:u}=cs(e),{positionClasses:d}=ar(e),{roundedClasses:f}=Qe(e),{sizeClasses:v,sizeStyles:h}=cn(e),p=Vr(e,e.symbol,!1),g=ti(e,n),y=k(()=>{var _;return e.active!==void 0?e.active:g.isLink.value?(_=g.isActive)==null?void 0:_.value:p==null?void 0:p.isSelected.value}),b=k(()=>y.value?e.activeColor??e.color:e.color),w=k(()=>{var P,A;return{color:(p==null?void 0:p.isSelected.value)&&(!g.isLink.value||((P=g.isActive)==null?void 0:P.value))||!p||((A=g.isActive)==null?void 0:A.value)?b.value??e.baseColor:e.baseColor,variant:e.variant}}),{colorClasses:C,colorStyles:S,variantClasses:R}=hn(w),x=k(()=>(p==null?void 0:p.disabled.value)||e.disabled),E=k(()=>e.variant==="elevated"&&!(e.disabled||e.flat||e.border)),O=k(()=>{if(!(e.value===void 0||typeof e.value=="symbol"))return Object(e.value)===e.value?JSON.stringify(e.value,null,0):e.value});function B(_){var P;x.value||g.isLink.value&&(_.metaKey||_.ctrlKey||_.shiftKey||_.button!==0||n.target==="_blank")||((P=g.navigate)==null||P.call(g,_),p==null||p.toggle())}return Yc(g,p==null?void 0:p.select),ee(()=>{const _=g.isLink.value?"a":e.tag,P=!!(e.prependIcon||i.prepend),A=!!(e.appendIcon||i.append),M=!!(e.icon&&e.icon!==!0);return Ve(m(_,Z({type:_==="a"?void 0:"button",class:["v-btn",p==null?void 0:p.selectedClass.value,{"v-btn--active":y.value,"v-btn--block":e.block,"v-btn--disabled":x.value,"v-btn--elevated":E.value,"v-btn--flat":e.flat,"v-btn--icon":!!e.icon,"v-btn--loading":e.loading,"v-btn--readonly":e.readonly,"v-btn--slim":e.slim,"v-btn--stacked":e.stacked},s.value,a.value,C.value,r.value,c.value,l.value,d.value,f.value,v.value,R.value,e.class],style:[S.value,o.value,u.value,h.value,e.style],"aria-busy":e.loading?!0:void 0,disabled:x.value||void 0,tabindex:e.loading||e.readonly?-1:void 0,onClick:B,value:O.value},g.linkProps),{default:()=>{var H;return[dn(!0,"v-btn"),!e.icon&&P&&m("span",{key:"prepend",class:"v-btn__prepend"},[i.prepend?m(ke,{key:"prepend-defaults",disabled:!e.prependIcon,defaults:{VIcon:{icon:e.prependIcon}}},i.prepend):m(Se,{key:"prepend-icon",icon:e.prependIcon},null)]),m("span",{class:"v-btn__content","data-no-activator":""},[!i.default&&M?m(Se,{key:"content-icon",icon:e.icon},null):m(ke,{key:"content-defaults",disabled:!M,defaults:{VIcon:{icon:e.icon}}},{default:()=>{var W;return[((W=i.default)==null?void 0:W.call(i))??Ke(e.text)]}})]),!e.icon&&A&&m("span",{key:"append",class:"v-btn__append"},[i.append?m(ke,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VIcon:{icon:e.appendIcon}}},i.append):m(Se,{key:"append-icon",icon:e.appendIcon},null)]),!!e.loading&&m("span",{key:"loader",class:"v-btn__loader"},[((H=i.loader)==null?void 0:H.call(i))??m(ys,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,width:"2"},null)])]}}),[[fn,!x.value&&e.ripple,"",{center:!!e.icon}]])}),{group:p}}}),Jc=$({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function Fe(e,t,n){return G()({name:e,props:Jc({mode:n,origin:t}),setup(i,s){let{slots:a}=s;const r={onBeforeEnter(o){i.origin&&(o.style.transformOrigin=i.origin)},onLeave(o){if(i.leaveAbsolute){const{offsetTop:c,offsetLeft:l,offsetWidth:u,offsetHeight:d}=o;o._transitionInitialStyles={position:o.style.position,top:o.style.top,left:o.style.left,width:o.style.width,height:o.style.height},o.style.position="absolute",o.style.top=`${c}px`,o.style.left=`${l}px`,o.style.width=`${u}px`,o.style.height=`${d}px`}i.hideOnLeave&&o.style.setProperty("display","none","important")},onAfterLeave(o){if(i.leaveAbsolute&&(o!=null&&o._transitionInitialStyles)){const{position:c,top:l,left:u,width:d,height:f}=o._transitionInitialStyles;delete o._transitionInitialStyles,o.style.position=c||"",o.style.top=l||"",o.style.left=u||"",o.style.width=d||"",o.style.height=f||""}}};return()=>{const o=i.group?Yi:Et;return $t(o,{name:i.disabled?"":e,css:!i.disabled,...i.group?void 0:{mode:i.mode},...i.disabled?{}:r},a.default)}}})}function Nr(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return G()({name:e,props:{mode:{type:String,default:n},disabled:Boolean,group:Boolean},setup(i,s){let{slots:a}=s;const r=i.group?Yi:Et;return()=>$t(r,{name:i.disabled?"":e,css:!i.disabled,...i.disabled?{}:t},a.default)}})}function Ir(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",i=wa(`offset-${n}`);return{onBeforeEnter(r){r._parent=r.parentNode,r._initialStyle={transition:r.style.transition,overflow:r.style.overflow,[n]:r.style[n]}},onEnter(r){const o=r._initialStyle;if(!o)return;r.style.setProperty("transition","none","important"),r.style.overflow="hidden";const c=`${r[i]}px`;r.style[n]="0",r.offsetHeight,r.style.transition=o.transition,e&&r._parent&&r._parent.classList.add(e),requestAnimationFrame(()=>{r.style[n]=c})},onAfterEnter:a,onEnterCancelled:a,onLeave(r){r._initialStyle={transition:"",overflow:r.style.overflow,[n]:r.style[n]},r.style.overflow="hidden",r.style[n]=`${r[i]}px`,r.offsetHeight,requestAnimationFrame(()=>r.style[n]="0")},onAfterLeave:s,onLeaveCancelled:s};function s(r){e&&r._parent&&r._parent.classList.remove(e),a(r)}function a(r){if(!r._initialStyle)return;const o=r._initialStyle[n];r.style.overflow=r._initialStyle.overflow,o!=null&&(r.style[n]=o),delete r._initialStyle}}const Qc=$({target:[Object,Array]},"v-dialog-transition"),$r=G()({name:"VDialogTransition",props:Qc(),setup(e,t){let{slots:n}=t;const i={onBeforeEnter(s){s.style.pointerEvents="none",s.style.visibility="hidden"},async onEnter(s,a){var f;await new Promise(v=>requestAnimationFrame(v)),await new Promise(v=>requestAnimationFrame(v)),s.style.visibility="";const{x:r,y:o,sx:c,sy:l,speed:u}=na(e.target,s),d=Lt(s,[{transform:`translate(${r}px, ${o}px) scale(${c}, ${l})`,opacity:0},{}],{duration:225*u,easing:Sl});(f=ta(s))==null||f.forEach(v=>{Lt(v,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*u,easing:Vn})}),d.finished.then(()=>a())},onAfterEnter(s){s.style.removeProperty("pointer-events")},onBeforeLeave(s){s.style.pointerEvents="none"},async onLeave(s,a){var f;await new Promise(v=>requestAnimationFrame(v));const{x:r,y:o,sx:c,sy:l,speed:u}=na(e.target,s);Lt(s,[{},{transform:`translate(${r}px, ${o}px) scale(${c}, ${l})`,opacity:0}],{duration:125*u,easing:wl}).finished.then(()=>a()),(f=ta(s))==null||f.forEach(v=>{Lt(v,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*u,easing:Vn})})},onAfterLeave(s){s.style.removeProperty("pointer-events")}};return()=>e.target?m(Et,Z({name:"dialog-transition"},i,{css:!1}),n):m(Et,{name:"dialog-transition"},n)}});function ta(e){var n;const t=(n=e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:n.children;return t&&[...t]}function na(e,t){const n=Pa(e),i=ns(t),[s,a]=getComputedStyle(t).transformOrigin.split(" ").map(y=>parseFloat(y)),[r,o]=getComputedStyle(t).getPropertyValue("--v-overlay-anchor-origin").split(" ");let c=n.left+n.width/2;r==="left"||o==="left"?c-=n.width/2:(r==="right"||o==="right")&&(c+=n.width/2);let l=n.top+n.height/2;r==="top"||o==="top"?l-=n.height/2:(r==="bottom"||o==="bottom")&&(l+=n.height/2);const u=n.width/i.width,d=n.height/i.height,f=Math.max(1,u,d),v=u/f||0,h=d/f||0,p=i.width*i.height/(window.innerWidth*window.innerHeight),g=p>.12?Math.min(1.5,(p-.12)*10+1):1;return{x:c-(s+i.left),y:l-(a+i.top),sx:v,sy:h,speed:g}}Fe("fab-transition","center center","out-in");Fe("dialog-bottom-transition");Fe("dialog-top-transition");const ia=Fe("fade-transition"),Zc=Fe("scale-transition");Fe("scroll-x-transition");Fe("scroll-x-reverse-transition");Fe("scroll-y-transition");Fe("scroll-y-reverse-transition");Fe("slide-x-transition");Fe("slide-x-reverse-transition");const jr=Fe("slide-y-transition");Fe("slide-y-reverse-transition");const ed=Nr("expand-transition",Ir()),Fr=Nr("expand-x-transition",Ir("",!0));function Wr(e){const{t}=Qi();function n(i){let{name:s,color:a}=i;const r={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[s],o=e[`onClick:${s}`];function c(u){u.key!=="Enter"&&u.key!==" "||(u.preventDefault(),u.stopPropagation(),Zi(o,new PointerEvent("click",u)))}const l=o&&r?t(`$vuetify.input.${r}`,e.label??""):void 0;return m(Se,{icon:e[`${s}Icon`],"aria-label":l,onClick:o,onKeydown:c,color:a},null)}return{InputIcon:n}}const td=$({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...se(),...Ut({transition:{component:jr,leaveAbsolute:!0,group:!0}})},"VMessages"),nd=G()({name:"VMessages",props:td(),setup(e,t){let{slots:n}=t;const i=k(()=>He(e.messages)),{textColorClasses:s,textColorStyles:a}=st(k(()=>e.color));return ee(()=>m(nt,{transition:e.transition,tag:"div",class:["v-messages",s.value,e.class],style:[a.value,e.style]},{default:()=>[e.active&&i.value.map((r,o)=>m("div",{class:"v-messages__message",key:`${o}-${i.value}`},[n.message?n.message({message:r}):r]))]})),{}}}),zr=$({focused:Boolean,"onUpdate:focused":Be()},"focus");function ii(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:at();const n=pe(e,"focused"),i=k(()=>({[`${t}--focused`]:n.value}));function s(){n.value=!0}function a(){n.value=!1}return{focusClasses:i,isFocused:n,focus:s,blur:a}}const id=Symbol.for("vuetify:form");function Hr(e){const t=Ye(id,null);return{...t,isReadonly:k(()=>!!((e==null?void 0:e.readonly)??(t==null?void 0:t.isReadonly.value))),isDisabled:k(()=>!!((e==null?void 0:e.disabled)??(t==null?void 0:t.isDisabled.value)))}}const sd=$({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...zr()},"validation");function ad(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:at(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:yt();const i=pe(e,"modelValue"),s=k(()=>e.validationValue===void 0?i.value:e.validationValue),a=Hr(e),r=z([]),o=te(!0),c=k(()=>!!(He(i.value===""?null:i.value).length||He(s.value===""?null:s.value).length)),l=k(()=>{var w;return(w=e.errorMessages)!=null&&w.length?He(e.errorMessages).concat(r.value).slice(0,Math.max(0,Number(e.maxErrors))):r.value}),u=k(()=>{var S;let w=(e.validateOn??((S=a.validateOn)==null?void 0:S.value))||"input";w==="lazy"&&(w="input lazy"),w==="eager"&&(w="input eager");const C=new Set((w==null?void 0:w.split(" "))??[]);return{input:C.has("input"),blur:C.has("blur")||C.has("input")||C.has("invalid-input"),invalidInput:C.has("invalid-input"),lazy:C.has("lazy"),eager:C.has("eager")}}),d=k(()=>{var w;return e.error||(w=e.errorMessages)!=null&&w.length?!1:e.rules.length?o.value?r.value.length||u.value.lazy?null:!0:!r.value.length:!0}),f=te(!1),v=k(()=>({[`${t}--error`]:d.value===!1,[`${t}--dirty`]:c.value,[`${t}--disabled`]:a.isDisabled.value,[`${t}--readonly`]:a.isReadonly.value})),h=We("validation"),p=k(()=>e.name??Jt(n));Hn(()=>{var w;(w=a.register)==null||w.call(a,{id:p.value,vm:h,validate:b,reset:g,resetValidation:y})}),Xe(()=>{var w;(w=a.unregister)==null||w.call(a,p.value)}),bt(async()=>{var w;u.value.lazy||await b(!u.value.eager),(w=a.update)==null||w.call(a,p.value,d.value,l.value)}),Rt(()=>u.value.input||u.value.invalidInput&&d.value===!1,()=>{ie(s,()=>{if(s.value!=null)b();else if(e.focused){const w=ie(()=>e.focused,C=>{C||b(),w()})}})}),Rt(()=>u.value.blur,()=>{ie(()=>e.focused,w=>{w||b()})}),ie([d,l],()=>{var w;(w=a.update)==null||w.call(a,p.value,d.value,l.value)});async function g(){i.value=null,await Le(),await y()}async function y(){o.value=!0,u.value.lazy?r.value=[]:await b(!u.value.eager)}async function b(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(e.disabled||e.readonly)return r.value=[],f.value=!1,r.value;const C=[];f.value=!0;for(const S of e.rules){if(C.length>=Number(e.maxErrors??1))break;const x=await(typeof S=="function"?S:()=>S)(s.value);if(x!==!0){if(x!==!1&&typeof x!="string"){console.warn(`${x} is not a valid value. Rule functions must return boolean true or a string.`);continue}C.push(x||"")}}return r.value=C,f.value=!1,o.value=w,r.value}return{errorMessages:l,isDirty:c,isDisabled:a.isDisabled,isReadonly:a.isReadonly,isPristine:o,isValid:d,isValidating:f,reset:g,resetValidation:y,validate:b,validationClasses:v}}const si=$({id:String,appendIcon:ce,baseColor:String,centerAffix:{type:Boolean,default:!0},color:String,glow:Boolean,iconColor:[Boolean,String],prependIcon:ce,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},"onClick:prepend":Be(),"onClick:append":Be(),...se(),...Ze(),...es(lt(),["maxWidth","minWidth","width"]),...Ae(),...sd()},"VInput"),Mt=G()({name:"VInput",props:{...si()},emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:i,emit:s}=t;const{densityClasses:a}=ut(e),{dimensionStyles:r}=ot(e),{themeClasses:o}=Ne(e),{rtlClasses:c}=pt(),{InputIcon:l}=Wr(e),u=yt(),d=k(()=>e.id||`input-${u}`),f=k(()=>`${d.value}-messages`),{errorMessages:v,isDirty:h,isDisabled:p,isReadonly:g,isPristine:y,isValid:b,isValidating:w,reset:C,resetValidation:S,validate:R,validationClasses:x}=ad(e,"v-input",d),E=k(()=>({id:d,messagesId:f,isDirty:h,isDisabled:p,isReadonly:g,isPristine:y,isValid:b,isValidating:w,reset:C,resetValidation:S,validate:R})),O=k(()=>e.error||e.disabled?void 0:e.focused?e.color:e.baseColor),B=k(()=>{if(e.iconColor)return e.iconColor===!0?O.value:e.iconColor}),_=k(()=>{var P;return(P=e.errorMessages)!=null&&P.length||!y.value&&v.value.length?v.value:e.hint&&(e.persistentHint||e.focused)?e.hint:e.messages});return ee(()=>{var W,Y,U,V;const P=!!(i.prepend||e.prependIcon),A=!!(i.append||e.appendIcon),M=_.value.length>0,H=!e.hideDetails||e.hideDetails==="auto"&&(M||!!i.details);return m("div",{class:["v-input",`v-input--${e.direction}`,{"v-input--center-affix":e.centerAffix,"v-input--focused":e.focused,"v-input--glow":e.glow,"v-input--hide-spin-buttons":e.hideSpinButtons},a.value,o.value,c.value,x.value,e.class],style:[r.value,e.style]},[P&&m("div",{key:"prepend",class:"v-input__prepend"},[(W=i.prepend)==null?void 0:W.call(i,E.value),e.prependIcon&&m(l,{key:"prepend-icon",name:"prepend",color:B.value},null)]),i.default&&m("div",{class:"v-input__control"},[(Y=i.default)==null?void 0:Y.call(i,E.value)]),A&&m("div",{key:"append",class:"v-input__append"},[e.appendIcon&&m(l,{key:"append-icon",name:"append",color:B.value},null),(U=i.append)==null?void 0:U.call(i,E.value)]),H&&m("div",{id:f.value,class:"v-input__details",role:"alert","aria-live":"polite"},[m(nd,{active:M,messages:_.value},{message:i.message}),(V=i.details)==null?void 0:V.call(i,E.value)])])}),{reset:C,resetValidation:S,validate:R,isValid:b,errorMessages:v}}}),rd=$({text:String,onClick:Be(),...se(),...Ae()},"VLabel"),Ur=G()({name:"VLabel",props:rd(),setup(e,t){let{slots:n}=t;return ee(()=>{var i;return m("label",{class:["v-label",{"v-label--clickable":!!e.onClick},e.class],style:e.style,onClick:e.onClick},[e.text,(i=n.default)==null?void 0:i.call(n)])}),{}}}),qr=Symbol.for("vuetify:selection-control-group"),Gr=$({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:ce,trueIcon:ce,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:vt},...se(),...Ze(),...Ae()},"SelectionControlGroup"),od=$({...Gr({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup");G()({name:"VSelectionControlGroup",props:od(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=pe(e,"modelValue"),s=yt(),a=k(()=>e.id||`v-selection-control-group-${s}`),r=k(()=>e.name||a.value),o=new Set;return rt(qr,{modelValue:i,forceUpdate:()=>{o.forEach(c=>c())},onForceUpdate:c=>{o.add(c),je(()=>{o.delete(c)})}}),jt({[e.defaultsTarget]:{color:q(e,"color"),disabled:q(e,"disabled"),density:q(e,"density"),error:q(e,"error"),inline:q(e,"inline"),modelValue:i,multiple:k(()=>!!e.multiple||e.multiple==null&&Array.isArray(i.value)),name:r,falseIcon:q(e,"falseIcon"),trueIcon:q(e,"trueIcon"),readonly:q(e,"readonly"),ripple:q(e,"ripple"),type:q(e,"type"),valueComparator:q(e,"valueComparator")}}),ee(()=>{var c;return m("div",{class:["v-selection-control-group",{"v-selection-control-group--inline":e.inline},e.class],style:e.style,role:e.type==="radio"?"radiogroup":void 0},[(c=n.default)==null?void 0:c.call(n)])}),{}}});const bs=$({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...se(),...Gr()},"VSelectionControl");function ld(e){const t=Ye(qr,void 0),{densityClasses:n}=ut(e),i=pe(e,"modelValue"),s=k(()=>e.trueValue!==void 0?e.trueValue:e.value!==void 0?e.value:!0),a=k(()=>e.falseValue!==void 0?e.falseValue:!1),r=k(()=>!!e.multiple||e.multiple==null&&Array.isArray(i.value)),o=k({get(){const v=t?t.modelValue.value:i.value;return r.value?He(v).some(h=>e.valueComparator(h,s.value)):e.valueComparator(v,s.value)},set(v){if(e.readonly)return;const h=v?s.value:a.value;let p=h;r.value&&(p=v?[...He(i.value),h]:He(i.value).filter(g=>!e.valueComparator(g,s.value))),t?t.modelValue.value=p:i.value=p}}),{textColorClasses:c,textColorStyles:l}=st(k(()=>{if(!(e.error||e.disabled))return o.value?e.color:e.baseColor})),{backgroundColorClasses:u,backgroundColorStyles:d}=mt(k(()=>o.value&&!e.error&&!e.disabled?e.color:e.baseColor)),f=k(()=>o.value?e.trueIcon:e.falseIcon);return{group:t,densityClasses:n,trueValue:s,falseValue:a,model:o,textColorClasses:c,textColorStyles:l,backgroundColorClasses:u,backgroundColorStyles:d,icon:f}}const In=G()({name:"VSelectionControl",directives:{Ripple:fn},inheritAttrs:!1,props:bs(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const{group:s,densityClasses:a,icon:r,model:o,textColorClasses:c,textColorStyles:l,backgroundColorClasses:u,backgroundColorStyles:d,trueValue:f}=ld(e),v=yt(),h=te(!1),p=te(!1),g=z(),y=k(()=>e.id||`input-${v}`),b=k(()=>!e.disabled&&!e.readonly);s==null||s.onForceUpdate(()=>{g.value&&(g.value.checked=o.value)});function w(x){b.value&&(h.value=!0,Ln(x.target,":focus-visible")!==!1&&(p.value=!0))}function C(){h.value=!1,p.value=!1}function S(x){x.stopPropagation()}function R(x){if(!b.value){g.value&&(g.value.checked=o.value);return}e.readonly&&s&&Le(()=>s.forceUpdate()),o.value=x.target.checked}return ee(()=>{var _,P;const x=i.label?i.label({label:e.label,props:{for:y.value}}):e.label,[E,O]=qn(n),B=m("input",Z({ref:g,checked:o.value,disabled:!!e.disabled,id:y.value,onBlur:C,onFocus:w,onInput:R,"aria-disabled":!!e.disabled,"aria-label":e.label,type:e.type,value:f.value,name:e.name,"aria-checked":e.type==="checkbox"?o.value:void 0},O),null);return m("div",Z({class:["v-selection-control",{"v-selection-control--dirty":o.value,"v-selection-control--disabled":e.disabled,"v-selection-control--error":e.error,"v-selection-control--focused":h.value,"v-selection-control--focus-visible":p.value,"v-selection-control--inline":e.inline},a.value,e.class]},E,{style:e.style}),[m("div",{class:["v-selection-control__wrapper",c.value],style:l.value},[(_=i.default)==null?void 0:_.call(i,{backgroundColorClasses:u,backgroundColorStyles:d}),Ve(m("div",{class:["v-selection-control__input"]},[((P=i.input)==null?void 0:P.call(i,{model:o,textColorClasses:c,textColorStyles:l,backgroundColorClasses:u,backgroundColorStyles:d,inputNode:B,icon:r.value,props:{onFocus:w,onBlur:C,id:y.value}}))??m(fe,null,[r.value&&m(Se,{key:"icon",icon:r.value},null),B])]),[[gt("ripple"),e.ripple&&[!e.disabled&&!e.readonly,null,["center","circle"]]]])]),x&&m(Ur,{for:y.value,onClick:S},{default:()=>[x]})])}),{isFocused:h,input:g}}}),ud=$({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...si(),...bs()},"VSwitch"),$i=G()({name:"VSwitch",inheritAttrs:!1,props:ud(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const s=pe(e,"indeterminate"),a=pe(e,"modelValue"),{loaderClasses:r}=ei(e),{isFocused:o,focus:c,blur:l}=ii(e),u=z(),d=Te&&window.matchMedia("(forced-colors: active)").matches,f=k(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),v=yt(),h=k(()=>e.id||`switch-${v}`);function p(){s.value&&(s.value=!1)}function g(y){var b,w;y.stopPropagation(),y.preventDefault(),(w=(b=u.value)==null?void 0:b.input)==null||w.click()}return ee(()=>{const[y,b]=qn(n),w=Mt.filterProps(e),C=In.filterProps(e);return m(Mt,Z({class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":s.value},r.value,e.class]},y,w,{modelValue:a.value,"onUpdate:modelValue":S=>a.value=S,id:h.value,focused:o.value,style:e.style}),{...i,default:S=>{let{id:R,messagesId:x,isDisabled:E,isReadonly:O,isValid:B}=S;const _={model:a,isValid:B};return m(In,Z({ref:u},C,{modelValue:a.value,"onUpdate:modelValue":[P=>a.value=P,p],id:R.value,"aria-describedby":x.value,type:"checkbox","aria-checked":s.value?"mixed":void 0,disabled:E.value,readonly:O.value,onFocus:c,onBlur:l},b),{...i,default:P=>{let{backgroundColorClasses:A,backgroundColorStyles:M}=P;return m("div",{class:["v-switch__track",d?void 0:A.value],style:M.value,onClick:g},[i["track-true"]&&m("div",{key:"prepend",class:"v-switch__track-true"},[i["track-true"](_)]),i["track-false"]&&m("div",{key:"append",class:"v-switch__track-false"},[i["track-false"](_)])])},input:P=>{let{inputNode:A,icon:M,backgroundColorClasses:H,backgroundColorStyles:W}=P;return m(fe,null,[A,m("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":M||e.loading},e.inset||d?void 0:H.value],style:e.inset?void 0:W.value},[i.thumb?m(ke,{defaults:{VIcon:{icon:M,size:"x-small"}}},{default:()=>[i.thumb({..._,icon:M})]}):m(Zc,null,{default:()=>[e.loading?m(fs,{name:"v-switch",active:!0,color:B.value===!1?void 0:f.value},{default:Y=>i.loader?i.loader(Y):m(ys,{active:Y.isActive,color:Y.color,indeterminate:!0,size:"16",width:"2"},null)}):M&&m(Se,{key:String(M),icon:M,size:"x-small"},null)]})])])}})}})}),{}}}),vi="rgba(0, 200, 200, 0.3)",mi="rgba(200, 200, 0, 0.3)",cd="rgba(255, 0, 0, 0.8)",dd={props:["width","projectName","projectData"],data:()=>({loading:!0,autoValidation:!0,validationPending:!1,currentSegment:{text:"",start:0,end:0},time:0,shiftSegments:!1}),unmounted(){window.removeEventListener("keydown",this.keyPressed)},async mounted(){window.addEventListener("keydown",this.keyPressed),this.$currentRegion=null,this.$stopOnRegionOut=null;const e=this,n=(await ve.get(`/karaoke/${this.projectName}/segments-adjustment`)).data;let i=0;for(const l of n.segments)if(!l.validated){i=Math.max(0,l.start-.5);break}const s=await ve.get(`/karaoke/${this.projectName}/silence-boundaries`);this.$silenceBoundaries=[];for(const l of s.data.boundaries)l>=.25&&this.$silenceBoundaries.push(l-.25),this.$silenceBoundaries.push(l+.25);this.$reversedSilenceBoundaries=[...this.$silenceBoundaries].reverse();const[a,r]=await this.createWaveSurfer(this.projectData.audio_wav,"#waveform-audio",{height:0});this.$audioSurfer=a,this.$audioRegions=r;const[o,c]=await this.createWaveSurfer(this.projectData.vocals_wav,"#waveform-vocals",{mediaControls:!1});this.$vocalsSurfer=o,this.$vocalsRegions=c,this.$audioSurfer.on("play",()=>{this.$vocalsSurfer.play()}),this.$audioSurfer.on("pause",()=>{this.$vocalsSurfer.pause()}),this.$vocalsSurfer.on("seeking",l=>{this.$audioSurfer.setTime(l),console.log(l);const u=this.$vocalsRegions.regions.find(d=>d.start<=l&&l<=d.end);this.$currentRegion=u,this.currentSegment.text=this.$currentRegion?this.$currentRegion.$lyrics:""}),this.$vocalsSurfer.on("interaction",l=>{this.$audioSurfer.setTime(l),console.log(l);const u=this.$vocalsRegions.regions.find(d=>d.start<=l&&l<=d.end);this.$currentRegion=u,this.currentSegment.text=this.$currentRegion?this.$currentRegion.$lyrics:""}),this.$vocalsSurfer.on("timeupdate",l=>{e.time=l}),this.$vocalsSurfer.setMuted(!0);for(const l of n.segments){const u=l.validated?vi:mi,d=this.$vocalsRegions.addRegion({start:l.start,end:l.end,content:l.text,color:u,drag:!1,resize:!0});d.$lyrics=l.text,d.$color=u,d.$id=l.id,d.$validated=l.validated}for(const l of this.$silenceBoundaries)this.$vocalsRegions.addRegion({start:l,color:cd,drag:!1,resize:!1});this.computeSortedRegions(),this.$vocalsRegions.on("region-in",l=>{const u=this.$stopOnRegionOut;l.start!==l.end&&u===null&&(console.log("region-in",l),e.$currentRegion=l,e.currentSegment.text=l.$lyrics)}),this.$vocalsRegions.on("region-out",l=>{const u=this.$stopOnRegionOut;u&&l.$id===u.$id&&(this.$audioSurfer.pause(),this.$vocalsSurfer.pause(),this.$stopOnRegionOut=null),l.start!==l.end&&(console.log("region-out",l),e.currentSegment.text="",e.autoValidation&&(e.validationPending=!0,e.$validationTimeout=setTimeout(()=>{console.log("validating region",l.$id),e.validationPending=!1,e.$validationTimeout=null,e.validateRegion(l)},1500)))}),this.setTime(i),this.loading=!1,this.$vocalsRegions.on("region-updated",async l=>{l.setOptions({color:mi});const u={start:l.start,end:l.end,id:l.$id,validated:l.$validated};await ve.post(`/karaoke/${this.projectName}/_adjust_segment`,u),await e.maybeRightShiftOtherRegions(l),this.computeSortedRegions()}),this.$vocalsSurfer.once("decode",()=>{document.querySelector('input[type="range"]').oninput=l=>{const u=Number(l.target.value);this.$vocalsSurfer.zoom(u)}})},methods:{async moveNextSegmentHere(){for(const e of this.$sortedRegionsAscending)if(e.start>this.time){const t=this.time-e.start,n=this.$vocalsRegions.regions.find(i=>i.$id===e.$id);n.setOptions({start:e.start+t+.01,end:e.end+t+.01}),await this.updateRegion(n),this.computeSortedRegions();break}},playCurrentSegment(){this.$stopOnRegionOut=this.$currentRegion,this.$vocalsSurfer.setTime(this.$currentRegion.start+.01),this.$audioSurfer.setTime(this.$currentRegion.start+.01),this.$vocalsSurfer.play(),this.$audioSurfer.play()},computeSortedRegions(){this.$sortedRegionsAscending=this.$vocalsRegions.regions.sort((e,t)=>e.start-t.start).filter(e=>e.end!==e.start).map(e=>({$id:e.$id,start:e.start,end:e.end,$lyrics:e.$lyrics}))},async validateCurrentRegion(){this.$currentRegion!==null&&await this.validateRegion(this.$currentRegion)},cancelPreviousValidation(){this.validationPending=!1,this.$validationTimeout&&clearTimeout(this.$validationTimeout)},async validateRegion(e){try{e.$validated=!0,e.setOptions({color:vi}),await this.updateRegion(e)}catch(t){console.error(t)}},keyPressed(e){switch(e.keyCode){case 90:return this.seekNextBoundary();case 83:return this.seekPreviousBoundary();case 65:return this.moveRegionStartToNextBoundary();case 81:return this.moveRegionStartToPreviousBoundary();case 69:return this.moveRegionEndToNextBoundary();case 68:return this.moveRegionEndToPreviousBoundary()}},setTime(e){this.$vocalsSurfer.setTime(e),this.$audioSurfer.setTime(e)},seekPreviousBoundary(){const e=this.findPreviousBoundary();e!==null&&this.setTime(Math.max(0,e-.7))},findPreviousBoundary(){const e=this.time;for(const t of this.$reversedSilenceBoundaries)if(t<e)return t;return null},seekNextBoundary(){const e=this.findNextBoundary();e!==null&&this.setTime(Math.max(0,e-.7))},findNextBoundary(){const e=this.time;for(const t of this.$silenceBoundaries)if(t>e)return t;return null},async moveRegionStartToPreviousBoundary(){const e=this.$currentRegion;if(!e)return;const t=this.findPreviousBoundary();t!==null&&(console.log("update start",t),e.setOptions({start:t}),await this.updateRegion(e),await this.maybeRightShiftOtherRegions(e),this.computeSortedRegions())},async toggleValidation(){this.$currentRegion.setOptions({color:this.$currentRegion.$validated?mi:vi}),this.$currentRegion.$validated=!this.$currentRegion.$validated;const e={start:this.$currentRegion.start,end:this.$currentRegion.end,id:this.$currentRegion.$id,validated:!this.$currentRegion.$validated};await ve.post(`/karaoke/${this.projectName}/_adjust_segment`,e)},async updateRegion(e){const t={start:e.start,end:e.end,id:e.$id,validated:e.$validated};await ve.post(`/karaoke/${this.projectName}/_adjust_segment`,t)},async moveRegionStartToNextBoundary(){const e=this.$currentRegion;if(!e)return;const t=this.findNextBoundary();if(t!==null){console.log("update start",t);let n=e.end;t>=n&&(n=t+.5),e.setOptions({start:t,end:n}),await this.updateRegion(e),await this.maybeRightShiftOtherRegions(e),this.computeSortedRegions()}},async maybeRightShiftOtherRegions(e){if(!this.shiftSegments)return;const t=[];let n=!1,i=!1;for(const s of this.$sortedRegionsAscending){if(!n){n=e.$id===s.$id,n&&(i=e.end);continue}if(!s.$validated)if(s.start<i){const a=i-s.start,r=s.start+a;let o=s.end+a;o<=r+.5&&(o=r+.5),i=o;const c=this.$vocalsRegions.regions.find(l=>l.$id===s.$id);c.setOptions({start:r,end:o}),t.push({id:c.$id,start:c.start,end:c.end,validated:!1})}else break}await ve.post(`/karaoke/${this.projectName}/_adjust_segments`,t)},async moveRegionEndToPreviousBoundary(){const e=this.$currentRegion;if(!e)return;const t=this.findPreviousBoundary();if(t!==null){console.log("update end",t);let n=e.start;t<=n&&(n=t-.5),e.setOptions({start:n,end:t}),await this.updateRegion(e),await this.maybeRightShiftOtherRegions(e),this.computeSortedRegions()}},async moveRegionEndToNextBoundary(){const e=this.$currentRegion;if(!e)return;const t=this.findNextBoundary();t!==null&&(console.log("update end",t),e.setOptions({end:t}),await this.updateRegion(e),await this.maybeRightShiftOtherRegions(e),this.computeSortedRegions())},async createWaveSurfer(e,t,n){return new Promise((i,s)=>{try{const a=Ar.create(),r=nn.create({barGap:5,mediaControls:!0,autoCenter:!0,barWidth:5,barRadius:8,duration:80,barHeight:3,minPxPerSec:100,height:300,hideScrollbar:!1,waveColor:"rgb(200, 0, 200)",progressColor:"rgb(100, 0, 100)",plugins:[a],url:e,container:t,...n});r.on("ready",()=>{i([r,a])})}catch(a){s(a)}})},async alignmentCorrected(){const e={alignment_correction:!1};await ve.patch(`/karaoke/${this.projectName}`,e),this.$emit("alignment-corrected")}}};function hd(e,t,n,i,s,a){return K(),Q(ct,{class:"py-4",color:"surface-variant","prepend-icon":"mdi-rocket-launch-outline",rounded:"lg",variant:"tonal"},{title:I(()=>t[2]||(t[2]=[oe("h2",{class:"text-h5 font-weight-bold"}," Corriger l'alignement des paroles ",-1)])),text:I(()=>[m(Vt,{class:"mt-5"},{default:I(()=>[e.loading?(K(),Q(ue,{key:0,cols:"12"},{default:I(()=>[m(ys,{indeterminate:""})]),_:1})):de("",!0),e.loading?de("",!0):(K(),Q(ue,{key:1,cols:"4"},{default:I(()=>t[3]||(t[3]=[oe("span",{class:"mr-5"},"Dplacer la lecture peu avant la frontire",-1)])),_:1})),e.loading?de("",!0):(K(),Q(ue,{key:2,cols:"4"},{default:I(()=>[m(be,{color:"primary",class:"mr-5",onClick:a.seekPreviousBoundary},{default:I(()=>t[4]||(t[4]=[me("prcdente (S)")])),_:1},8,["onClick"]),m(be,{color:"primary",onClick:a.seekNextBoundary},{default:I(()=>t[5]||(t[5]=[me("suivante (Z)")])),_:1},8,["onClick"])]),_:1})),e.loading?de("",!0):(K(),Q(ue,{key:3,cols:"4"},{default:I(()=>[m($i,{density:"compact",modelValue:e.shiftSegments,"onUpdate:modelValue":t[0]||(t[0]=r=>e.shiftSegments=r),label:"Pousser les segments  droite"},null,8,["modelValue"])]),_:1})),e.loading?de("",!0):(K(),Q(ue,{key:4,cols:"4"},{default:I(()=>t[6]||(t[6]=[oe("span",{class:"mr-5"},"Dplacer le dbut du segment  la frontire",-1)])),_:1})),e.loading?de("",!0):(K(),Q(ue,{key:5,cols:"4"},{default:I(()=>[m(be,{color:"primary",class:"mr-5",onClick:a.moveRegionStartToPreviousBoundary},{default:I(()=>t[7]||(t[7]=[me("prcdente (Q)")])),_:1},8,["onClick"]),m(be,{color:"primary",onClick:a.moveRegionStartToNextBoundary},{default:I(()=>t[8]||(t[8]=[me("suivante (A)")])),_:1},8,["onClick"])]),_:1})),e.loading?de("",!0):(K(),Q(ue,{key:6,cols:"4"},{default:I(()=>[m(be,{color:"primary",onClick:a.moveNextSegmentHere},{default:I(()=>t[9]||(t[9]=[me("Ramener le prochain segment ici")])),_:1},8,["onClick"])]),_:1})),e.loading?de("",!0):(K(),Q(ue,{key:7,cols:"4"},{default:I(()=>t[10]||(t[10]=[oe("span",{class:"mr-5"},"Dplacer la fin du segment  la frontire",-1)])),_:1})),e.loading?de("",!0):(K(),Q(ue,{key:8,cols:"4"},{default:I(()=>[m(be,{color:"primary",class:"mr-5",onClick:a.moveRegionEndToPreviousBoundary},{default:I(()=>t[11]||(t[11]=[me("prcdente (D)")])),_:1},8,["onClick"]),m(be,{color:"primary",onClick:a.moveRegionEndToNextBoundary},{default:I(()=>t[12]||(t[12]=[me("suivante (E)")])),_:1},8,["onClick"])]),_:1})),e.loading?de("",!0):(K(),Q(ue,{key:9,cols:"4"})),e.loading?de("",!0):(K(),Q(ue,{key:10,cols:"4"},{default:I(()=>[m($i,{modelValue:e.autoValidation,"onUpdate:modelValue":t[1]||(t[1]=r=>e.autoValidation=r),label:"Validation automatique en sortie de segment"},null,8,["modelValue"])]),_:1})),e.loading?de("",!0):(K(),Q(ue,{key:11,cols:"4"},{default:I(()=>[e.autoValidation?de("",!0):(K(),Q(be,{key:0,color:"primary",onClick:a.toggleValidation,disabled:!e.currentSegment.text},{default:I(()=>t[13]||(t[13]=[me("Changer la validation du segment courant")])),_:1},8,["onClick","disabled"])),e.autoValidation?(K(),Q(be,{key:1,color:"primary",onClick:a.cancelPreviousValidation,disabled:!e.validationPending},{default:I(()=>t[14]||(t[14]=[me("Annuler la prcdente validation")])),_:1},8,["onClick","disabled"])):de("",!0)]),_:1})),e.loading?de("",!0):(K(),Q(ue,{key:12,cols:"4"},{default:I(()=>[m(be,{color:"primary",onClick:a.playCurrentSegment,disabled:!e.currentSegment.text},{default:I(()=>t[15]||(t[15]=[me("Jouer le segment")])),_:1},8,["onClick","disabled"])]),_:1})),m(ue,{cols:"12",style:ri(`width: ${n.width}`)},{default:I(()=>[oe("div",{id:"waveform-vocals",style:ri(e.loading?"display:none;":"")},null,4),oe("div",{id:"waveform-audio",style:ri(e.loading?"display:none;":"")},null,4)]),_:1},8,["style"])]),_:1})]),actions:I(()=>[m(xe),m(be,{color:"primary",variant:"flat",onClick:a.alignmentCorrected},{default:I(()=>t[16]||(t[16]=[me(" C'est OK ! ")])),_:1},8,["onClick"]),m(xe)]),_:1})}const Kr=ze(dd,[["render",hd]]);function fd(e){var t=e.toLowerCase().trim().split(/\s*;\s*/);return t[0]==="banner"?{name:t[0],delay:t[1]*1||0,leftToRight:t[2]*1||0,fadeAwayWidth:t[3]*1||0}:/^scroll\s/.test(t[0])?{name:t[0],y1:Math.min(t[1]*1,t[2]*1),y2:Math.max(t[1]*1,t[2]*1),delay:t[3]*1||0,fadeAwayHeight:t[4]*1||0}:e!==""?{name:e}:null}function ji(e){return e?e.toLowerCase().replace(/([+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?)/g," $1 ").replace(/([mnlbspc])/g," $1 ").trim().replace(/\s+/g," ").split(/\s(?=[mnlbspc])/).map(function(t){return t.split(" ").filter(function(n,i){return!(i&&isNaN(n*1))})}):[]}var vd=["b","i","u","s","fsp","k","K","kf","ko","kt","fe","q","p","pbo","a","an","fscx","fscy","fax","fay","frx","fry","frz","fr","be","blur","bord","xbord","ybord","shad","xshad","yshad"],sa=vd.map(function(e){return{name:e,regex:new RegExp("^"+e+"-?\\d")}});function Xr(e){for(var t,n={},i=0;i<sa.length;i++){var s=sa[i],a=s.name,r=s.regex;if(r.test(e))return n[a]=e.slice(a.length)*1,n}if(/^fn/.test(e))n.fn=e.slice(2);else if(/^r/.test(e))n.r=e.slice(1);else if(/^fs[\d+-]/.test(e))n.fs=e.slice(2);else if(/^\d?c&?H?[0-9a-fA-F]+|^\d?c$/.test(e)){var o=e.match(/^(\d?)c&?H?(\w*)/),c=o[1],l=o[2];n["c"+(c||1)]=l&&("000000"+l).slice(-6)}else if(/^\da&?H?[0-9a-fA-F]+/.test(e)){var u=e.match(/^(\d)a&?H?([0-9a-f]+)/i),d=u[1],f=u[2];n["a"+d]=("00"+f).slice(-2)}else if(/^alpha&?H?[0-9a-fA-F]+/.test(e))t=e.match(/^alpha&?H?([0-9a-f]+)/i),n.alpha=t[1],n.alpha=("00"+n.alpha).slice(-2);else if(/^(?:pos|org|move|fad|fade)\([^)]+/.test(e)){var v=e.match(/^(\w+)\((.*?)\)?$/),h=v[1],p=v[2];n[h]=p.trim().split(/\s*,\s*/).map(Number)}else if(/^i?clip\([^)]+/.test(e)){var g=e.match(/^i?clip\((.*?)\)?$/)[1].trim().split(/\s*,\s*/);n.clip={inverse:/iclip/.test(e),scale:1,drawing:null,dots:null},g.length===1&&(n.clip.drawing=ji(g[0])),g.length===2&&(n.clip.scale=g[0]*1,n.clip.drawing=ji(g[1])),g.length===4&&(n.clip.dots=g.map(Number))}else if(/^t\(/.test(e)){var y=e.match(/^t\((.*?)\)?$/)[1].trim().replace(/\\.*/,function(b){return b.replace(/,/g,`
`)}).split(/\s*,\s*/);if(!y[0])return n;n.t={t1:0,t2:0,accel:1,tags:y[y.length-1].replace(/\n/g,",").split("\\").slice(1).map(Xr)},y.length===2&&(n.t.accel=y[0]*1),y.length===3&&(n.t.t1=y[0]*1,n.t.t2=y[1]*1),y.length===4&&(n.t.t1=y[0]*1,n.t.t2=y[1]*1,n.t.accel=y[2]*1)}return n}function md(e){for(var t=[],n=0,i="",s=e.split("\\").slice(1).concat("").join("\\"),a=0;a<s.length;a++){var r=s[a];r==="("&&n++,r===")"&&n--,n<0&&(n=0),!n&&r==="\\"?(i&&t.push(i),i=""):i+=r}return t.map(Xr)}function gd(e){var t=e.split(/{([^{}]*?)}/),n=[];t[0].length&&n.push({tags:[],text:t[0],drawing:[]});for(var i=1;i<t.length;i+=2){var s=md(t[i]),a=s.reduce(function(r,o){return o.p===void 0?r:!!o.p},!1);n.push({tags:s,text:a?"":t[i+1],drawing:a?ji(t[i+1]):[]})}return{raw:e,combined:n.map(function(r){return r.text}).join(""),parsed:n}}function pd(e){var t=e.split(":");return t[0]*3600+t[1]*60+t[2]*1}function yd(e,t){var n=e.split(",");if(n.length>t.length){var i=n.slice(t.length-1).join();n=n.slice(0,t.length-1),n.push(i)}for(var s={},a=0;a<n.length;a++){var r=t[a],o=n[a].trim();switch(r){case"Layer":case"MarginL":case"MarginR":case"MarginV":s[r]=o*1;break;case"Start":case"End":s[r]=pd(o);break;case"Effect":s[r]=fd(o);break;case"Text":s[r]=gd(o);break;default:s[r]=o}}return s}var bd=["Name","Fontname","Fontsize","PrimaryColour","SecondaryColour","OutlineColour","BackColour","Bold","Italic","Underline","StrikeOut","ScaleX","ScaleY","Spacing","Angle","BorderStyle","Outline","Shadow","Alignment","MarginL","MarginR","MarginV","Encoding"],Sd=["Layer","Start","End","Style","Name","MarginL","MarginR","MarginV","Effect","Text"];function aa(e){var t=bd.concat(Sd);return e.match(/Format\s*:\s*(.*)/i)[1].split(/\s*,\s*/).map(function(n){var i=t.find(function(s){return s.toLowerCase()===n.toLowerCase()});return i||n})}function wd(e,t){var n=e.match(/Style\s*:\s*(.*)/i)[1].split(/\s*,\s*/);return Object.assign.apply(Object,[{}].concat(t.map(function(i,s){var a;return a={},a[i]=n[s],a})))}function Cd(e){for(var t={info:{},styles:{format:[],style:[]},events:{format:[],comment:[],dialogue:[]}},n=e.split(/\r?\n/),i=0,s=0;s<n.length;s++){var a=n[s].trim();if(!/^;/.test(a)&&(/^\[Script Info\]/i.test(a)?i=1:/^\[V4\+? Styles\]/i.test(a)?i=2:/^\[Events\]/i.test(a)?i=3:/^\[.*\]/.test(a)&&(i=0),i!==0)){if(i===1&&/:/.test(a)){var r=a.match(/(.*?)\s*:\s*(.*)/),o=r[1],c=r[2];t.info[o]=c}if(i===2&&(/^Format\s*:/i.test(a)&&(t.styles.format=aa(a)),/^Style\s*:/i.test(a)&&t.styles.style.push(wd(a,t.styles.format))),i===3&&(/^Format\s*:/i.test(a)&&(t.events.format=aa(a)),/^(?:Comment|Dialogue)\s*:/i.test(a))){var l=a.match(/^(\w+?)\s*:\s*(.*)/i),u=l[1],d=l[2];t.events[u.toLowerCase()].push(yd(d,t.events.format))}}}return t}function kd(e){var t={type:null,prev:null,next:null,points:[]};/[mnlbs]/.test(e[0])&&(t.type=e[0].toUpperCase().replace("N","L").replace("B","C"));for(var n=e.length-!(e.length&1),i=1;i<n;i+=2)t.points.push({x:e[i]*1,y:e[i+1]*1});return t}function xd(e){return!(!e.points.length||!e.type||/C|S/.test(e.type)&&e.points.length<3)}function Ed(e){var t,n=1/0,i=1/0,s=-1/0,a=-1/0;return(t=[]).concat.apply(t,e.map(function(r){var o=r.points;return o})).forEach(function(r){var o=r.x,c=r.y;n=Math.min(n,o),i=Math.min(i,c),s=Math.max(s,o),a=Math.max(a,c)}),{minX:n,minY:i,width:s-n,height:a-i}}function Rd(e,t,n){var i=[],s=[0,.6666666666666666,.3333333333333333,0],a=[0,1/3,2/3,0],r=[0,1/6,2/3,1/6],o=function(f,v){return f[0]*v[0]+f[1]*v[1]+f[2]*v[2]+f[3]*v[3]},c=[e[e.length-1].x,e[0].x,e[1].x,e[2].x],l=[e[e.length-1].y,e[0].y,e[1].y,e[2].y];i.push({type:t==="M"?"M":"L",points:[{x:o(r,c),y:o(r,l)}]});for(var u=3;u<e.length;u++)c=[e[u-3].x,e[u-2].x,e[u-1].x,e[u].x],l=[e[u-3].y,e[u-2].y,e[u-1].y,e[u].y],i.push({type:"C",points:[{x:o(s,c),y:o(s,l)},{x:o(a,c),y:o(a,l)},{x:o(r,c),y:o(r,l)}]});if(n==="L"||n==="C"){var d=e[e.length-1];i.push({type:"L",points:[{x:d.x,y:d.y}]})}return i}function Pd(e){return e.map(function(t){var n=t.type,i=t.points;return n+i.map(function(s){var a=s.x,r=s.y;return a+","+r}).join(",")}).join("")}function Yr(e){for(var t,n=[],i=0;i<e.length;){var s=e[i],a=kd(s);if(xd(a)){if(a.type==="S"){var r=(n[i-1]||{points:[{x:0,y:0}]}).points.slice(-1)[0],o=r.x,c=r.y;a.points.unshift({x:o,y:c})}i&&(a.prev=n[i-1].type,n[i-1].next=a.type),n.push(a),i++}else{if(i&&n[i-1].type==="S"){var l={p:a.points,c:n[i-1].points.slice(0,3)};n[i-1].points=n[i-1].points.concat((l[s[0]]||[]).map(function(d){var f=d.x,v=d.y;return{x:f,y:v}}))}e.splice(i,1)}}var u=(t=[]).concat.apply(t,n.map(function(d){var f=d.type,v=d.points,h=d.prev,p=d.next;return f==="S"?Rd(v,h,p):{type:f,points:v}}));return Object.assign({instructions:u,d:Pd(u)},Ed(n))}var Td=["fs","fsp","clip","c1","c2","c3","c4","a1","a2","a3","a4","alpha","fscx","fscy","fax","fay","frx","fry","frz","fr","be","blur","bord","xbord","ybord","shad","xshad","yshad"];function et(e,t,n){var i,s,a;n===void 0&&(n={});var r=e[t];if(r===void 0)return null;if(t==="pos"||t==="org")return r.length===2?(i={},i[t]={x:r[0],y:r[1]},i):null;if(t==="move"){var o=r[0],c=r[1],l=r[2],u=r[3],d=r[4];d===void 0&&(d=0);var f=r[5];return f===void 0&&(f=0),r.length===4||r.length===6?{move:{x1:o,y1:c,x2:l,y2:u,t1:d,t2:f}}:null}if(t==="fad"||t==="fade"){if(r.length===2){var v=r[0],h=r[1];return{fade:{type:"fad",t1:v,t2:h}}}if(r.length===7){var p=r[0],g=r[1],y=r[2],b=r[3],w=r[4],C=r[5],S=r[6];return{fade:{type:"fade",a1:p,a2:g,a3:y,t1:b,t2:w,t3:C,t4:S}}}return null}if(t==="clip"){var R=r.inverse,x=r.scale,E=r.drawing,O=r.dots;if(E)return{clip:{inverse:R,scale:x,drawing:Yr(E),dots:O}};if(O){var B=O[0],_=O[1],P=O[2],A=O[3];return{clip:{inverse:R,scale:x,drawing:E,dots:{x1:B,y1:_,x2:P,y2:A}}}}return null}if(/^[xy]?(bord|shad)$/.test(t)&&(r=Math.max(r,0)),t==="bord")return{xbord:r,ybord:r};if(t==="shad")return{xshad:r,yshad:r};if(/^c\d$/.test(t))return s={},s[t]=r||n[t],s;if(t==="alpha")return{a1:r,a2:r,a3:r,a4:r};if(t==="fr")return{frz:r};if(t==="fs")return{fs:/^\+|-/.test(r)?(r*1>-10?1+r/10:1)*n.fs:r*1};if(t==="K")return{kf:r};if(t==="t"){var M=r.t1,H=r.accel,W=r.tags,Y=r.t2||(n.end-n.start)*1e3,U={};return W.forEach(function(V){var D=Object.keys(V)[0];~Td.indexOf(D)&&!(D==="clip"&&!V[D].dots)&&Object.assign(U,et(V,D,n))}),{t:{t1:M,t2:Y,accel:H,tag:U}}}return a={},a[t]=r,a}var Ad=[null,1,2,3,null,7,8,9,null,4,5,6],Od=["r","a","an","pos","org","move","fade","fad","clip"];function _d(e){return JSON.parse(JSON.stringify(Object.assign({},e,{k:void 0,kf:void 0,ko:void 0,kt:void 0})))}function Ld(e){for(var t=e.styles,n=e.style,i=e.parsed,s=e.start,a=e.end,r,o={q:t[n].tag.q},c,l,u,d,f,v=[],h={style:n,fragments:[]},p={},g=0;g<i.length;g++){for(var y=i[g],b=y.tags,w=y.text,C=y.drawing,S=void 0,R=0;R<b.length;R++){var x=b[R];S=x.r===void 0?S:x.r}for(var E={tag:S===void 0?_d(p):{},text:w,drawing:C.length?Yr(C):null},O=0;O<b.length;O++){var B=b[O];r=r||Ad[B.a||0]||B.an,o=et(B,"q")||o,c=c||et(B,"pos"),l=l||et(B,"org"),u=u||et(B,"move"),d=d||et(B,"fade")||et(B,"fad"),f=et(B,"clip")||f;var _=Object.keys(B)[0];if(_&&!~Od.indexOf(_)){var P=t[n].tag,A=P.c1,M=P.c2,H=P.c3,W=P.c4,Y=p.fs||P.fs,U=et(B,_,{start:s,end:a,c1:A,c2:M,c3:H,c4:W,fs:Y});_==="t"?(E.tag.t=E.tag.t||[],E.tag.t.push(U.t)):Object.assign(E.tag,U)}}if(p=E.tag,S!==void 0&&(v.push(h),h={style:t[S]?S:n,fragments:[]}),E.text||E.drawing){var V=h.fragments[h.fragments.length-1]||{};V.text&&E.text&&!Object.keys(E.tag).length?V.text+=E.text:h.fragments.push(E)}}return v.push(h),Object.assign({alignment:r,slices:v},o,c,l,u,d,f)}function Vd(e){for(var t=e.styles,n=e.dialogues,i=1/0,s=[],a=0;a<n.length;a++){var r=n[a];if(!(r.Start>=r.End)){t[r.Style]||(r.Style="Default");var o=t[r.Style].style,c=Ld({styles:t,style:r.Style,parsed:r.Text.parsed,start:r.Start,end:r.End}),l=c.alignment||o.Alignment;i=Math.min(i,r.Layer),s.push(Object.assign({layer:r.Layer,start:r.Start,end:r.End,style:r.Style,name:r.Name,margin:{left:r.MarginL||o.MarginL,right:r.MarginR||o.MarginR,vertical:r.MarginV||o.MarginV},effect:r.Effect},c,{alignment:l}))}}for(var u=0;u<s.length;u++)s[u].layer-=i;return s.sort(function(d,f){return d.start-f.start||d.end-f.end})}var Dd={Name:"Default",Fontname:"Arial",Fontsize:"20",PrimaryColour:"&H00FFFFFF&",SecondaryColour:"&H000000FF&",OutlineColour:"&H00000000&",BackColour:"&H00000000&",Bold:"0",Italic:"0",Underline:"0",StrikeOut:"0",ScaleX:"100",ScaleY:"100",Spacing:"0",Angle:"0",BorderStyle:"1",Outline:"2",Shadow:"2",Alignment:"2",MarginL:"10",MarginR:"10",MarginV:"10",Encoding:"1"};function yn(e){if(/^(&|H|&H)[0-9a-f]{6,}/i.test(e)){var t=e.match(/&?H?([0-9a-f]{2})?([0-9a-f]{6})/i),n=t[1],i=t[2];return[n||"00",i]}var s=parseInt(e,10);if(!isNaN(s)){var a=-2147483648,r=2147483647;if(s<a)return["00","000000"];var o=a<=s&&s<=r?("00000000"+(s<0?s+4294967296:s).toString(16)).slice(-8):String(s).slice(0,8);return[o.slice(0,2),o.slice(2)]}return["00","000000"]}function Bd(e){for(var t=e.info,n=e.style,i=e.defaultStyle,s={},a=[Object.assign({},i,{Name:"Default"})].concat(n),r=function(c){var l=Object.assign({},Dd,a[c]);/^(\*+)Default$/.test(l.Name)&&(l.Name="Default"),Object.keys(l).forEach(function(x){x!=="Name"&&x!=="Fontname"&&!/Colour/.test(x)&&(l[x]*=1)});var u=yn(l.PrimaryColour),d=u[0],f=u[1],v=yn(l.SecondaryColour),h=v[0],p=v[1],g=yn(l.OutlineColour),y=g[0],b=g[1],w=yn(l.BackColour),C=w[0],S=w[1],R={fn:l.Fontname,fs:l.Fontsize,c1:f,a1:d,c2:p,a2:h,c3:b,a3:y,c4:S,a4:C,b:Math.abs(l.Bold),i:Math.abs(l.Italic),u:Math.abs(l.Underline),s:Math.abs(l.StrikeOut),fscx:l.ScaleX,fscy:l.ScaleY,fsp:l.Spacing,frz:l.Angle,xbord:l.Outline,ybord:l.Outline,xshad:l.Shadow,yshad:l.Shadow,fe:l.Encoding,q:/^[0-3]$/.test(t.WrapStyle)?t.WrapStyle*1:2};s[l.Name]={style:l,tag:R}},o=0;o<a.length;o++)r(o);return s}function Md(e,t){t===void 0&&(t={});var n=Cd(e),i=Bd({info:n.info,style:n.styles.style,defaultStyle:t.defaultStyle||{}});return{info:n.info,width:n.info.PlayResX*1||null,height:n.info.PlayResY*1||null,wrapStyle:/^[0-3]$/.test(n.info.WrapStyle)?n.info.WrapStyle*1:2,collisions:n.info.Collisions||"Normal",styles:i,dialogues:Vd({styles:i,dialogues:n.events.dialogue})}}function gi(e){const t=e.replace(/&H|&/g,""),n=parseInt(t.slice(2,4),16),i=parseInt(t.slice(4,6),16),a=`rgb(${parseInt(t.slice(6,8),16)}, ${i}, ${n}, 1)`;return Nd(a)}function pi(e){const t=e.replace("#",""),n=t.slice(0,2),i=t.slice(2,4);return`#${t.slice(4,6)}${i}${n}`}function Nd(e){const t=e.match(/\d+/g);let n=parseInt(t[0]),i=parseInt(t[1]),s=parseInt(t[2]),a=parseFloat(t[3]),r=n.toString(16).padStart(2,"0"),o=i.toString(16).padStart(2,"0"),c=s.toString(16).padStart(2,"0"),l="#"+r+o+c;if(a!==1){let u=Math.round(a*255).toString(16).padStart(2,"0");return l+u}return l}function Id(e,t){return t*100/e}function $d(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let n="";for(let i=0;i<e;i++){const s=Math.floor(Math.random()*t.length);n+=t.charAt(s)}return n}function Jr(e,t="-",n="",i=10){let s=[];for(let a=0;a<e;a++)s.push($d(i));return n+s.join(t)}function jd(e){let t=0;if(e.length==0)return t;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);t=(t<<5)-t+i,t=t&t}return t}function yi(e){let t=0;for(let n=0;n<e.length;n++){let i=e[n];i.kind==1&&(t+=i.w)}return t}function Fd(e){let t="";for(let n=0;n<e.length;n++){let i=e[n];i.kind==1&&(t+=i.c)}return t}function Wd(e,t,n,i,s,a){const r=document.createElement("div");return r.id=Jr(2,"-","ASSRendererRender-",5),r.style.position="absolute",r.style.width=n+"px",r.style.height=i+"px",r.style.top=e+"px",r.style.left=t+"px",r.style.pointerEvents="none",r.style.overflow="hidden",r.style.boxSizing="border-box",r.style.padding="0px",r.style.margin="0px",s&&(r.style.zIndex=s.toString()),a?a.after(r):document.body.appendChild(r),r}function ra(e,t,n=0,i,s,a){const r=document.createElement("canvas");return r.id=Jr(2,"-","Canvas-",5),r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.pointerEvents="none",r.width=e,r.height=t,r.dataset.layer=n.toString(),r.dataset.identifier=zd(),i&&(r.dataset.name=i),a?a.after(r):(s||(s=document.body),s.appendChild(r)),r}function zd(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const n=Math.random()*16|0;return(t==="x"?n:n&3|8).toString(16)})}function ht(e){const t=`0x${e}`;return parseInt(t,16)}function bi(e,t){e=e.replace("#","");const n=parseInt(e.substring(0,2),16),i=parseInt(e.substring(2,4),16),s=parseInt(e.substring(4,6),16);return`rgba(${n}, ${i}, ${s}, ${t==0?1:t/255})`}var wt=class An{constructor(t=0,n=0){he(this,"x");he(this,"y");this.x=t,this.y=n}add(t){return new An(this.x+t.x,this.y+t.y)}sub(t){return new An(this.x-t.x,this.y-t.y)}mul(t){return new An(this.x*t,this.y*t)}};function Hd(e,t,n){return e.add(t.sub(e).mul(n))}function tt(e,t,n){return e+(t-e)*n}function Ud(e,t,n,i){const s=t+e.fadein,a=n-e.fadeout;if(i<s){let r=(i-t)/(s-t);return tt(0,1,r)}else{if(i>=s&&i<a)return 1;if(i>=a&&i<=n){let r=(i-a)/(n-a);return tt(1,0,r)}else return-1}}function qd(e,t,n,i){console.debug(e);const s=t+e.t1,a=t+e.t2,r=t+e.t3,o=t+e.t4;if(i<s)return e.a1;if(i>=s&&i<a){let c=(i-s)/(a-s);return tt(e.a1,e.a2,c)}else{if(i>=a&&i<r)return e.a2;if(i>=r&&i<o){let c=(i-r)/(o-r);return tt(e.a2,e.a3,c)}else return i>=o&&i<=n?e.a3:-1}}var Gd=class{constructor(e,t,n,i,s){he(this,"compiledASS");he(this,"renderDiv");he(this,"layers");he(this,"numberOfLayers");he(this,"video");he(this,"playerResX");he(this,"playerResY");he(this,"stop",!1);he(this,"animationHandle",null);he(this,"_log");he(this,"ppass",[]);he(this,"styles");he(this,"collisions","Normal");he(this,"dt",0);he(this,"previous",0);he(this,"currentTime",0);this._log=i,this.compiledASS=e,this.styles=e.styles,this.collisions=e.collisions,this._log==="DEBUG"&&this.log("DEBUG",this.compiledASS),this.playerResX=this.compiledASS.width,this.playerResY=this.compiledASS.height,this.renderDiv=Wd(t.y,t.x,t.width,t.height,s,n);const a=ra(t.width,t.height,-1,"background",this.renderDiv),r=a.getContext("2d");if(r===null)throw new Error("Unable to initilize the Canvas 2D context");this.layers=[{canvas:a,ctx:r}],this.numberOfLayers=this.findTotalLayers(e),this.insertLayers(t,a),this.video=n}insertLayers(e,t){for(let n=0;n<this.numberOfLayers;n++){const i=ra(e.width,e.height,n,"frame",void 0,t),s=i.getContext("2d");if(s===null)throw new Error("Unable to initilize the Canvas 2D context");s.textRendering="geometricPrecision",this.layers.push({canvas:i,ctx:s})}}getLayer(e){var t;for(let n=1;n<this.layers.length;n++)if(((t=this.layers[n])==null?void 0:t.canvas.dataset.layer)==e.toString())return this.layers[n];return null}findTotalLayers(e){let t=1;return e.dialogues.forEach(n=>{n.layer>=t&&t++}),t}async warmup(){const{dialogues:e}=this.compiledASS,t=document.createElement("canvas");t.height=this.playerResY,t.width=this.playerResX;const i={ctx:t.getContext("2d"),canvas:t};i.canvas.width=this.playerResX,i.canvas.height=this.playerResY,console.debug(e);for(let s=0;s<e.length;s++){const a=e[s],{layer:r,alignment:o,start:c,end:l,style:u,margin:d,slices:f,pos:v,move:h,org:p,fade:g}=a;let y,b,w;if(h&&(y={from:new wt(h.x1,h.y1),to:new wt(h.x2,h.y2),start:h.t1,end:h.t2}),p&&(b=new wt(p.x,p.y)),g)switch(g.type){case"fad":w={type:0,fadein:g.t1,fadeout:g.t2};break;case"fade":let{a1:C,a2:S,a3:R,t1:x,t2:E,t3:O,t4:B}=g;w={type:1,a1:C,a2:S,a3:R,t1:x,t2:E,t3:O,t4:B};break}this.ppass.push({start:c,layer:r,end:l,style:u,margin:d,alignment:o,pos:v,move:y,fade:w,rotationOrigin:b,chars:this.processSlices(o,f,i)})}}processSlices(e,t,n){let i=[];return t.forEach(s=>{const{style:a,fragments:r}=s;let o=this.computeStyle(a,e,n),c=[];r.forEach(l=>{this.applyOverrideTag(l.tag,o),this.applyFont(o,n);const u=l.text.replaceAll("\\N",`
`).split("");let d=0,f=[];for(let v=0;v<u.length;v++){const h=u[v];h==`
`?(f.push({kind:0}),d=0):(f.push({kind:1,pos:new wt,c:h,ord:d,w:0,style:a,tag:l.tag}),d+=1)}c=c.concat(f)}),i=i.concat(c)}),i}sublog(e,...t){switch(e){case"DISABLE":break;case"VERBOSE":console.info(e,...t);break;case"DEBUG":console.debug(e,...t);break;case"WARN":console.warn(e,...t);break}}log(e,...t){switch(this._log){case"DISABLE":break;case"VERBOSE":this.sublog(e,t);break;case"DEBUG":e=="DEBUG"&&this.sublog(e,t);break;case"WARN":e=="WARN"&&this.sublog(e,t);break}}async startRendering(){window.requestAnimationFrame(e=>{this.previous=e,this.animationHandle=requestAnimationFrame(this.render.bind(this))})}render(e){this.stop===!0?this.animationHandle&&(this.renderDiv.remove(),cancelAnimationFrame(this.animationHandle)):(this.dt=(e-this.previous)/1e3,this.previous=e,this.display(this.video.currentTime),this.animationHandle=requestAnimationFrame(this.render.bind(this)))}destroy(){this.stop=!0}display(e){this.currentTime=e,this.clear(),this.getSlices(e).forEach(n=>{this.showDialogue(n,e)})}charsToString(e){return e.reduce((t,n)=>t+=n.kind==0?`
`:n.c,"")}getSlices(e){return this.ppass.filter(t=>t.start<=e&&t.end>=e)}getLineHeights(e,t){let n=[],i=0;return t.forEach(s=>{s.forEach(a=>{if(a.kind===1){let r=this.computeStyle(a.style,1,e);this.applyOverrideTag(a.tag,r),this.applyFont(r,e);let o=e.ctx.measureText(a.c).fontBoundingBoxAscent+e.ctx.measureText(a.c).fontBoundingBoxDescent;o>i&&(i=o)}}),n.push(i),i=0}),n}countLines(e){return e.filter(t=>t.kind===0).length+1}lineWidth(e,t){let n=0;return t.forEach(i=>{if(i.kind===1){let s=this.computeStyle(i.style,1,e);this.applyOverrideTag(i.tag,s),this.applyFont(s,e),n+=e.ctx.measureText(i.c).width+s.t.fsp}}),n}lines(e){let t=[],n=[];return e.forEach(i=>{switch(i.kind){case 0:t.push(n),n=[];break;case 1:n.push(i);break}}),n.length>0&&t.push(n),t}showDialogue(e,t){const n=this.getLayer(e.layer);if(n){let i=this.computeStyle(e.style,e.alignment,n);const s=this.lines(e.chars),a=this.getLineHeights(n,s),r=Math.max(...a),o=this.countLines(e.chars),c=r*o;let l=0,u=0,d=0,f=1,v=!1;const h=n.canvas.width/this.playerResX,p=n.canvas.height/this.playerResY;if(e.pos&&(v=!0,d=e.pos.x*h,l=d,u=e.pos.y*p),e.move){v=!0;let S=new wt(e.move.from.x*h,e.move.from.y*p),R=new wt(e.move.to.x*h,e.move.to.y*p),x=Hd(S,R,(t-e.start)/(e.end-e.start));d=x.x,l=d,u=x.y}if(e.rotationOrigin&&new wt(e.rotationOrigin.x*h,e.rotationOrigin.y*p),e.fade)switch(e.fade.type){case 0:f=Ud(e.fade,e.start*1e3,e.end*1e3,t*1e3);break;case 1:f=qd(e.fade,e.start*1e3,e.end*1e3,t*1e3);break}e.chars.forEach(S=>{switch(S.kind){case 0:l=d,u+=r;break;case 1:i=this.computeStyle(S.style,e.alignment,n),this.applyOverrideTag(S.tag,i),this.applyFont(i,n);const R=n.ctx.measureText(S.c).width+i.t.fsp;S.pos.x=l,S.pos.y=u,S.w=R,l+=R;break}});const g=this.upscaleMargin(e.margin);s.forEach(S=>{const R=this.lineWidth(n,S);if(v)switch(i.textAlign){case 0:break;case 1:S.forEach(x=>{x.kind==1&&(x.pos.x-=R/2)});break}else{switch(i.textAlign){case 0:S.forEach(x=>{x.kind==1&&(x.pos.x+=g.left)});break;case 1:S.forEach(x=>{x.kind==1&&(x.pos.x+=(n.canvas.width-R)/2)});break;case 2:S.forEach(x=>{x.kind==1&&(x.pos.x+=n.canvas.width-R-g.right)});break;default:S.forEach(x=>{x.kind==1&&(x.pos.x+=g.left)});break}switch(i.textBaseline){case 0:S.forEach(x=>{x.kind==1&&(x.pos.y+=n.canvas.height-(s.length>1?c/s.length:0)-g.vertical)});break;case 1:S.forEach(x=>{x.kind==1&&(x.pos.y+=(n.canvas.height-c)/2+(s.length>1?c/s.length:r))});break;case 2:S.forEach(x=>{x.kind==1&&(x.pos.y+=g.vertical+r/2)});break;default:S.forEach(x=>{x.kind==1&&(x.pos.y+=n.canvas.height-(s.length>1?c/s.length:0)-g.vertical)});break}}});let y=[],b=null,w=[],C=0;e.chars.forEach(S=>{if(S.kind==1){let R=this.computeStyle(S.style,e.alignment,n);this.applyOverrideTag(S.tag,R);let x=this.getFontHash(R);C!==x&&y.length>0?b!==null&&(w.push({font:b,value:y,w:yi(y)}),y=[S],b=R,C=x):(b=R,y.push(S),C=x)}else b!==null&&(w.push({font:b,value:y,w:yi(y)}),y=[],b=null)}),y.length>0&&b!==null&&(w.push({font:b,value:y,w:yi(y)}),y=[],b=null),w.forEach(S=>{S.font.opacity=f,n.ctx.save(),this.drawWord(S,t,e.start,n),n.ctx.restore()})}}getFontHash(e){return jd(JSON.stringify(e))}drawWord(e,t,n,i,s=!1){var o,c;let a=Fd(e.value);for(let l=0;l<e.font.customAnimations.length;l++){const u=e.font.customAnimations[l];if(n*1e3+u.t1<=t*1e3&&t*1e3<=n*1e3+u.t2){const d=n*1e3+u.t2,f=n*1e3+u.t1,v=(t*1e3-f)/(d-f);for(const h in u.tag)switch(h){case"a1":case"a3":case"a4":e.font.colors[h]=tt(255,Math.abs(ht(u.tag[h])-255),v);break;case"blur":case"xshad":case"yshad":case"xbord":case"ybord":e.font[h]=tt(0,u.tag[h],v);break;case"fax":case"fay":case"frx":case"fry":case"frz":case"fscx":case"fscy":e.font.t[h]=tt(0,u.tag[h],v);break;case"fs":e.font.fontsize=this.upscale(tt(0,u.tag[h],v),this.playerResY,((o=this.layers[0])==null?void 0:o.canvas.height)||0);break;case"fsp":e.font.t.fsp=this.upscale(tt(0,u.tag[h],v),this.playerResX,((c=this.layers[0])==null?void 0:c.canvas.width)||this.playerResX);break}}}this.applyFont(e.font,i);const r=e.value[0];if(r.kind===1){e.font.borderStyle!==3&&(e.font.xbord!==0||e.font.ybord!==0)&&i.ctx.strokeText(a,r.pos.x,r.pos.y);let l=i.ctx.measureText(a);if(i.ctx.fillText(a,r.pos.x,r.pos.y),e.font.underline){const u=r.pos.y+l.emHeightDescent;i.ctx.fillRect(r.pos.x,u,l.width,i.canvas.height*.2/100)}if(e.font.strikeout){const u=r.pos.y-l.hangingBaseline/2;i.ctx.shadowOffsetX=0,i.ctx.shadowOffsetY=0,i.ctx.fillRect(r.pos.x,u,l.width,i.canvas.height*.2/100)}e.font.borderStyle===3&&this.drawTextBackground(r.pos,l.actualBoundingBoxAscent+l.fontBoundingBoxDescent,l.width,e.font)}}drawTextBackground(e,t,n,i){const s=this.layers[0];s.ctx.save(),s.ctx.beginPath(),s.ctx.fillStyle=i.colors.c2,s.ctx.fillRect(e.x,e.y-t,n,t),s.ctx.closePath(),s.ctx.restore()}upscaleY(e,t){var i;return(((i=this.layers[0])==null?void 0:i.canvas.height)||this.playerResY)*e/t}upscaleX(e,t){var i;return(((i=this.layers[0])==null?void 0:i.canvas.width)||this.playerResX)*e/t}clearLayer(e){var t,n,i;(i=this.layers[e])==null||i.ctx.clearRect(0,0,(t=this.layers[e])==null?void 0:t.canvas.width,(n=this.layers[e])==null?void 0:n.canvas.height)}clear(){this.layers.forEach(e=>{e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height)})}upscalePosition(e){var t,n;return{x:this.upscale(e.x,this.playerResX,((t=this.layers[0])==null?void 0:t.canvas.width)||this.playerResX),y:this.upscale(e.y,this.playerResY,((n=this.layers[0])==null?void 0:n.canvas.height)||this.playerResY)}}upscaleMargin(e){var t,n,i;return{left:this.upscale(e.left,this.playerResX,((t=this.layers[0])==null?void 0:t.canvas.width)||this.playerResX),right:this.upscale(e.right,this.playerResX,((n=this.layers[0])==null?void 0:n.canvas.width)||this.playerResX),vertical:this.upscale(e.vertical,this.playerResY,((i=this.layers[0])==null?void 0:i.canvas.height)||this.playerResY)}}applyOverrideTag(e,t){var n,i;e.b!==void 0&&(t.bold=e.b===1),e.i!==void 0&&(t.italic=e.i===1),e.u!==void 0&&(t.underline=e.u===1),e.s!==void 0&&(t.strikeout=e.s===1),e.fn!==void 0&&(t.fontname=e.fn),e.q!==void 0&&(t.t.q=e.q),e.fs!==void 0&&(t.fontsize=this.upscale(e.fs,this.playerResY,((n=this.layers[0])==null?void 0:n.canvas.height)||0)),e.fscx!==void 0&&(t.t.fscx=e.fscx),e.fscy!==void 0&&(t.t.fscy=e.fscy),e.frz!==void 0&&(t.t.frz=e.frz),e.frx!==void 0&&(t.t.frx=e.frx),e.fry!==void 0&&(t.t.fry=e.fry),e.fax!==void 0&&(t.t.fax=e.fax),e.fay!==void 0&&(t.t.fay=e.fay),e.fsp!==void 0&&(t.t.fsp=this.upscale(e.fsp,this.playerResX,((i=this.layers[0])==null?void 0:i.canvas.width)||this.playerResX)),e.t!==void 0&&(t.customAnimations=e.t),e.c1!==void 0&&(t.colors.c1=pi(e.c1)),e.c3!==void 0&&(t.colors.c3=pi(e.c3)),e.c4!==void 0&&(t.colors.c4=pi(e.c4)),e.a1!==void 0&&(t.colors.a1=ht(e.a1)),e.a3!==void 0&&(t.colors.a3=ht(e.a3)),e.a4!==void 0&&(t.colors.a4=ht(e.a4)),e.xshad!==void 0&&(t.xshad=e.xshad),e.yshad!==void 0&&(t.yshad=e.yshad),e.xbord!==void 0&&(t.xbord=e.xbord),e.ybord!==void 0&&(t.ybord=e.ybord),e.blur!==void 0&&(t.blur=e.blur)}upscale(e,t,n){return Id(t,n)*e/100}fontDecriptorString(e){return`${e.bold?"bold ":""}${e.italic?"italic ":""}${e.fontsize.toFixed(3)}px "${e.fontname}"`}computeStyle(e,t,n){var M;const i=this.styles[e];i===void 0&&this.log("WARN",`[ass-html5:renderer] no corresponding style "${e}" found`);const{fn:s,fs:a,a1:r,a2:o,a3:c,c4:l,a4:u,b:d,i:f,u:v,s:h,fscx:p,fscy:g,fsp:y,frz:b,xbord:w,ybord:C,xshad:S,yshad:R,fe:x,q:E}=i.tag,{PrimaryColour:O,OutlineColour:B,SecondaryColour:_,BorderStyle:P}=i.style,A={fontsize:this.upscale(a,this.playerResY,((M=this.layers[0])==null?void 0:M.canvas.height)||this.playerResY),fontname:s,bold:d===1,italic:f===1,underline:v===1,strikeout:h===1,colors:{c1:gi(O),c2:gi(_),c3:gi(B),c4:l,a1:ht(r),a2:ht(o),a3:ht(c),a4:ht(u)},t:{fscx:p,fscy:g,frz:b,frx:0,fry:0,fsp:this.upscale(y,this.playerResX,n.canvas.width),q:E},customAnimations:[],xbord:w,ybord:C,xshad:S,yshad:R,blur:0,fe:x,borderStyle:P,opacity:1,textAlign:this.getAlignment(t),textBaseline:this.getBaseLine(t)};return this.applyFont(A,n),A}applyFont(e,t){var n,i,s,a,r;t.ctx.font=this.fontDecriptorString(e),t.ctx.fillStyle=bi(e.colors.c1,e.colors.a1),t.ctx.strokeStyle=bi(e.colors.c3,e.colors.a3),t.ctx.letterSpacing=`${e.t.fsp}px`,t.ctx.shadowOffsetX=this.upscale(e.xshad,this.playerResX,((n=this.layers[0])==null?void 0:n.canvas.width)||this.playerResX),t.ctx.shadowOffsetY=this.upscale(e.yshad,this.playerResY,((i=this.layers[0])==null?void 0:i.canvas.height)||this.playerResY),t.ctx.shadowBlur=this.upscale(e.blur,this.playerResY,((s=this.layers[0])==null?void 0:s.canvas.height)||this.playerResY),t.ctx.shadowColor=bi(e.colors.c4,e.colors.a4),t.ctx.lineWidth=this.upscale(e.xbord,this.playerResX,((a=this.layers[0])==null?void 0:a.canvas.width)||this.playerResX)+this.upscale(e.ybord,this.playerResY,((r=this.layers[0])==null?void 0:r.canvas.height)||this.playerResY),t.ctx.lineCap="round",t.ctx.lineJoin="round",t.ctx.globalAlpha=e.opacity}getAlignment(e){switch(e){case 1:case 4:case 7:return 0;case 2:case 5:case 8:return 1;case 3:case 6:case 9:return 2;default:return 3}}getBaseLine(e){switch(e){case 1:case 2:case 3:return 0;case 4:case 5:case 6:return 1;case 7:case 8:case 9:return 2;default:return 3}}},Kd=class{constructor(e){he(this,"assText");he(this,"video");he(this,"videoElement",null);he(this,"renderer",null);he(this,"ro",null);he(this,"fonts");he(this,"zIndex");he(this,"onReady");he(this,"logging","DISABLE");he(this,"compiledAss");this.assText=e.assText,this.compiledAss=Md(this.assText,{}),this.video=e.video,this.fonts=e.fonts,this.zIndex=e.zIndex,this.onReady=e.onReady,e.logging&&(this.logging=e.logging)}async render(){if(typeof this.video=="string"){if(this.videoElement=document.querySelector(this.video),this.videoElement===null)throw new Error("Unable to find the video element")}else this.videoElement=this.video;const e=this.setCanvasSize();typeof this.fonts<"u"&&await this.loadFonts(this.fonts),this.videoElement&&(this.renderer=new Gd(this.compiledAss,e,this.videoElement,this.logging,this.zIndex),this.setCanvasSize(),this.videoElement.addEventListener("loadedmetadata",this.setCanvasSize.bind(this)),this.ro=new ResizeObserver(this.setCanvasSize.bind(this)),this.ro.observe(this.videoElement),await this.renderer.warmup(),this.onReady&&this.onReady(),await this.renderer.startRendering())}destroy(){var e,t,n;(e=this.videoElement)==null||e.removeEventListener("loadedmetadata",this.setCanvasSize.bind(this)),(t=this.ro)==null||t.disconnect(),(n=this.renderer)==null||n.destroy(),this.renderer=null}setCanvasSize(){var f,v,h,p;const{videoWidth:e,videoHeight:t,offsetTop:n,offsetLeft:i}=this.videoElement,s=e/t,a=((f=this.videoElement)==null?void 0:f.clientWidth)||0,r=((v=this.videoElement)==null?void 0:v.clientHeight)||0;let o=a,c=r,l=i,u=n;r*s>a?(o=a,c=o/s,u+=(r-c)/2):(c=r,o=c*s,l+=(a-o)/2);const d={width:o,height:c,x:l,y:u};return(h=this.renderer)!=null&&h.renderDiv&&(this.renderer.renderDiv.style.width=o+"px",this.renderer.renderDiv.style.height=c+"px",this.renderer.renderDiv.style.top=u+"px",this.renderer.renderDiv.style.left=l+"px"),(p=this.renderer)==null||p.layers.forEach(g=>{g.canvas.width=o,g.canvas.height=c}),d}async loadFonts(e){for(const t of e)try{await this.loadFont(t)?this.logging=="VERBOSE"&&console.info(`Font ${t.family} loaded from ${t.url}`):(this.logging=="VERBOSE"||this.logging=="WARN")&&console.warn(`Unable to load font ${t.family} from ${t.url}`)}catch(n){(this.logging=="VERBOSE"||this.logging=="WARN")&&(console.warn(`Unable to load font ${t.family} from ${t.url}`),console.warn(n))}}async getFontUrl(e){const n=await(await fetch(e)).blob();return URL.createObjectURL(n)}async loadFont(e){const t=await this.getFontUrl(e.url),n=new FontFace(e.family,`url(${t})`,e.descriptors||{}),i=await n.load();return document.fonts.add(i),n.status==="loaded"}};const Xd={props:["videoUrl","subtitlesUrl"],async mounted(){let t=await(await fetch(this.subtitlesUrl)).text();await new Kd({assText:t,video:document.getElementById("the-video")}).render()}},Yd=["src"];function Jd(e,t,n,i,s,a){return K(),Ft("video",{src:n.videoUrl,id:"the-video",controls:"",width:"1024",height:"768"},null,8,Yd)}const Qr=ze(Xd,[["render",Jd]]),Qd={components:{VideoWithSubtitles:Qr},props:["projectName","projectData","version"],data:()=>({withVoice:!1}),computed:{mediaVersion(){return`${this.version}_`}},methods:{async correctAlignment(){const e={alignment_correction:!0};await ve.patch(`/karaoke/${this.projectName}`,e),await ve.post(`/karaoke/${this.projectName}/_start_segments_adjustment`),this.$emit("correct-alignment")}}},Zd=["href"],eh=["href"];function th(e,t,n,i,s,a){const r=Qr;return K(),Q(ct,{class:"py-4",color:"surface-variant","prepend-icon":"mdi-rocket-launch-outline",rounded:"lg",variant:"tonal"},{title:I(()=>t[1]||(t[1]=[oe("h2",{class:"text-h5 font-weight-bold"}," Voil ce que a donne ",-1)])),text:I(()=>[m(Vt,{class:"mt-5"},{default:I(()=>[m(ue,{cols:"4",class:"my-0 py-0"},{default:I(()=>[m($i,{density:"compact",color:"primary",modelValue:e.withVoice,"onUpdate:modelValue":t[0]||(t[0]=o=>e.withVoice=o),label:"Avec la voix"},null,8,["modelValue"])]),_:1}),m(ue,{cols:"4",class:"my-0 pt-3 pb-0"},{default:I(()=>[oe("a",{href:e.withVoice?n.projectData[`lyrics_video_${a.mediaVersion}mp4`]:n.projectData[`karaoke_video_${a.mediaVersion}mp4`],download:""},"Tlcharger la vido",8,Zd)]),_:1}),m(ue,{cols:"3",class:"my-0 pt-3 pb-0"},{default:I(()=>[oe("a",{href:e.withVoice?n.projectData[`lyrics_subtitles_${a.mediaVersion}ass`]:n.projectData[`karaoke_subtitles_${a.mediaVersion}ass`],download:""},"Tlcharger les sous-titres",8,eh)]),_:1})]),_:1}),e.withVoice?(K(),Q(Vt,{key:0,class:"mt-5"},{default:I(()=>[m(ue,{cols:"12"},{default:I(()=>[m(r,{"video-url":n.projectData.video_mp4,"subtitles-url":n.version==="preview"?n.projectData.subtitles_segments_ass:n.projectData.subtitles_segments_fixed_ass},null,8,["video-url","subtitles-url"])]),_:1})]),_:1})):(K(),Q(Vt,{key:1,class:"mt-5"},{default:I(()=>[m(ue,{cols:"12"},{default:I(()=>[m(r,{"video-url":n.projectData.video_accompaniment_mp4,"subtitles-url":n.version==="preview"?n.projectData.subtitles_segments_ass:n.projectData.subtitles_segments_fixed_ass},null,8,["video-url","subtitles-url"])]),_:1})]),_:1}))]),actions:I(()=>[m(xe),n.version==="preview"?(K(),Q(be,{key:0,variant:"flat",color:"primary",onClick:a.correctAlignment},{default:I(()=>t[2]||(t[2]=[me(" Corriger l'alignement des paroles ")])),_:1},8,["onClick"])):de("",!0),m(xe)]),_:1})}const Zr=ze(Qd,[["render",th]]),nh={props:["projectName"],data:()=>({steps:0,step:0,message:""}),mounted(){const e=new WebSocket(`ws://${window.location.host}/ws/generate`),t=this;e.addEventListener("message",n=>{console.log("Message from server ",n.data);const i=JSON.parse(n.data);i.ping||(t.step=i.step,t.steps=i.steps,t.message=i.message,t.steps!==0&&t.step===t.steps&&(console.log("closing websocket"),e.close(),this.$emit("karaoke-generated")))}),e.addEventListener("open",n=>{console.log("websocket open"),ve.post(`/karaoke/${this.projectName}/_generate`)})}};function ih(e,t,n,i,s,a){return K(),Q(ct,{class:"py-4",color:"surface-variant","prepend-icon":"mdi-rocket-launch-outline",rounded:"lg",variant:"tonal"},{title:I(()=>t[1]||(t[1]=[oe("h2",{class:"text-h5 font-weight-bold"}," C'est parti ! ",-1)])),text:I(()=>[oe("div",null,Ke(e.message),1),m(ds,{modelValue:e.step,"onUpdate:modelValue":t[0]||(t[0]=r=>e.step=r),max:e.steps},null,8,["modelValue","max"])]),actions:I(()=>[m(xe),m(xe)]),_:1})}const eo=ze(nh,[["render",ih]]);function sh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var bn={exports:{}},oa;function ah(){if(oa)return bn.exports;oa=1;function e(t,n=100,i={}){if(typeof t!="function")throw new TypeError(`Expected the first parameter to be a function, got \`${typeof t}\`.`);if(n<0)throw new RangeError("`wait` must not be negative.");const{immediate:s}=typeof i=="boolean"?{immediate:i}:i;let a,r,o,c,l;function u(){const v=a,h=r;return a=void 0,r=void 0,l=t.apply(v,h),l}function d(){const v=Date.now()-c;v<n&&v>=0?o=setTimeout(d,n-v):(o=void 0,s||(l=u()))}const f=function(...v){if(a&&this!==a&&Object.getPrototypeOf(this)===Object.getPrototypeOf(a))throw new Error("Debounced method called with different contexts of the same prototype.");a=this,r=v,c=Date.now();const h=s&&!o;return o||(o=setTimeout(d,n)),h&&(l=u()),l};return Object.defineProperty(f,"isPending",{get(){return o!==void 0}}),f.clear=()=>{o&&(clearTimeout(o),o=void 0)},f.flush=()=>{o&&f.trigger()},f.trigger=()=>{l=u(),f.clear()},f}return bn.exports.debounce=e,bn.exports=e,bn.exports}var rh=ah();const la=sh(rh),oh=$({indeterminate:Boolean,indeterminateIcon:{type:ce,default:"$checkboxIndeterminate"},...bs({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),lh=G()({name:"VCheckboxBtn",props:oh(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{slots:n}=t;const i=pe(e,"indeterminate"),s=pe(e,"modelValue");function a(c){i.value&&(i.value=!1)}const r=k(()=>i.value?e.indeterminateIcon:e.falseIcon),o=k(()=>i.value?e.indeterminateIcon:e.trueIcon);return ee(()=>{const c=Wt(In.filterProps(e),["modelValue"]);return m(In,Z(c,{modelValue:s.value,"onUpdate:modelValue":[l=>s.value=l,a],class:["v-checkbox-btn",e.class],style:e.style,type:"checkbox",falseIcon:r.value,trueIcon:o.value,"aria-checked":i.value?"mixed":void 0}),n)}),{}}});function uh(e){let{selectedElement:t,containerElement:n,isRtl:i,isHorizontal:s}=e;const a=sn(s,n),r=to(s,i,n),o=sn(s,t),c=no(s,t),l=o*.4;return r>c?c-l:r+a<c+o?c-a+o+l:r}function ch(e){let{selectedElement:t,containerElement:n,isHorizontal:i}=e;const s=sn(i,n),a=no(i,t),r=sn(i,t);return a-s/2+r/2}function ua(e,t){const n=e?"scrollWidth":"scrollHeight";return(t==null?void 0:t[n])||0}function dh(e,t){const n=e?"clientWidth":"clientHeight";return(t==null?void 0:t[n])||0}function to(e,t,n){if(!n)return 0;const{scrollLeft:i,offsetWidth:s,scrollWidth:a}=n;return e?t?a-s+i:i:n.scrollTop}function sn(e,t){const n=e?"offsetWidth":"offsetHeight";return(t==null?void 0:t[n])||0}function no(e,t){const n=e?"offsetLeft":"offsetTop";return(t==null?void 0:t[n])||0}const hh=Symbol.for("vuetify:v-slide-group"),io=$({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:hh},nextIcon:{type:ce,default:"$next"},prevIcon:{type:ce,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["always","desktop","mobile"].includes(e)},...se(),...Zo({mobile:null}),...we(),...gs({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),ca=G()({name:"VSlideGroup",props:io(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isRtl:i}=pt(),{displayClasses:s,mobile:a}=ts(e),r=ps(e,e.symbol),o=te(!1),c=te(0),l=te(0),u=te(0),d=k(()=>e.direction==="horizontal"),{resizeRef:f,contentRect:v}=Bt(),{resizeRef:h,contentRect:p}=Bt(),g=el(),y=k(()=>({container:f.el,duration:200,easing:"easeOutQuart"})),b=k(()=>r.selected.value.length?r.items.value.findIndex(L=>L.id===r.selected.value[0]):-1),w=k(()=>r.selected.value.length?r.items.value.findIndex(L=>L.id===r.selected.value[r.selected.value.length-1]):-1);if(Te){let L=-1;ie(()=>[r.selected.value,v.value,p.value,d.value],()=>{cancelAnimationFrame(L),L=requestAnimationFrame(()=>{if(v.value&&p.value){const N=d.value?"width":"height";l.value=v.value[N],u.value=p.value[N],o.value=l.value+1<u.value}if(b.value>=0&&h.el){const N=h.el.children[w.value];S(N,e.centerActive)}})})}const C=te(!1);function S(L,N){let F=0;N?F=ch({containerElement:f.el,isHorizontal:d.value,selectedElement:L}):F=uh({containerElement:f.el,isHorizontal:d.value,isRtl:i.value,selectedElement:L}),R(F)}function R(L){if(!Te||!f.el)return;const N=sn(d.value,f.el),F=to(d.value,i.value,f.el);if(!(ua(d.value,f.el)<=N||Math.abs(L-F)<16)){if(d.value&&i.value&&f.el){const{scrollWidth:ne,offsetWidth:le}=f.el;L=ne-le-L}d.value?g.horizontal(L,y.value):g(L,y.value)}}function x(L){const{scrollTop:N,scrollLeft:F}=L.target;c.value=d.value?F:N}function E(L){if(C.value=!0,!(!o.value||!h.el)){for(const N of L.composedPath())for(const F of h.el.children)if(F===N){S(F);return}}}function O(L){C.value=!1}let B=!1;function _(L){var N;!B&&!C.value&&!(L.relatedTarget&&((N=h.el)!=null&&N.contains(L.relatedTarget)))&&H(),B=!1}function P(){B=!0}function A(L){if(!h.el)return;function N(F){L.preventDefault(),H(F)}d.value?L.key==="ArrowRight"?N(i.value?"prev":"next"):L.key==="ArrowLeft"&&N(i.value?"next":"prev"):L.key==="ArrowDown"?N("next"):L.key==="ArrowUp"&&N("prev"),L.key==="Home"?N("first"):L.key==="End"&&N("last")}function M(L,N){if(!L)return;let F=L;do F=F==null?void 0:F[N==="next"?"nextElementSibling":"previousElementSibling"];while(F!=null&&F.hasAttribute("disabled"));return F}function H(L){if(!h.el)return;let N;if(!L)N=Pi(h.el)[0];else if(L==="next"){if(N=M(h.el.querySelector(":focus"),L),!N)return H("first")}else if(L==="prev"){if(N=M(h.el.querySelector(":focus"),L),!N)return H("last")}else L==="first"?(N=h.el.firstElementChild,N!=null&&N.hasAttribute("disabled")&&(N=M(N,"next"))):L==="last"&&(N=h.el.lastElementChild,N!=null&&N.hasAttribute("disabled")&&(N=M(N,"prev")));N&&N.focus({preventScroll:!0})}function W(L){const N=d.value&&i.value?-1:1,F=(L==="prev"?-N:N)*l.value;let j=c.value+F;if(d.value&&i.value&&f.el){const{scrollWidth:ne,offsetWidth:le}=f.el;j+=ne-le}R(j)}const Y=k(()=>({next:r.next,prev:r.prev,select:r.select,isSelected:r.isSelected})),U=k(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!a.value;case!0:return o.value||Math.abs(c.value)>0;case"mobile":return a.value||o.value||Math.abs(c.value)>0;default:return!a.value&&(o.value||Math.abs(c.value)>0)}}),V=k(()=>Math.abs(c.value)>1),D=k(()=>{if(!f.value)return!1;const L=ua(d.value,f.el),N=dh(d.value,f.el);return L-N-Math.abs(c.value)>1});return ee(()=>m(e.tag,{class:["v-slide-group",{"v-slide-group--vertical":!d.value,"v-slide-group--has-affixes":U.value,"v-slide-group--is-overflowing":o.value},s.value,e.class],style:e.style,tabindex:C.value||r.selected.value.length?-1:0,onFocus:_},{default:()=>{var L,N,F;return[U.value&&m("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!V.value}],onMousedown:P,onClick:()=>V.value&&W("prev")},[((L=n.prev)==null?void 0:L.call(n,Y.value))??m(ia,null,{default:()=>[m(Se,{icon:i.value?e.nextIcon:e.prevIcon},null)]})]),m("div",{key:"container",ref:f,class:"v-slide-group__container",onScroll:x},[m("div",{ref:h,class:"v-slide-group__content",onFocusin:E,onFocusout:O,onKeydown:A},[(N=n.default)==null?void 0:N.call(n,Y.value)])]),U.value&&m("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!D.value}],onMousedown:P,onClick:()=>D.value&&W("next")},[((F=n.next)==null?void 0:F.call(n,Y.value))??m(ia,null,{default:()=>[m(Se,{icon:i.value?e.prevIcon:e.nextIcon},null)]})])]}})),{selected:r.selected,scrollTo:W,scrollOffset:c,focus:H,hasPrev:V,hasNext:D}}}),so=Symbol.for("vuetify:v-chip-group"),fh=$({baseColor:String,column:Boolean,filter:Boolean,valueComparator:{type:Function,default:vt},...io(),...se(),...gs({selectedClass:"v-chip--selected"}),...we(),...Ae(),...St({variant:"tonal"})},"VChipGroup");G()({name:"VChipGroup",props:fh(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:i}=Ne(e),{isSelected:s,select:a,next:r,prev:o,selected:c}=ps(e,so);return jt({VChip:{baseColor:q(e,"baseColor"),color:q(e,"color"),disabled:q(e,"disabled"),filter:q(e,"filter"),variant:q(e,"variant")}}),ee(()=>{const l=ca.filterProps(e);return m(ca,Z(l,{class:["v-chip-group",{"v-chip-group--column":e.column},i.value,e.class],style:e.style}),{default:()=>{var u;return[(u=n.default)==null?void 0:u.call(n,{isSelected:s,select:a,next:r,prev:o,selected:c.value})]}})}),{}}});const vh=$({activeClass:String,appendAvatar:String,appendIcon:ce,baseColor:String,closable:Boolean,closeIcon:{type:ce,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:ce,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:ce,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},modelValue:{type:Boolean,default:!0},onClick:Be(),onClickOnce:Be(),...Ot(),...se(),...Ze(),...qt(),...Lr(),...Je(),...ni(),...un(),...we({tag:"span"}),...Ae(),...St({variant:"tonal"})},"VChip"),mh=G()({name:"VChip",directives:{Ripple:fn},props:vh(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,t){let{attrs:n,emit:i,slots:s}=t;const{t:a}=Qi(),{borderClasses:r}=_t(e),{densityClasses:o}=ut(e),{elevationClasses:c}=Gt(e),{roundedClasses:l}=Qe(e),{sizeClasses:u}=cn(e),{themeClasses:d}=Ne(e),f=pe(e,"modelValue"),v=Vr(e,so,!1),h=ti(e,n),p=k(()=>e.link!==!1&&h.isLink.value),g=k(()=>!e.disabled&&e.link!==!1&&(!!v||e.link||h.isClickable.value)),y=k(()=>({"aria-label":a(e.closeLabel),onClick(E){E.preventDefault(),E.stopPropagation(),f.value=!1,i("click:close",E)}})),b=k(()=>({color:!v||v.isSelected.value?e.color??e.baseColor:e.baseColor,variant:e.variant})),{colorClasses:w,colorStyles:C,variantClasses:S}=hn(b);function R(E){var O;i("click",E),g.value&&((O=h.navigate)==null||O.call(h,E),v==null||v.toggle())}function x(E){(E.key==="Enter"||E.key===" ")&&(E.preventDefault(),R(E))}return()=>{var H;const E=h.isLink.value?"a":e.tag,O=!!(e.appendIcon||e.appendAvatar),B=!!(O||s.append),_=!!(s.close||e.closable),P=!!(s.filter||e.filter)&&v,A=!!(e.prependIcon||e.prependAvatar),M=!!(A||s.prepend);return f.value&&Ve(m(E,Z({class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":g.value,"v-chip--filter":P,"v-chip--pill":e.pill,[`${e.activeClass}`]:e.activeClass&&((H=h.isActive)==null?void 0:H.value)},d.value,r.value,w.value,o.value,c.value,l.value,u.value,S.value,v==null?void 0:v.selectedClass.value,e.class],style:[C.value,e.style],disabled:e.disabled||void 0,draggable:e.draggable,tabindex:g.value?0:void 0,onClick:R,onKeydown:g.value&&!p.value&&x},h.linkProps),{default:()=>{var W;return[dn(g.value,"v-chip"),P&&m(Fr,{key:"filter"},{default:()=>[Ve(m("div",{class:"v-chip__filter"},[s.filter?m(ke,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},s.filter):m(Se,{key:"filter-icon",icon:e.filterIcon},null)]),[[At,v.isSelected.value]])]}),M&&m("div",{key:"prepend",class:"v-chip__prepend"},[s.prepend?m(ke,{key:"prepend-defaults",disabled:!A,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},s.prepend):m(fe,null,[e.prependIcon&&m(Se,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&m(Tt,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),m("div",{class:"v-chip__content","data-no-activator":""},[((W=s.default)==null?void 0:W.call(s,{isSelected:v==null?void 0:v.isSelected.value,selectedClass:v==null?void 0:v.selectedClass.value,select:v==null?void 0:v.select,toggle:v==null?void 0:v.toggle,value:v==null?void 0:v.value.value,disabled:e.disabled}))??Ke(e.text)]),B&&m("div",{key:"append",class:"v-chip__append"},[s.append?m(ke,{key:"append-defaults",disabled:!O,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},s.append):m(fe,null,[e.appendIcon&&m(Se,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&m(Tt,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),_&&m("button",Z({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},y.value),[s.close?m(ke,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},s.close):m(Se,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}}),[[gt("ripple"),g.value&&e.ripple,null]])}}}),Fi=Symbol.for("vuetify:list");function ao(){const e=Ye(Fi,{hasPrepend:te(!1),updateHasPrepend:()=>null}),t={hasPrepend:te(!1),updateHasPrepend:n=>{n&&(t.hasPrepend.value=n)}};return rt(Fi,t),e}function ro(){return Ye(Fi,null)}const Ss=e=>{const t={activate:n=>{let{id:i,value:s,activated:a}=n;return i=Ce(i),e&&!s&&a.size===1&&a.has(i)||(s?a.add(i):a.delete(i)),a},in:(n,i,s)=>{let a=new Set;if(n!=null)for(const r of He(n))a=t.activate({id:r,value:!0,activated:new Set(a),children:i,parents:s});return a},out:n=>Array.from(n)};return t},oo=e=>{const t=Ss(e);return{activate:i=>{let{activated:s,id:a,...r}=i;a=Ce(a);const o=s.has(a)?new Set([a]):new Set;return t.activate({...r,id:a,activated:o})},in:(i,s,a)=>{let r=new Set;if(i!=null){const o=He(i);o.length&&(r=t.in(o.slice(0,1),s,a))}return r},out:(i,s,a)=>t.out(i,s,a)}},gh=e=>{const t=Ss(e);return{activate:i=>{let{id:s,activated:a,children:r,...o}=i;return s=Ce(s),r.has(s)?a:t.activate({id:s,activated:a,children:r,...o})},in:t.in,out:t.out}},ph=e=>{const t=oo(e);return{activate:i=>{let{id:s,activated:a,children:r,...o}=i;return s=Ce(s),r.has(s)?a:t.activate({id:s,activated:a,children:r,...o})},in:t.in,out:t.out}},yh={open:e=>{let{id:t,value:n,opened:i,parents:s}=e;if(n){const a=new Set;a.add(t);let r=s.get(t);for(;r!=null;)a.add(r),r=s.get(r);return a}else return i.delete(t),i},select:()=>null},lo={open:e=>{let{id:t,value:n,opened:i,parents:s}=e;if(n){let a=s.get(t);for(i.add(t);a!=null&&a!==t;)i.add(a),a=s.get(a);return i}else i.delete(t);return i},select:()=>null},bh={open:lo.open,select:e=>{let{id:t,value:n,opened:i,parents:s}=e;if(!n)return i;const a=[];let r=s.get(t);for(;r!=null;)a.push(r),r=s.get(r);return new Set(a)}},ws=e=>{const t={select:n=>{let{id:i,value:s,selected:a}=n;if(i=Ce(i),e&&!s){const r=Array.from(a.entries()).reduce((o,c)=>{let[l,u]=c;return u==="on"&&o.push(l),o},[]);if(r.length===1&&r[0]===i)return a}return a.set(i,s?"on":"off"),a},in:(n,i,s)=>{const a=new Map;for(const r of n||[])t.select({id:r,value:!0,selected:a,children:i,parents:s});return a},out:n=>{const i=[];for(const[s,a]of n.entries())a==="on"&&i.push(s);return i}};return t},uo=e=>{const t=ws(e);return{select:i=>{let{selected:s,id:a,...r}=i;a=Ce(a);const o=s.has(a)?new Map([[a,s.get(a)]]):new Map;return t.select({...r,id:a,selected:o})},in:(i,s,a)=>i!=null&&i.length?t.in(i.slice(0,1),s,a):new Map,out:(i,s,a)=>t.out(i,s,a)}},Sh=e=>{const t=ws(e);return{select:i=>{let{id:s,selected:a,children:r,...o}=i;return s=Ce(s),r.has(s)?a:t.select({id:s,selected:a,children:r,...o})},in:t.in,out:t.out}},wh=e=>{const t=uo(e);return{select:i=>{let{id:s,selected:a,children:r,...o}=i;return s=Ce(s),r.has(s)?a:t.select({id:s,selected:a,children:r,...o})},in:t.in,out:t.out}},co=e=>{const t={select:n=>{let{id:i,value:s,selected:a,children:r,parents:o}=n;i=Ce(i);const c=new Map(a),l=[i];for(;l.length;){const d=l.shift();a.set(Ce(d),s?"on":"off"),r.has(d)&&l.push(...r.get(d))}let u=Ce(o.get(i));for(;u;){const d=r.get(u),f=d.every(h=>a.get(Ce(h))==="on"),v=d.every(h=>!a.has(Ce(h))||a.get(Ce(h))==="off");a.set(u,f?"on":v?"off":"indeterminate"),u=Ce(o.get(u))}return e&&!s&&Array.from(a.entries()).reduce((f,v)=>{let[h,p]=v;return p==="on"&&f.push(h),f},[]).length===0?c:a},in:(n,i,s)=>{let a=new Map;for(const r of n||[])a=t.select({id:r,value:!0,selected:a,children:i,parents:s});return a},out:(n,i)=>{const s=[];for(const[a,r]of n.entries())r==="on"&&!i.has(a)&&s.push(a);return s}};return t},Ch=e=>{const t=co(e);return{select:t.select,in:t.in,out:(i,s,a)=>{const r=[];for(const[o,c]of i.entries())if(c==="on"){if(a.has(o)){const l=a.get(o);if(i.get(l)==="on")continue}r.push(o)}return r}}},an=Symbol.for("vuetify:nested"),ho={id:te(),root:{register:()=>null,unregister:()=>null,parents:z(new Map),children:z(new Map),open:()=>null,openOnSelect:()=>null,activate:()=>null,select:()=>null,activatable:z(!1),selectable:z(!1),opened:z(new Set),activated:z(new Set),selected:z(new Map),selectedValues:z([]),getPath:()=>[]}},kh=$({activatable:Boolean,selectable:Boolean,activeStrategy:[String,Function,Object],selectStrategy:[String,Function,Object],openStrategy:[String,Object],opened:null,activated:null,selected:null,mandatory:Boolean},"nested"),xh=e=>{let t=!1;const n=z(new Map),i=z(new Map),s=pe(e,"opened",e.opened,h=>new Set(h),h=>[...h.values()]),a=k(()=>{if(typeof e.activeStrategy=="object")return e.activeStrategy;if(typeof e.activeStrategy=="function")return e.activeStrategy(e.mandatory);switch(e.activeStrategy){case"leaf":return gh(e.mandatory);case"single-leaf":return ph(e.mandatory);case"independent":return Ss(e.mandatory);case"single-independent":default:return oo(e.mandatory)}}),r=k(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;if(typeof e.selectStrategy=="function")return e.selectStrategy(e.mandatory);switch(e.selectStrategy){case"single-leaf":return wh(e.mandatory);case"leaf":return Sh(e.mandatory);case"independent":return ws(e.mandatory);case"single-independent":return uo(e.mandatory);case"trunk":return Ch(e.mandatory);case"classic":default:return co(e.mandatory)}}),o=k(()=>{if(typeof e.openStrategy=="object")return e.openStrategy;switch(e.openStrategy){case"list":return bh;case"single":return yh;case"multiple":default:return lo}}),c=pe(e,"activated",e.activated,h=>a.value.in(h,n.value,i.value),h=>a.value.out(h,n.value,i.value)),l=pe(e,"selected",e.selected,h=>r.value.in(h,n.value,i.value),h=>r.value.out(h,n.value,i.value));Xe(()=>{t=!0});function u(h){const p=[];let g=h;for(;g!=null;)p.unshift(g),g=i.value.get(g);return p}const d=We("nested"),f=new Set,v={id:te(),root:{opened:s,activatable:q(e,"activatable"),selectable:q(e,"selectable"),activated:c,selected:l,selectedValues:k(()=>{const h=[];for(const[p,g]of l.value.entries())g==="on"&&h.push(p);return h}),register:(h,p,g)=>{if(f.has(h)){u(h).map(String).join(" -> "),u(p).concat(h).map(String).join(" -> ");return}else f.add(h);p&&h!==p&&i.value.set(h,p),g&&n.value.set(h,[]),p!=null&&n.value.set(p,[...n.value.get(p)||[],h])},unregister:h=>{if(t)return;f.delete(h),n.value.delete(h);const p=i.value.get(h);if(p){const g=n.value.get(p)??[];n.value.set(p,g.filter(y=>y!==h))}i.value.delete(h)},open:(h,p,g)=>{d.emit("click:open",{id:h,value:p,path:u(h),event:g});const y=o.value.open({id:h,value:p,opened:new Set(s.value),children:n.value,parents:i.value,event:g});y&&(s.value=y)},openOnSelect:(h,p,g)=>{const y=o.value.select({id:h,value:p,selected:new Map(l.value),opened:new Set(s.value),children:n.value,parents:i.value,event:g});y&&(s.value=y)},select:(h,p,g)=>{d.emit("click:select",{id:h,value:p,path:u(h),event:g});const y=r.value.select({id:h,value:p,selected:new Map(l.value),children:n.value,parents:i.value,event:g});y&&(l.value=y),v.root.openOnSelect(h,p,g)},activate:(h,p,g)=>{if(!e.activatable)return v.root.select(h,!0,g);d.emit("click:activate",{id:h,value:p,path:u(h),event:g});const y=a.value.activate({id:h,value:p,activated:new Set(c.value),children:n.value,parents:i.value,event:g});if(y.size!==c.value.size)c.value=y;else{for(const b of y)if(!c.value.has(b)){c.value=y;return}for(const b of c.value)if(!y.has(b)){c.value=y;return}}},children:n,parents:i,getPath:u}};return rt(an,v),v.root},fo=(e,t)=>{const n=Ye(an,ho),i=Symbol("nested item"),s=k(()=>e.value!==void 0?e.value:i),a={...n,id:s,open:(r,o)=>n.root.open(s.value,r,o),openOnSelect:(r,o)=>n.root.openOnSelect(s.value,r,o),isOpen:k(()=>n.root.opened.value.has(s.value)),parent:k(()=>n.root.parents.value.get(s.value)),activate:(r,o)=>n.root.activate(s.value,r,o),isActivated:k(()=>n.root.activated.value.has(Ce(s.value))),select:(r,o)=>n.root.select(s.value,r,o),isSelected:k(()=>n.root.selected.value.get(Ce(s.value))==="on"),isIndeterminate:k(()=>n.root.selected.value.get(Ce(s.value))==="indeterminate"),isLeaf:k(()=>!n.root.children.value.get(s.value)),isGroupActivator:n.isGroupActivator};return Hn(()=>{!n.isGroupActivator&&n.root.register(s.value,n.id.value,t)}),Xe(()=>{!n.isGroupActivator&&n.root.unregister(s.value)}),t&&rt(an,a),a},Eh=()=>{const e=Ye(an,ho);rt(an,{...e,isGroupActivator:!0})},Rh=tl({name:"VListGroupActivator",setup(e,t){let{slots:n}=t;return Eh(),()=>{var i;return(i=n.default)==null?void 0:i.call(n)}}}),Ph=$({activeColor:String,baseColor:String,color:String,collapseIcon:{type:ce,default:"$collapse"},expandIcon:{type:ce,default:"$expand"},prependIcon:ce,appendIcon:ce,fluid:Boolean,subgroup:Boolean,title:String,value:null,...se(),...we()},"VListGroup"),da=G()({name:"VListGroup",props:Ph(),setup(e,t){let{slots:n}=t;const{isOpen:i,open:s,id:a}=fo(q(e,"value"),!0),r=k(()=>`v-list-group--id-${String(a.value)}`),o=ro(),{isBooted:c}=gl();function l(v){var h;v.stopPropagation(),!["INPUT","TEXTAREA"].includes((h=v.target)==null?void 0:h.tagName)&&s(!i.value,v)}const u=k(()=>({onClick:l,class:"v-list-group__header",id:r.value})),d=k(()=>i.value?e.collapseIcon:e.expandIcon),f=k(()=>({VListItem:{active:i.value,activeColor:e.activeColor,baseColor:e.baseColor,color:e.color,prependIcon:e.prependIcon||e.subgroup&&d.value,appendIcon:e.appendIcon||!e.subgroup&&d.value,title:e.title,value:e.value}}));return ee(()=>m(e.tag,{class:["v-list-group",{"v-list-group--prepend":o==null?void 0:o.hasPrepend.value,"v-list-group--fluid":e.fluid,"v-list-group--subgroup":e.subgroup,"v-list-group--open":i.value},e.class],style:e.style},{default:()=>[n.activator&&m(ke,{defaults:f.value},{default:()=>[m(Rh,null,{default:()=>[n.activator({props:u.value,isOpen:i.value})]})]}),m(nt,{transition:{component:ed},disabled:!c.value},{default:()=>{var v;return[Ve(m("div",{class:"v-list-group__items",role:"group","aria-labelledby":r.value},[(v=n.default)==null?void 0:v.call(n)]),[[At,i.value]])]}})]})),{isOpen:i}}}),Th=$({opacity:[Number,String],...se(),...we()},"VListItemSubtitle"),Ah=G()({name:"VListItemSubtitle",props:Th(),setup(e,t){let{slots:n}=t;return ee(()=>m(e.tag,{class:["v-list-item-subtitle",e.class],style:[{"--v-list-item-subtitle-opacity":e.opacity},e.style]},n)),{}}}),Oh=is("v-list-item-title"),_h=$({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:ce,baseColor:String,disabled:Boolean,lines:[Boolean,String],link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:ce,ripple:{type:[Boolean,Object],default:!0},slim:Boolean,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},value:null,onClick:Be(),onClickOnce:Be(),...Ot(),...se(),...Ze(),...lt(),...qt(),...Je(),...ni(),...we(),...Ae(),...St({variant:"text"})},"VListItem"),$n=G()({name:"VListItem",directives:{Ripple:fn},props:_h(),emits:{click:e=>!0},setup(e,t){let{attrs:n,slots:i,emit:s}=t;const a=ti(e,n),r=k(()=>e.value===void 0?a.href.value:e.value),{activate:o,isActivated:c,select:l,isOpen:u,isSelected:d,isIndeterminate:f,isGroupActivator:v,root:h,parent:p,openOnSelect:g,id:y}=fo(r,!1),b=ro(),w=k(()=>{var j;return e.active!==!1&&(e.active||((j=a.isActive)==null?void 0:j.value)||(h.activatable.value?c.value:d.value))}),C=k(()=>e.link!==!1&&a.isLink.value),S=k(()=>!!b&&(h.selectable.value||h.activatable.value||e.value!=null)),R=k(()=>!e.disabled&&e.link!==!1&&(e.link||a.isClickable.value||S.value)),x=k(()=>e.rounded||e.nav),E=k(()=>e.color??e.activeColor),O=k(()=>({color:w.value?E.value??e.baseColor:e.baseColor,variant:e.variant}));ie(()=>{var j;return(j=a.isActive)==null?void 0:j.value},j=>{j&&B()}),Hn(()=>{var j;(j=a.isActive)!=null&&j.value&&B()});function B(){p.value!=null&&h.open(p.value,!0),g(!0)}const{themeClasses:_}=Ne(e),{borderClasses:P}=_t(e),{colorClasses:A,colorStyles:M,variantClasses:H}=hn(O),{densityClasses:W}=ut(e),{dimensionStyles:Y}=ot(e),{elevationClasses:U}=Gt(e),{roundedClasses:V}=Qe(x),D=k(()=>e.lines?`v-list-item--${e.lines}-line`:void 0),L=k(()=>({isActive:w.value,select:l,isOpen:u.value,isSelected:d.value,isIndeterminate:f.value}));function N(j){var ne,le;s("click",j),!["INPUT","TEXTAREA"].includes((ne=j.target)==null?void 0:ne.tagName)&&R.value&&((le=a.navigate)==null||le.call(a,j),!v&&(h.activatable.value?o(!c.value,j):(h.selectable.value||e.value!=null)&&l(!d.value,j)))}function F(j){const ne=j.target;["INPUT","TEXTAREA"].includes(ne.tagName)||(j.key==="Enter"||j.key===" ")&&(j.preventDefault(),j.target.dispatchEvent(new MouseEvent("click",j)))}return ee(()=>{const j=C.value?"a":e.tag,ne=i.title||e.title!=null,le=i.subtitle||e.subtitle!=null,X=!!(e.appendAvatar||e.appendIcon),re=!!(X||i.append),Oe=!!(e.prependAvatar||e.prependIcon),ge=!!(Oe||i.prepend);return b==null||b.updateHasPrepend(ge),e.activeColor&&nl("active-color",["color","base-color"]),Ve(m(j,Z({class:["v-list-item",{"v-list-item--active":w.value,"v-list-item--disabled":e.disabled,"v-list-item--link":R.value,"v-list-item--nav":e.nav,"v-list-item--prepend":!ge&&(b==null?void 0:b.hasPrepend.value),"v-list-item--slim":e.slim,[`${e.activeClass}`]:e.activeClass&&w.value},_.value,P.value,A.value,W.value,U.value,D.value,V.value,H.value,e.class],style:[M.value,Y.value,e.style],tabindex:R.value?b?-2:0:void 0,"aria-selected":S.value?h.activatable.value?c.value:h.selectable.value?d.value:w.value:void 0,onClick:N,onKeydown:R.value&&!C.value&&F},a.linkProps),{default:()=>{var dt;return[dn(R.value||w.value,"v-list-item"),ge&&m("div",{key:"prepend",class:"v-list-item__prepend"},[i.prepend?m(ke,{key:"prepend-defaults",disabled:!Oe,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon},VListItemAction:{start:!0}}},{default:()=>{var De;return[(De=i.prepend)==null?void 0:De.call(i,L.value)]}}):m(fe,null,[e.prependAvatar&&m(Tt,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&m(Se,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)]),m("div",{class:"v-list-item__spacer"},null)]),m("div",{class:"v-list-item__content","data-no-activator":""},[ne&&m(Oh,{key:"title"},{default:()=>{var De;return[((De=i.title)==null?void 0:De.call(i,{title:e.title}))??Ke(e.title)]}}),le&&m(Ah,{key:"subtitle"},{default:()=>{var De;return[((De=i.subtitle)==null?void 0:De.call(i,{subtitle:e.subtitle}))??Ke(e.subtitle)]}}),(dt=i.default)==null?void 0:dt.call(i,L.value)]),re&&m("div",{key:"append",class:"v-list-item__append"},[i.append?m(ke,{key:"append-defaults",disabled:!X,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{end:!0}}},{default:()=>{var De;return[(De=i.append)==null?void 0:De.call(i,L.value)]}}):m(fe,null,[e.appendIcon&&m(Se,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&m(Tt,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)]),m("div",{class:"v-list-item__spacer"},null)])]}}),[[gt("ripple"),R.value&&e.ripple]])}),{activate:o,isActivated:c,isGroupActivator:v,isSelected:d,list:b,select:l,root:h,id:y,link:a}}}),Lh=$({color:String,inset:Boolean,sticky:Boolean,title:String,...se(),...we()},"VListSubheader"),Vh=G()({name:"VListSubheader",props:Lh(),setup(e,t){let{slots:n}=t;const{textColorClasses:i,textColorStyles:s}=st(q(e,"color"));return ee(()=>{const a=!!(n.default||e.title);return m(e.tag,{class:["v-list-subheader",{"v-list-subheader--inset":e.inset,"v-list-subheader--sticky":e.sticky},i.value,e.class],style:[{textColorStyles:s},e.style]},{default:()=>{var r;return[a&&m("div",{class:"v-list-subheader__text"},[((r=n.default)==null?void 0:r.call(n))??e.title])]}})}),{}}}),Dh=$({color:String,inset:Boolean,length:[Number,String],opacity:[Number,String],thickness:[Number,String],vertical:Boolean,...se(),...Ae()},"VDivider"),Bh=G()({name:"VDivider",props:Dh(),setup(e,t){let{attrs:n,slots:i}=t;const{themeClasses:s}=Ne(e),{textColorClasses:a,textColorStyles:r}=st(q(e,"color")),o=k(()=>{const c={};return e.length&&(c[e.vertical?"height":"width"]=ae(e.length)),e.thickness&&(c[e.vertical?"borderRightWidth":"borderTopWidth"]=ae(e.thickness)),c});return ee(()=>{const c=m("hr",{class:[{"v-divider":!0,"v-divider--inset":e.inset,"v-divider--vertical":e.vertical},s.value,a.value,e.class],style:[o.value,r.value,{"--v-border-opacity":e.opacity},e.style],"aria-orientation":!n.role||n.role==="separator"?e.vertical?"vertical":"horizontal":void 0,role:`${n.role||"separator"}`},null);return i.default?m("div",{class:["v-divider__wrapper",{"v-divider__wrapper--vertical":e.vertical,"v-divider__wrapper--inset":e.inset}]},[c,m("div",{class:"v-divider__content"},[i.default()]),c]):c}),{}}}),Mh=$({items:Array,returnObject:Boolean},"VListChildren"),vo=G()({name:"VListChildren",props:Mh(),setup(e,t){let{slots:n}=t;return ao(),()=>{var i,s;return((i=n.default)==null?void 0:i.call(n))??((s=e.items)==null?void 0:s.map(a=>{var f,v;let{children:r,props:o,type:c,raw:l}=a;if(c==="divider")return((f=n.divider)==null?void 0:f.call(n,{props:o}))??m(Bh,o,null);if(c==="subheader")return((v=n.subheader)==null?void 0:v.call(n,{props:o}))??m(Vh,o,null);const u={subtitle:n.subtitle?h=>{var p;return(p=n.subtitle)==null?void 0:p.call(n,{...h,item:l})}:void 0,prepend:n.prepend?h=>{var p;return(p=n.prepend)==null?void 0:p.call(n,{...h,item:l})}:void 0,append:n.append?h=>{var p;return(p=n.append)==null?void 0:p.call(n,{...h,item:l})}:void 0,title:n.title?h=>{var p;return(p=n.title)==null?void 0:p.call(n,{...h,item:l})}:void 0},d=da.filterProps(o);return r?m(da,Z({value:o==null?void 0:o.value},d),{activator:h=>{let{props:p}=h;const g={...o,...p,value:e.returnObject?l:o.value};return n.header?n.header({props:g}):m($n,g,u)},default:()=>m(vo,{items:r,returnObject:e.returnObject},n)}):n.item?n.item({props:o}):m($n,Z(o,{value:e.returnObject?l:o.value}),u)}))}}}),mo=$({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},returnObject:Boolean,valueComparator:Function},"list-items");function Wi(e,t){const n=Ge(t,e.itemTitle,t),i=Ge(t,e.itemValue,n),s=Ge(t,e.itemChildren),a=e.itemProps===!0?typeof t=="object"&&t!=null&&!Array.isArray(t)?"children"in t?Wt(t,["children"]):t:void 0:Ge(t,e.itemProps),r={title:n,value:i,...a};return{title:String(r.title??""),value:r.value,props:r,children:Array.isArray(s)?go(e,s):void 0,raw:t}}function go(e,t){const n=es(e,["itemTitle","itemValue","itemChildren","itemProps","returnObject","valueComparator"]),i=[];for(const s of t)i.push(Wi(n,s));return i}function Nh(e){const t=k(()=>go(e,e.items)),n=k(()=>t.value.some(o=>o.value===null)),i=te(new Map),s=te([]);it(()=>{const o=t.value,c=new Map,l=[];for(let u=0;u<o.length;u++){const d=o[u];if(Ca(d.value)||d.value===null){let f=c.get(d.value);f||(f=[],c.set(d.value,f)),f.push(d)}else l.push(d)}i.value=c,s.value=l});function a(o){const c=i.value,l=t.value,u=s.value,d=n.value,f=e.returnObject,v=!!e.valueComparator,h=e.valueComparator||vt,p=es(e,["itemTitle","itemValue","itemChildren","itemProps","returnObject","valueComparator"]),g=[];e:for(const y of o){if(!d&&y===null)continue;if(f&&typeof y=="string"){g.push(Wi(p,y));continue}const b=c.get(y);if(v||!b){for(const w of v?l:u)if(h(y,w.value)){g.push(w);continue e}g.push(Wi(p,y));continue}g.push(...b)}return g}function r(o){return e.returnObject?o.map(c=>{let{raw:l}=c;return l}):o.map(c=>{let{value:l}=c;return l})}return{items:t,transformIn:a,transformOut:r}}function Ih(e,t){const n=Ge(t,e.itemType,"item"),i=Ca(t)?t:Ge(t,e.itemTitle),s=Ge(t,e.itemValue,void 0),a=Ge(t,e.itemChildren),r=e.itemProps===!0?Wt(t,["children"]):Ge(t,e.itemProps),o={title:i,value:s,...r};return{type:n,title:o.title,value:o.value,props:o,children:n==="item"&&a?po(e,a):void 0,raw:t}}function po(e,t){const n=[];for(const i of t)n.push(Ih(e,i));return n}function $h(e){return{items:k(()=>po(e,e.items))}}const jh=$({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,expandIcon:ce,collapseIcon:ce,lines:{type:[Boolean,String],default:"one"},slim:Boolean,nav:Boolean,"onClick:open":Be(),"onClick:select":Be(),"onUpdate:opened":Be(),...kh({selectStrategy:"single-leaf",openStrategy:"list"}),...Ot(),...se(),...Ze(),...lt(),...qt(),itemType:{type:String,default:"type"},...mo(),...Je(),...we(),...Ae(),...St({variant:"text"})},"VList"),Fh=G()({name:"VList",props:jh(),emits:{"update:selected":e=>!0,"update:activated":e=>!0,"update:opened":e=>!0,"click:open":e=>!0,"click:activate":e=>!0,"click:select":e=>!0},setup(e,t){let{slots:n}=t;const{items:i}=$h(e),{themeClasses:s}=Ne(e),{backgroundColorClasses:a,backgroundColorStyles:r}=mt(q(e,"bgColor")),{borderClasses:o}=_t(e),{densityClasses:c}=ut(e),{dimensionStyles:l}=ot(e),{elevationClasses:u}=Gt(e),{roundedClasses:d}=Qe(e),{children:f,open:v,parents:h,select:p,getPath:g}=xh(e),y=k(()=>e.lines?`v-list--${e.lines}-line`:void 0),b=q(e,"activeColor"),w=q(e,"baseColor"),C=q(e,"color");ao(),jt({VListGroup:{activeColor:b,baseColor:w,color:C,expandIcon:q(e,"expandIcon"),collapseIcon:q(e,"collapseIcon")},VListItem:{activeClass:q(e,"activeClass"),activeColor:b,baseColor:w,color:C,density:q(e,"density"),disabled:q(e,"disabled"),lines:q(e,"lines"),nav:q(e,"nav"),slim:q(e,"slim"),variant:q(e,"variant")}});const S=te(!1),R=z();function x(A){S.value=!0}function E(A){S.value=!1}function O(A){var M;!S.value&&!(A.relatedTarget&&((M=R.value)!=null&&M.contains(A.relatedTarget)))&&P()}function B(A){const M=A.target;if(!(!R.value||["INPUT","TEXTAREA"].includes(M.tagName))){if(A.key==="ArrowDown")P("next");else if(A.key==="ArrowUp")P("prev");else if(A.key==="Home")P("first");else if(A.key==="End")P("last");else return;A.preventDefault()}}function _(A){S.value=!0}function P(A){if(R.value)return kn(R.value,A)}return ee(()=>m(e.tag,{ref:R,class:["v-list",{"v-list--disabled":e.disabled,"v-list--nav":e.nav,"v-list--slim":e.slim},s.value,a.value,o.value,c.value,u.value,y.value,d.value,e.class],style:[r.value,l.value,e.style],tabindex:e.disabled?-1:0,role:"listbox","aria-activedescendant":void 0,onFocusin:x,onFocusout:E,onFocus:O,onKeydown:B,onMousedown:_},{default:()=>[m(vo,{items:i.value,returnObject:e.returnObject},n)]})),{open:v,select:p,focus:P,children:f,parents:h,getPath:g}}});function Si(e,t){return{x:e.x+t.x,y:e.y+t.y}}function Wh(e,t){return{x:e.x-t.x,y:e.y-t.y}}function ha(e,t){if(e.side==="top"||e.side==="bottom"){const{side:n,align:i}=e,s=i==="left"?0:i==="center"?t.width/2:i==="right"?t.width:i,a=n==="top"?0:n==="bottom"?t.height:n;return Si({x:s,y:a},t)}else if(e.side==="left"||e.side==="right"){const{side:n,align:i}=e,s=n==="left"?0:n==="right"?t.width:n,a=i==="top"?0:i==="center"?t.height/2:i==="bottom"?t.height:i;return Si({x:s,y:a},t)}return Si({x:t.width/2,y:t.height/2},t)}const yo={static:Uh,connected:Gh},zh=$({locationStrategy:{type:[String,Function],default:"static",validator:e=>typeof e=="function"||e in yo},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"VOverlay-location-strategies");function Hh(e,t){const n=z({}),i=z();Te&&Rt(()=>!!(t.isActive.value&&e.locationStrategy),a=>{var r,o;ie(()=>e.locationStrategy,a),je(()=>{window.removeEventListener("resize",s),i.value=void 0}),window.addEventListener("resize",s,{passive:!0}),typeof e.locationStrategy=="function"?i.value=(r=e.locationStrategy(t,e,n))==null?void 0:r.updateLocation:i.value=(o=yo[e.locationStrategy](t,e,n))==null?void 0:o.updateLocation});function s(a){var r;(r=i.value)==null||r.call(i,a)}return{contentStyles:n,updateLocation:i}}function Uh(){}function qh(e,t){const n=ns(e);return t?n.x+=parseFloat(e.style.right||0):n.x-=parseFloat(e.style.left||0),n.y-=parseFloat(e.style.top||0),n}function Gh(e,t,n){(Array.isArray(e.target.value)||kl(e.target.value))&&Object.assign(n.value,{position:"fixed",top:0,[e.isRtl.value?"right":"left"]:0});const{preferredAnchor:s,preferredOrigin:a}=Xi(()=>{const h=Ti(t.location,e.isRtl.value),p=t.origin==="overlap"?h:t.origin==="auto"?oi(h):Ti(t.origin,e.isRtl.value);return h.side===p.side&&h.align===li(p).align?{preferredAnchor:Os(h),preferredOrigin:Os(p)}:{preferredAnchor:h,preferredOrigin:p}}),[r,o,c,l]=["minWidth","minHeight","maxWidth","maxHeight"].map(h=>k(()=>{const p=parseFloat(t[h]);return isNaN(p)?1/0:p})),u=k(()=>{if(Array.isArray(t.offset))return t.offset;if(typeof t.offset=="string"){const h=t.offset.split(" ").map(parseFloat);return h.length<2&&h.push(0),h}return typeof t.offset=="number"?[t.offset,0]:[0,0]});let d=!1;const f=new ResizeObserver(()=>{d&&v()});ie([e.target,e.contentEl],(h,p)=>{let[g,y]=h,[b,w]=p;b&&!Array.isArray(b)&&f.unobserve(b),g&&!Array.isArray(g)&&f.observe(g),w&&f.unobserve(w),y&&f.observe(y)},{immediate:!0}),je(()=>{f.disconnect()});function v(){if(d=!1,requestAnimationFrame(()=>d=!0),!e.target.value||!e.contentEl.value)return;const h=Pa(e.target.value),p=qh(e.contentEl.value,e.isRtl.value),g=Dn(e.contentEl.value),y=12;g.length||(g.push(document.documentElement),e.contentEl.value.style.top&&e.contentEl.value.style.left||(p.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),p.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const b=g.reduce((_,P)=>{const A=P.getBoundingClientRect(),M=new kt({x:P===document.documentElement?0:A.x,y:P===document.documentElement?0:A.y,width:P.clientWidth,height:P.clientHeight});return _?new kt({x:Math.max(_.left,M.left),y:Math.max(_.top,M.top),width:Math.min(_.right,M.right)-Math.max(_.left,M.left),height:Math.min(_.bottom,M.bottom)-Math.max(_.top,M.top)}):M},void 0);b.x+=y,b.y+=y,b.width-=y*2,b.height-=y*2;let w={anchor:s.value,origin:a.value};function C(_){const P=new kt(p),A=ha(_.anchor,h),M=ha(_.origin,P);let{x:H,y:W}=Wh(A,M);switch(_.anchor.side){case"top":W-=u.value[0];break;case"bottom":W+=u.value[0];break;case"left":H-=u.value[0];break;case"right":H+=u.value[0];break}switch(_.anchor.align){case"top":W-=u.value[1];break;case"bottom":W+=u.value[1];break;case"left":H-=u.value[1];break;case"right":H+=u.value[1];break}return P.x+=H,P.y+=W,P.width=Math.min(P.width,c.value),P.height=Math.min(P.height,l.value),{overflows:Ls(P,b),x:H,y:W}}let S=0,R=0;const x={x:0,y:0},E={x:!1,y:!1};let O=-1;for(;!(O++>10);){const{x:_,y:P,overflows:A}=C(w);S+=_,R+=P,p.x+=_,p.y+=P;{const M=_s(w.anchor),H=A.x.before||A.x.after,W=A.y.before||A.y.after;let Y=!1;if(["x","y"].forEach(U=>{if(U==="x"&&H&&!E.x||U==="y"&&W&&!E.y){const V={anchor:{...w.anchor},origin:{...w.origin}},D=U==="x"?M==="y"?li:oi:M==="y"?oi:li;V.anchor=D(V.anchor),V.origin=D(V.origin);const{overflows:L}=C(V);(L[U].before<=A[U].before&&L[U].after<=A[U].after||L[U].before+L[U].after<(A[U].before+A[U].after)/2)&&(w=V,Y=E[U]=!0)}}),Y)continue}A.x.before&&(S+=A.x.before,p.x+=A.x.before),A.x.after&&(S-=A.x.after,p.x-=A.x.after),A.y.before&&(R+=A.y.before,p.y+=A.y.before),A.y.after&&(R-=A.y.after,p.y-=A.y.after);{const M=Ls(p,b);x.x=b.width-M.x.before-M.x.after,x.y=b.height-M.y.before-M.y.after,S+=M.x.before,p.x+=M.x.before,R+=M.y.before,p.y+=M.y.before}break}const B=_s(w.anchor);return Object.assign(n.value,{"--v-overlay-anchor-origin":`${w.anchor.side} ${w.anchor.align}`,transformOrigin:`${w.origin.side} ${w.origin.align}`,top:ae(wi(R)),left:e.isRtl.value?void 0:ae(wi(S)),right:e.isRtl.value?ae(wi(-S)):void 0,minWidth:ae(B==="y"?Math.min(r.value,h.width):r.value),maxWidth:ae(fa(ft(x.x,r.value===1/0?0:r.value,c.value))),maxHeight:ae(fa(ft(x.y,o.value===1/0?0:o.value,l.value)))}),{available:x,contentBox:p}}return ie(()=>[s.value,a.value,t.offset,t.minWidth,t.minHeight,t.maxWidth,t.maxHeight],()=>v()),Le(()=>{const h=v();if(!h)return;const{available:p,contentBox:g}=h;g.height>p.y&&requestAnimationFrame(()=>{v(),requestAnimationFrame(()=>{v()})})}),{updateLocation:v}}function wi(e){return Math.round(e*devicePixelRatio)/devicePixelRatio}function fa(e){return Math.ceil(e*devicePixelRatio)/devicePixelRatio}let zi=!0;const jn=[];function Kh(e){!zi||jn.length?(jn.push(e),Hi()):(zi=!1,e(),Hi())}let va=-1;function Hi(){cancelAnimationFrame(va),va=requestAnimationFrame(()=>{const e=jn.shift();e&&e(),jn.length?Hi():zi=!0})}const On={none:null,close:Jh,block:Qh,reposition:Zh},Xh=$({scrollStrategy:{type:[String,Function],default:"block",validator:e=>typeof e=="function"||e in On}},"VOverlay-scroll-strategies");function Yh(e,t){if(!Te)return;let n;it(async()=>{n==null||n.stop(),t.isActive.value&&e.scrollStrategy&&(n=ka(),await new Promise(i=>setTimeout(i)),n.active&&n.run(()=>{var i;typeof e.scrollStrategy=="function"?e.scrollStrategy(t,e,n):(i=On[e.scrollStrategy])==null||i.call(On,t,e,n)}))}),je(()=>{n==null||n.stop()})}function Jh(e){function t(n){e.isActive.value=!1}bo(e.targetEl.value??e.contentEl.value,t)}function Qh(e,t){var r;const n=(r=e.root.value)==null?void 0:r.offsetParent,i=[...new Set([...Dn(e.targetEl.value,t.contained?n:void 0),...Dn(e.contentEl.value,t.contained?n:void 0)])].filter(o=>!o.classList.contains("v-overlay-scroll-blocked")),s=window.innerWidth-document.documentElement.offsetWidth,a=(o=>ss(o)&&o)(n||document.documentElement);a&&e.root.value.classList.add("v-overlay--scroll-blocked"),i.forEach((o,c)=>{o.style.setProperty("--v-body-scroll-x",ae(-o.scrollLeft)),o.style.setProperty("--v-body-scroll-y",ae(-o.scrollTop)),o!==document.documentElement&&o.style.setProperty("--v-scrollbar-offset",ae(s)),o.classList.add("v-overlay-scroll-blocked")}),je(()=>{i.forEach((o,c)=>{const l=parseFloat(o.style.getPropertyValue("--v-body-scroll-x")),u=parseFloat(o.style.getPropertyValue("--v-body-scroll-y")),d=o.style.scrollBehavior;o.style.scrollBehavior="auto",o.style.removeProperty("--v-body-scroll-x"),o.style.removeProperty("--v-body-scroll-y"),o.style.removeProperty("--v-scrollbar-offset"),o.classList.remove("v-overlay-scroll-blocked"),o.scrollLeft=-l,o.scrollTop=-u,o.style.scrollBehavior=d}),a&&e.root.value.classList.remove("v-overlay--scroll-blocked")})}function Zh(e,t,n){let i=!1,s=-1,a=-1;function r(o){Kh(()=>{var u,d;const c=performance.now();(d=(u=e.updateLocation).value)==null||d.call(u,o),i=(performance.now()-c)/(1e3/60)>2})}a=(typeof requestIdleCallback>"u"?o=>o():requestIdleCallback)(()=>{n.run(()=>{bo(e.targetEl.value??e.contentEl.value,o=>{i?(cancelAnimationFrame(s),s=requestAnimationFrame(()=>{s=requestAnimationFrame(()=>{r(o)})})):r(o)})})}),je(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(a),cancelAnimationFrame(s)})}function bo(e,t){const n=[document,...Dn(e)];n.forEach(i=>{i.addEventListener("scroll",t,{passive:!0})}),je(()=>{n.forEach(i=>{i.removeEventListener("scroll",t)})})}const Ui=Symbol.for("vuetify:v-menu"),ef=$({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function tf(e,t){let n=()=>{};function i(r){n==null||n();const o=Number(r?e.openDelay:e.closeDelay);return new Promise(c=>{n=il(o,()=>{t==null||t(r),c(r)})})}function s(){return i(!0)}function a(){return i(!1)}return{clearDelay:n,runOpenDelay:s,runCloseDelay:a}}const nf=$({target:[String,Object],activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...ef()},"VOverlay-activator");function sf(e,t){let{isActive:n,isTop:i,contentEl:s}=t;const a=We("useActivator"),r=z();let o=!1,c=!1,l=!0;const u=k(()=>e.openOnFocus||e.openOnFocus==null&&e.openOnHover),d=k(()=>e.openOnClick||e.openOnClick==null&&!e.openOnHover&&!u.value),{runOpenDelay:f,runCloseDelay:v}=tf(e,E=>{E===(e.openOnHover&&o||u.value&&c)&&!(e.openOnHover&&n.value&&!i.value)&&(n.value!==E&&(l=!0),n.value=E)}),h=z(),p={onClick:E=>{E.stopPropagation(),r.value=E.currentTarget||E.target,n.value||(h.value=[E.clientX,E.clientY]),n.value=!n.value},onMouseenter:E=>{var O;(O=E.sourceCapabilities)!=null&&O.firesTouchEvents||(o=!0,r.value=E.currentTarget||E.target,f())},onMouseleave:E=>{o=!1,v()},onFocus:E=>{Ln(E.target,":focus-visible")!==!1&&(c=!0,E.stopPropagation(),r.value=E.currentTarget||E.target,f())},onBlur:E=>{c=!1,E.stopPropagation(),v()}},g=k(()=>{const E={};return d.value&&(E.onClick=p.onClick),e.openOnHover&&(E.onMouseenter=p.onMouseenter,E.onMouseleave=p.onMouseleave),u.value&&(E.onFocus=p.onFocus,E.onBlur=p.onBlur),E}),y=k(()=>{const E={};if(e.openOnHover&&(E.onMouseenter=()=>{o=!0,f()},E.onMouseleave=()=>{o=!1,v()}),u.value&&(E.onFocusin=()=>{c=!0,f()},E.onFocusout=()=>{c=!1,v()}),e.closeOnContentClick){const O=Ye(Ui,null);E.onClick=()=>{n.value=!1,O==null||O.closeParents()}}return E}),b=k(()=>{const E={};return e.openOnHover&&(E.onMouseenter=()=>{l&&(o=!0,l=!1,f())},E.onMouseleave=()=>{o=!1,v()}),E});ie(i,E=>{var O;E&&(e.openOnHover&&!o&&(!u.value||!c)||u.value&&!c&&(!e.openOnHover||!o))&&!((O=s.value)!=null&&O.contains(document.activeElement))&&(n.value=!1)}),ie(n,E=>{E||setTimeout(()=>{h.value=void 0})},{flush:"post"});const w=Ps();it(()=>{w.value&&Le(()=>{r.value=w.el})});const C=Ps(),S=k(()=>e.target==="cursor"&&h.value?h.value:C.value?C.el:So(e.target,a)||r.value),R=k(()=>Array.isArray(S.value)?void 0:S.value);let x;return ie(()=>!!e.activator,E=>{E&&Te?(x=ka(),x.run(()=>{af(e,a,{activatorEl:r,activatorEvents:g})})):x&&x.stop()},{flush:"post",immediate:!0}),je(()=>{x==null||x.stop()}),{activatorEl:r,activatorRef:w,target:S,targetEl:R,targetRef:C,activatorEvents:g,contentEvents:y,scrimEvents:b}}function af(e,t,n){let{activatorEl:i,activatorEvents:s}=n;ie(()=>e.activator,(c,l)=>{if(l&&c!==l){const u=o(l);u&&r(u)}c&&Le(()=>a())},{immediate:!0}),ie(()=>e.activatorProps,()=>{a()}),je(()=>{r()});function a(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o(),l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;c&&yl(c,Z(s.value,l))}function r(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o(),l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;c&&bl(c,Z(s.value,l))}function o(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.activator;const l=So(c,t);return i.value=(l==null?void 0:l.nodeType)===Node.ELEMENT_NODE?l:void 0,i.value}}function So(e,t){var i,s;if(!e)return;let n;if(e==="parent"){let a=(s=(i=t==null?void 0:t.proxy)==null?void 0:i.$el)==null?void 0:s.parentNode;for(;a!=null&&a.hasAttribute("data-no-activator");)a=a.parentNode;n=a}else typeof e=="string"?n=document.querySelector(e):"$el"in e?n=e.$el:n=e;return n}function rf(){if(!Te)return te(!1);const{ssr:e}=ts();if(e){const t=te(!1);return bt(()=>{t.value=!0}),t}else return te(!0)}const of=$({eager:Boolean},"lazy");function lf(e,t){const n=te(!1),i=k(()=>n.value||e.eager||t.value);ie(t,()=>n.value=!0);function s(){e.eager||(n.value=!1)}return{isBooted:n,hasContent:i,onAfterLeave:s}}function wo(){const t=We("useScopeId").vnode.scopeId;return{scopeId:t?{[t]:""}:void 0}}const ma=Symbol.for("vuetify:stack"),Xt=Qt([]);function uf(e,t,n){const i=We("useStack"),s=!n,a=Ye(ma,void 0),r=Qt({activeChildren:new Set});rt(ma,r);const o=te(Number(t.value));Rt(e,()=>{var d;const u=(d=Xt.at(-1))==null?void 0:d[1];o.value=u?u+10:Number(t.value),s&&Xt.push([i.uid,o.value]),a==null||a.activeChildren.add(i.uid),je(()=>{if(s){const f=Ce(Xt).findIndex(v=>v[0]===i.uid);Xt.splice(f,1)}a==null||a.activeChildren.delete(i.uid)})});const c=te(!0);s&&it(()=>{var d;const u=((d=Xt.at(-1))==null?void 0:d[0])===i.uid;setTimeout(()=>c.value=u)});const l=k(()=>!r.activeChildren.size);return{globalTop:sl(c),localTop:l,stackStyles:k(()=>({zIndex:o.value}))}}function cf(e){return{teleportTarget:k(()=>{const n=e();if(n===!0||!Te)return;const i=n===!1?document.body:typeof n=="string"?document.querySelector(n):n;if(i==null)return;let s=[...i.children].find(a=>a.matches(".v-overlay-container"));return s||(s=document.createElement("div"),s.className="v-overlay-container",i.appendChild(s)),s})}}function df(){return!0}function Co(e,t,n){if(!e||ko(e,n)===!1)return!1;const i=Ta(t);if(typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&i.host===e.target)return!1;const s=(typeof n.value=="object"&&n.value.include||(()=>[]))();return s.push(t),!s.some(a=>a==null?void 0:a.contains(e.target))}function ko(e,t){return(typeof t.value=="object"&&t.value.closeConditional||df)(e)}function hf(e,t,n){const i=typeof n.value=="function"?n.value:n.value.handler;e.shadowTarget=e.target,t._clickOutside.lastMousedownWasOutside&&Co(e,t,n)&&setTimeout(()=>{ko(e,n)&&i&&i(e)},0)}function ga(e,t){const n=Ta(e);t(document),typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&t(n)}const ff={mounted(e,t){const n=s=>hf(s,e,t),i=s=>{e._clickOutside.lastMousedownWasOutside=Co(s,e,t)};ga(e,s=>{s.addEventListener("click",n,!0),s.addEventListener("mousedown",i,!0)}),e._clickOutside||(e._clickOutside={lastMousedownWasOutside:!1}),e._clickOutside[t.instance.$.uid]={onClick:n,onMousedown:i}},beforeUnmount(e,t){e._clickOutside&&(ga(e,n=>{var a;if(!n||!((a=e._clickOutside)!=null&&a[t.instance.$.uid]))return;const{onClick:i,onMousedown:s}=e._clickOutside[t.instance.$.uid];n.removeEventListener("click",i,!0),n.removeEventListener("mousedown",s,!0)}),delete e._clickOutside[t.instance.$.uid])}};function vf(e){const{modelValue:t,color:n,...i}=e;return m(Et,{name:"fade-transition",appear:!0},{default:()=>[e.modelValue&&m("div",Z({class:["v-overlay__scrim",e.color.backgroundColorClasses.value],style:e.color.backgroundColorStyles.value},i),null)]})}const xo=$({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...nf(),...se(),...lt(),...of(),...zh(),...Xh(),...Ae(),...Ut()},"VOverlay"),pa=G()({name:"VOverlay",directives:{ClickOutside:ff},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...xo()},emits:{"click:outside":e=>!0,"update:modelValue":e=>!0,keydown:e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,t){let{slots:n,attrs:i,emit:s}=t;const a=We("VOverlay"),r=z(),o=z(),c=z(),l=pe(e,"modelValue"),u=k({get:()=>l.value,set:X=>{X&&e.disabled||(l.value=X)}}),{themeClasses:d}=Ne(e),{rtlClasses:f,isRtl:v}=pt(),{hasContent:h,onAfterLeave:p}=lf(e,u),g=mt(k(()=>typeof e.scrim=="string"?e.scrim:null)),{globalTop:y,localTop:b,stackStyles:w}=uf(u,q(e,"zIndex"),e._disableGlobalStack),{activatorEl:C,activatorRef:S,target:R,targetEl:x,targetRef:E,activatorEvents:O,contentEvents:B,scrimEvents:_}=sf(e,{isActive:u,isTop:b,contentEl:c}),{teleportTarget:P}=cf(()=>{var Oe,ge,dt;const X=e.attach||e.contained;if(X)return X;const re=((Oe=C==null?void 0:C.value)==null?void 0:Oe.getRootNode())||((dt=(ge=a.proxy)==null?void 0:ge.$el)==null?void 0:dt.getRootNode());return re instanceof ShadowRoot?re:!1}),{dimensionStyles:A}=ot(e),M=rf(),{scopeId:H}=wo();ie(()=>e.disabled,X=>{X&&(u.value=!1)});const{contentStyles:W,updateLocation:Y}=Hh(e,{isRtl:v,contentEl:c,target:R,isActive:u});Yh(e,{root:r,contentEl:c,targetEl:x,isActive:u,updateLocation:Y});function U(X){s("click:outside",X),e.persistent?j():u.value=!1}function V(X){return u.value&&y.value&&(!e.scrim||X.target===o.value||X instanceof MouseEvent&&X.shadowTarget===o.value)}Te&&ie(u,X=>{X?window.addEventListener("keydown",D):window.removeEventListener("keydown",D)},{immediate:!0}),Xe(()=>{Te&&window.removeEventListener("keydown",D)});function D(X){var re,Oe,ge;X.key==="Escape"&&y.value&&((re=c.value)!=null&&re.contains(document.activeElement)||s("keydown",X),e.persistent?j():(u.value=!1,(Oe=c.value)!=null&&Oe.contains(document.activeElement)&&((ge=C.value)==null||ge.focus())))}function L(X){X.key==="Escape"&&!y.value||s("keydown",X)}const N=bc();Rt(()=>e.closeOnBack,()=>{Sc(N,X=>{y.value&&u.value?(X(!1),e.persistent?j():u.value=!1):X()})});const F=z();ie(()=>u.value&&(e.absolute||e.contained)&&P.value==null,X=>{if(X){const re=Aa(r.value);re&&re!==document.scrollingElement&&(F.value=re.scrollTop)}});function j(){e.noClickAnimation||c.value&&Lt(c.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:Vn})}function ne(){s("afterEnter")}function le(){p(),s("afterLeave")}return ee(()=>{var X;return m(fe,null,[(X=n.activator)==null?void 0:X.call(n,{isActive:u.value,targetRef:E,props:Z({ref:S},O.value,e.activatorProps)}),M.value&&h.value&&m(al,{disabled:!P.value,to:P.value},{default:()=>[m("div",Z({class:["v-overlay",{"v-overlay--absolute":e.absolute||e.contained,"v-overlay--active":u.value,"v-overlay--contained":e.contained},d.value,f.value,e.class],style:[w.value,{"--v-overlay-opacity":e.opacity,top:ae(F.value)},e.style],ref:r,onKeydown:L},H,i),[m(vf,Z({color:g,modelValue:u.value&&!!e.scrim,ref:o},_.value),null),m(nt,{appear:!0,persisted:!0,transition:e.transition,target:R.value,onAfterEnter:ne,onAfterLeave:le},{default:()=>{var re;return[Ve(m("div",Z({ref:c,class:["v-overlay__content",e.contentClass],style:[A.value,W.value]},B.value,e.contentProps),[(re=n.default)==null?void 0:re.call(n,{isActive:u})]),[[At,u.value],[gt("click-outside"),{handler:U,closeConditional:V,include:()=>[C.value]}]])]}})])]})])}),{activatorEl:C,scrimEl:o,target:R,animateClick:j,contentEl:c,globalTop:y,localTop:b,updateLocation:Y}}}),Ci=Symbol("Forwarded refs");function ki(e,t){let n=e;for(;n;){const i=Reflect.getOwnPropertyDescriptor(n,t);if(i)return i;n=Object.getPrototypeOf(n)}}function ai(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return e[Ci]=n,new Proxy(e,{get(s,a){if(Reflect.has(s,a))return Reflect.get(s,a);if(!(typeof a=="symbol"||a.startsWith("$")||a.startsWith("__"))){for(const r of n)if(r.value&&Reflect.has(r.value,a)){const o=Reflect.get(r.value,a);return typeof o=="function"?o.bind(r.value):o}}},has(s,a){if(Reflect.has(s,a))return!0;if(typeof a=="symbol"||a.startsWith("$")||a.startsWith("__"))return!1;for(const r of n)if(r.value&&Reflect.has(r.value,a))return!0;return!1},set(s,a,r){if(Reflect.has(s,a))return Reflect.set(s,a,r);if(typeof a=="symbol"||a.startsWith("$")||a.startsWith("__"))return!1;for(const o of n)if(o.value&&Reflect.has(o.value,a))return Reflect.set(o.value,a,r);return!1},getOwnPropertyDescriptor(s,a){var o;const r=Reflect.getOwnPropertyDescriptor(s,a);if(r)return r;if(!(typeof a=="symbol"||a.startsWith("$")||a.startsWith("__"))){for(const c of n){if(!c.value)continue;const l=ki(c.value,a)??("_"in c.value?ki((o=c.value._)==null?void 0:o.setupState,a):void 0);if(l)return l}for(const c of n){const l=c.value&&c.value[Ci];if(!l)continue;const u=l.slice();for(;u.length;){const d=u.shift(),f=ki(d.value,a);if(f)return f;const v=d.value&&d.value[Ci];v&&u.push(...v)}}}}})}const mf=$({id:String,submenu:Boolean,...Wt(xo({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:$r}}),["absolute"])},"VMenu"),gf=G()({name:"VMenu",props:mf(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=pe(e,"modelValue"),{scopeId:s}=wo(),{isRtl:a}=pt(),r=yt(),o=k(()=>e.id||`v-menu-${r}`),c=z(),l=Ye(Ui,null),u=te(new Set);rt(Ui,{register(){u.value.add(r)},unregister(){u.value.delete(r)},closeParents(g){setTimeout(()=>{var y;!u.value.size&&!e.persistent&&(g==null||(y=c.value)!=null&&y.contentEl&&!ll(g,c.value.contentEl))&&(i.value=!1,l==null||l.closeParents())},40)}}),Xe(()=>{l==null||l.unregister(),document.removeEventListener("focusin",d)}),rl(()=>i.value=!1);async function d(g){var w,C,S;const y=g.relatedTarget,b=g.target;await Le(),i.value&&y!==b&&((w=c.value)!=null&&w.contentEl)&&((C=c.value)!=null&&C.globalTop)&&![document,c.value.contentEl].includes(b)&&!c.value.contentEl.contains(b)&&((S=Pi(c.value.contentEl)[0])==null||S.focus())}ie(i,g=>{g?(l==null||l.register(),Te&&document.addEventListener("focusin",d,{once:!0})):(l==null||l.unregister(),Te&&document.removeEventListener("focusin",d))},{immediate:!0});function f(g){l==null||l.closeParents(g)}function v(g){var y,b,w,C,S;if(!e.disabled)if(g.key==="Tab"||g.key==="Enter"&&!e.closeOnContentClick){if(g.key==="Enter"&&(g.target instanceof HTMLTextAreaElement||g.target instanceof HTMLInputElement&&g.target.closest("form")))return;g.key==="Enter"&&g.preventDefault(),ol(Pi((y=c.value)==null?void 0:y.contentEl,!1),g.shiftKey?"prev":"next",x=>x.tabIndex>=0)||(i.value=!1,(w=(b=c.value)==null?void 0:b.activatorEl)==null||w.focus())}else e.submenu&&g.key===(a.value?"ArrowRight":"ArrowLeft")&&(i.value=!1,(S=(C=c.value)==null?void 0:C.activatorEl)==null||S.focus())}function h(g){var b;if(e.disabled)return;const y=(b=c.value)==null?void 0:b.contentEl;y&&i.value?g.key==="ArrowDown"?(g.preventDefault(),g.stopImmediatePropagation(),kn(y,"next")):g.key==="ArrowUp"?(g.preventDefault(),g.stopImmediatePropagation(),kn(y,"prev")):e.submenu&&(g.key===(a.value?"ArrowRight":"ArrowLeft")?i.value=!1:g.key===(a.value?"ArrowLeft":"ArrowRight")&&(g.preventDefault(),kn(y,"first"))):(e.submenu?g.key===(a.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(g.key))&&(i.value=!0,g.preventDefault(),setTimeout(()=>setTimeout(()=>h(g))))}const p=k(()=>Z({"aria-haspopup":"menu","aria-expanded":String(i.value),"aria-controls":o.value,onKeydown:h},e.activatorProps));return ee(()=>{const g=pa.filterProps(e);return m(pa,Z({ref:c,id:o.value,class:["v-menu",e.class],style:e.style},g,{modelValue:i.value,"onUpdate:modelValue":y=>i.value=y,absolute:!0,activatorProps:p.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":f,onKeydown:v},s),{activator:n.activator,default:function(){for(var y=arguments.length,b=new Array(y),w=0;w<y;w++)b[w]=arguments[w];return m(ke,{root:"VMenu"},{default:()=>{var C;return[(C=n.default)==null?void 0:C.call(n,...b)]}})}})}),ai({id:o,openChildren:u},c)}}),pf=$({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...se(),...Ut({transition:{component:jr}})},"VCounter"),Eo=G()({name:"VCounter",functional:!0,props:pf(),setup(e,t){let{slots:n}=t;const i=k(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return ee(()=>m(nt,{transition:e.transition},{default:()=>[Ve(m("div",{class:["v-counter",{"text-error":e.max&&!e.disabled&&parseFloat(e.value)>parseFloat(e.max)},e.class],style:e.style},[n.default?n.default({counter:i.value,max:e.max,value:e.value}):i.value]),[[At,e.active]])]})),{}}}),yf=$({floating:Boolean,...se()},"VFieldLabel"),Sn=G()({name:"VFieldLabel",props:yf(),setup(e,t){let{slots:n}=t;return ee(()=>m(Ur,{class:["v-field-label",{"v-field-label--floating":e.floating},e.class],style:e.style,"aria-hidden":e.floating||void 0},n)),{}}}),bf=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],Cs=$({appendInnerIcon:ce,bgColor:String,clearable:Boolean,clearIcon:{type:ce,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,dirty:Boolean,disabled:{type:Boolean,default:null},glow:Boolean,error:Boolean,flat:Boolean,iconColor:[Boolean,String],label:String,persistentClear:Boolean,prependInnerIcon:ce,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>bf.includes(e)},"onClick:clear":Be(),"onClick:appendInner":Be(),"onClick:prependInner":Be(),...se(),...hs(),...Je(),...Ae()},"VField"),Fn=G()({name:"VField",inheritAttrs:!1,props:{id:String,...zr(),...Cs()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:i,slots:s}=t;const{themeClasses:a}=Ne(e),{loaderClasses:r}=ei(e),{focusClasses:o,isFocused:c,focus:l,blur:u}=ii(e),{InputIcon:d}=Wr(e),{roundedClasses:f}=Qe(e),{rtlClasses:v}=pt(),h=k(()=>e.dirty||e.active),p=k(()=>!!(e.label||s.label)),g=k(()=>!e.singleLine&&p.value),y=yt(),b=k(()=>e.id||`input-${y}`),w=k(()=>`${b.value}-messages`),C=z(),S=z(),R=z(),x=k(()=>["plain","underlined"].includes(e.variant)),E=k(()=>e.error||e.disabled?void 0:h.value&&c.value?e.color:e.baseColor),O=k(()=>{if(!(!e.iconColor||e.glow&&!c.value))return e.iconColor===!0?E.value:e.iconColor}),{backgroundColorClasses:B,backgroundColorStyles:_}=mt(q(e,"bgColor")),{textColorClasses:P,textColorStyles:A}=st(E);ie(h,W=>{if(g.value){const Y=C.value.$el,U=S.value.$el;requestAnimationFrame(()=>{const V=ns(Y),D=U.getBoundingClientRect(),L=D.x-V.x,N=D.y-V.y-(V.height/2-D.height/2),F=D.width/.75,j=Math.abs(F-V.width)>1?{maxWidth:ae(F)}:void 0,ne=getComputedStyle(Y),le=getComputedStyle(U),X=parseFloat(ne.transitionDuration)*1e3||150,re=parseFloat(le.getPropertyValue("--v-field-label-scale")),Oe=le.getPropertyValue("color");Y.style.visibility="visible",U.style.visibility="hidden",Lt(Y,{transform:`translate(${L}px, ${N}px) scale(${re})`,color:Oe,...j},{duration:X,easing:Vn,direction:W?"normal":"reverse"}).finished.then(()=>{Y.style.removeProperty("visibility"),U.style.removeProperty("visibility")})})}},{flush:"post"});const M=k(()=>({isActive:h,isFocused:c,controlRef:R,blur:u,focus:l}));function H(W){W.target!==document.activeElement&&W.preventDefault()}return ee(()=>{var L,N,F;const W=e.variant==="outlined",Y=!!(s["prepend-inner"]||e.prependInnerIcon),U=!!(e.clearable||s.clear)&&!e.disabled,V=!!(s["append-inner"]||e.appendInnerIcon||U),D=()=>s.label?s.label({...M.value,label:e.label,props:{for:b.value}}):e.label;return m("div",Z({class:["v-field",{"v-field--active":h.value,"v-field--appended":V,"v-field--center-affix":e.centerAffix??!x.value,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--glow":e.glow,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":Y,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!D(),[`v-field--variant-${e.variant}`]:!0},a.value,B.value,o.value,r.value,f.value,v.value,e.class],style:[_.value,e.style],onClick:H},n),[m("div",{class:"v-field__overlay"},null),m(fs,{name:"v-field",active:!!e.loading,color:e.error?"error":typeof e.loading=="string"?e.loading:e.color},{default:s.loader}),Y&&m("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&m(d,{key:"prepend-icon",name:"prependInner",color:O.value},null),(L=s["prepend-inner"])==null?void 0:L.call(s,M.value)]),m("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&g.value&&m(Sn,{key:"floating-label",ref:S,class:[P.value],floating:!0,for:b.value,style:A.value},{default:()=>[D()]}),p.value&&m(Sn,{key:"label",ref:C,for:b.value},{default:()=>[D()]}),((N=s.default)==null?void 0:N.call(s,{...M.value,props:{id:b.value,class:"v-field__input","aria-describedby":w.value},focus:l,blur:u}))??m("div",{id:b.value,class:"v-field__input","aria-describedby":w.value},null)]),U&&m(Fr,{key:"clear"},{default:()=>[Ve(m("div",{class:"v-field__clearable",onMousedown:j=>{j.preventDefault(),j.stopPropagation()}},[m(ke,{defaults:{VIcon:{icon:e.clearIcon}}},{default:()=>[s.clear?s.clear({...M.value,props:{onFocus:l,onBlur:u,onClick:e["onClick:clear"]}}):m(d,{name:"clear",onFocus:l,onBlur:u},null)]})]),[[At,e.dirty]])]}),V&&m("div",{key:"append",class:"v-field__append-inner"},[(F=s["append-inner"])==null?void 0:F.call(s,M.value),e.appendInnerIcon&&m(d,{key:"append-icon",name:"appendInner",color:O.value},null)]),m("div",{class:["v-field__outline",P.value],style:A.value},[W&&m(fe,null,[m("div",{class:"v-field__outline__start"},null),g.value&&m("div",{class:"v-field__outline__notch"},[m(Sn,{ref:S,floating:!0,for:b.value},{default:()=>[D()]})]),m("div",{class:"v-field__outline__end"},null)]),x.value&&g.value&&m(Sn,{ref:S,floating:!0,for:b.value},{default:()=>[D()]})])])}),{controlRef:R,fieldIconColor:O}}}),Sf=["color","file","time","date","datetime-local","week","month"],Ro=$({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...si(),...Cs()},"VTextField"),Nt=G()({name:"VTextField",directives:{Intersect:us},inheritAttrs:!1,props:Ro(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:i,slots:s}=t;const a=pe(e,"modelValue"),{isFocused:r,focus:o,blur:c}=ii(e),l=k(()=>typeof e.counterValue=="function"?e.counterValue(a.value):typeof e.counterValue=="number"?e.counterValue:(a.value??"").toString().length),u=k(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),d=k(()=>["plain","underlined"].includes(e.variant));function f(R,x){var E,O;!e.autofocus||!R||(O=(E=x[0].target)==null?void 0:E.focus)==null||O.call(E)}const v=z(),h=z(),p=z(),g=k(()=>Sf.includes(e.type)||e.persistentPlaceholder||r.value||e.active);function y(){var R;p.value!==document.activeElement&&((R=p.value)==null||R.focus()),r.value||o()}function b(R){i("mousedown:control",R),R.target!==p.value&&(y(),R.preventDefault())}function w(R){y(),i("click:control",R)}function C(R){R.stopPropagation(),y(),Le(()=>{a.value=null,Zi(e["onClick:clear"],R)})}function S(R){var E;const x=R.target;if(a.value=x.value,(E=e.modelModifiers)!=null&&E.trim&&["text","search","password","tel","url"].includes(e.type)){const O=[x.selectionStart,x.selectionEnd];Le(()=>{x.selectionStart=O[0],x.selectionEnd=O[1]})}}return ee(()=>{const R=!!(s.counter||e.counter!==!1&&e.counter!=null),x=!!(R||s.details),[E,O]=qn(n),{modelValue:B,..._}=Mt.filterProps(e),P=Fn.filterProps(e);return m(Mt,Z({ref:v,modelValue:a.value,"onUpdate:modelValue":A=>a.value=A,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":d.value},e.class],style:e.style},E,_,{centerAffix:!d.value,focused:r.value}),{...s,default:A=>{let{id:M,isDisabled:H,isDirty:W,isReadonly:Y,isValid:U}=A;return m(Fn,Z({ref:h,onMousedown:b,onClick:w,"onClick:clear":C,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:e.role},P,{id:M.value,active:g.value||W.value,dirty:W.value||e.dirty,disabled:H.value,focused:r.value,error:U.value===!1}),{...s,default:V=>{let{props:{class:D,...L}}=V;const N=Ve(m("input",Z({ref:p,value:a.value,onInput:S,autofocus:e.autofocus,readonly:Y.value,disabled:H.value,name:e.name,placeholder:e.placeholder,size:1,type:e.type,onFocus:y,onBlur:c},L,O),null),[[gt("intersect"),{handler:f},null,{once:!0}]]);return m(fe,null,[e.prefix&&m("span",{class:"v-text-field__prefix"},[m("span",{class:"v-text-field__prefix__text"},[e.prefix])]),s.default?m("div",{class:D,"data-no-activator":""},[s.default(),N]):ul(N,{class:D}),e.suffix&&m("span",{class:"v-text-field__suffix"},[m("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:x?A=>{var M;return m(fe,null,[(M=s.details)==null?void 0:M.call(s,A),R&&m(fe,null,[m("span",null,null),m(Eo,{active:e.persistentCounter||r.value,value:l.value,max:u.value,disabled:e.disabled},s.counter)])])}:void 0})}),ai({},v,h,p)}}),wf=$({renderless:Boolean,...se()},"VVirtualScrollItem"),Cf=G()({name:"VVirtualScrollItem",inheritAttrs:!1,props:wf(),emits:{"update:height":e=>!0},setup(e,t){let{attrs:n,emit:i,slots:s}=t;const{resizeRef:a,contentRect:r}=Bt(void 0,"border");ie(()=>{var o;return(o=r.value)==null?void 0:o.height},o=>{o!=null&&i("update:height",o)}),ee(()=>{var o,c;return e.renderless?m(fe,null,[(o=s.default)==null?void 0:o.call(s,{itemRef:a})]):m("div",Z({ref:a,class:["v-virtual-scroll__item",e.class],style:e.style},n),[(c=s.default)==null?void 0:c.call(s)])})}}),kf=-1,xf=1,xi=100,Ef=$({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function Rf(e,t){const n=ts(),i=te(0);it(()=>{i.value=parseFloat(e.itemHeight||0)});const s=te(0),a=te(Math.ceil((parseInt(e.height)||n.height.value)/(i.value||16))||1),r=te(0),o=te(0),c=z(),l=z();let u=0;const{resizeRef:d,contentRect:f}=Bt();it(()=>{d.value=c.value});const v=k(()=>{var D;return c.value===document.documentElement?n.height.value:((D=f.value)==null?void 0:D.height)||parseInt(e.height)||0}),h=k(()=>!!(c.value&&l.value&&v.value&&i.value));let p=Array.from({length:t.value.length}),g=Array.from({length:t.value.length});const y=te(0);let b=-1;function w(D){return p[D]||i.value}const C=cl(()=>{const D=performance.now();g[0]=0;const L=t.value.length;for(let N=1;N<=L-1;N++)g[N]=(g[N-1]||0)+w(N-1);y.value=Math.max(y.value,performance.now()-D)},y),S=ie(h,D=>{D&&(S(),u=l.value.offsetTop,C.immediate(),W(),~b&&Le(()=>{Te&&window.requestAnimationFrame(()=>{U(b),b=-1})}))});je(()=>{C.clear()});function R(D,L){const N=p[D],F=i.value;i.value=F?Math.min(i.value,L):L,(N!==L||F!==i.value)&&(p[D]=L,C())}function x(D){return D=ft(D,0,t.value.length-1),g[D]||0}function E(D){return Pf(g,D)}let O=0,B=0,_=0;ie(v,(D,L)=>{L&&(W(),D<L&&requestAnimationFrame(()=>{B=0,W()}))});let P=-1;function A(){if(!c.value||!l.value)return;const D=c.value.scrollTop,L=performance.now();L-_>500?(B=Math.sign(D-O),u=l.value.offsetTop):B=D-O,O=D,_=L,window.clearTimeout(P),P=window.setTimeout(M,500),W()}function M(){!c.value||!l.value||(B=0,_=0,window.clearTimeout(P),W())}let H=-1;function W(){cancelAnimationFrame(H),H=requestAnimationFrame(Y)}function Y(){if(!c.value||!v.value)return;const D=O-u,L=Math.sign(B),N=Math.max(0,D-xi),F=ft(E(N),0,t.value.length),j=D+v.value+xi,ne=ft(E(j)+1,F+1,t.value.length);if((L!==kf||F<s.value)&&(L!==xf||ne>a.value)){const le=x(s.value)-x(F),X=x(ne)-x(a.value);Math.max(le,X)>xi?(s.value=F,a.value=ne):(F<=0&&(s.value=F),ne>=t.value.length&&(a.value=ne))}r.value=x(s.value),o.value=x(t.value.length)-x(a.value)}function U(D){const L=x(D);!c.value||D&&!L?b=D:c.value.scrollTop=L}const V=k(()=>t.value.slice(s.value,a.value).map((D,L)=>{const N=L+s.value;return{raw:D,index:N,key:Ge(D,e.itemKey,N)}}));return ie(t,()=>{p=Array.from({length:t.value.length}),g=Array.from({length:t.value.length}),C.immediate(),W()},{deep:1}),{calculateVisibleItems:W,containerRef:c,markerRef:l,computedItems:V,paddingTop:r,paddingBottom:o,scrollToIndex:U,handleScroll:A,handleScrollend:M,handleItemResize:R}}function Pf(e,t){let n=e.length-1,i=0,s=0,a=null,r=-1;if(e[n]<t)return n;for(;i<=n;)if(s=i+n>>1,a=e[s],a>t)n=s-1;else if(a<t)r=s,i=s+1;else return a===t?s:i;return r}const Tf=$({items:{type:Array,default:()=>[]},renderless:Boolean,...Ef(),...se(),...lt()},"VVirtualScroll"),Af=G()({name:"VVirtualScroll",props:Tf(),setup(e,t){let{slots:n}=t;const i=We("VVirtualScroll"),{dimensionStyles:s}=ot(e),{calculateVisibleItems:a,containerRef:r,markerRef:o,handleScroll:c,handleScrollend:l,handleItemResize:u,scrollToIndex:d,paddingTop:f,paddingBottom:v,computedItems:h}=Rf(e,q(e,"items"));return Rt(()=>e.renderless,()=>{function p(){var b,w;const y=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";r.value===document.documentElement?(document[y]("scroll",c,{passive:!0}),document[y]("scrollend",l)):((b=r.value)==null||b[y]("scroll",c,{passive:!0}),(w=r.value)==null||w[y]("scrollend",l))}bt(()=>{r.value=Aa(i.vnode.el,!0),p(!0)}),je(p)}),ee(()=>{const p=h.value.map(g=>m(Cf,{key:g.key,renderless:e.renderless,"onUpdate:height":y=>u(g.index,y)},{default:y=>{var b;return(b=n.default)==null?void 0:b.call(n,{item:g.raw,index:g.index,...y})}}));return e.renderless?m(fe,null,[m("div",{ref:o,class:"v-virtual-scroll__spacer",style:{paddingTop:ae(f.value)}},null),p,m("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:ae(v.value)}},null)]):m("div",{ref:r,class:["v-virtual-scroll",e.class],onScrollPassive:c,onScrollend:l,style:[s.value,e.style]},[m("div",{ref:o,class:"v-virtual-scroll__container",style:{paddingTop:ae(f.value),paddingBottom:ae(v.value)}},[p])])}),{calculateVisibleItems:a,scrollToIndex:d}}});function Of(e,t){const n=te(!1);let i;function s(o){cancelAnimationFrame(i),n.value=!0,i=requestAnimationFrame(()=>{i=requestAnimationFrame(()=>{n.value=!1})})}async function a(){await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>{if(n.value){const c=ie(n,()=>{c(),o()})}else o()})}async function r(o){var u,d;if(o.key==="Tab"&&((u=t.value)==null||u.focus()),!["PageDown","PageUp","Home","End"].includes(o.key))return;const c=(d=e.value)==null?void 0:d.$el;if(!c)return;(o.key==="Home"||o.key==="End")&&c.scrollTo({top:o.key==="Home"?0:c.scrollHeight,behavior:"smooth"}),await a();const l=c.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(o.key==="PageDown"||o.key==="Home"){const f=c.getBoundingClientRect().top;for(const v of l)if(v.getBoundingClientRect().top>=f){v.focus();break}}else{const f=c.getBoundingClientRect().bottom;for(const v of[...l].reverse())if(v.getBoundingClientRect().bottom<=f){v.focus();break}}}return{onScrollPassive:s,onKeydown:r}}const _f=$({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:ce,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...mo({itemChildren:!1})},"Select"),Lf=$({..._f(),...Wt(Ro({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Ut({transition:{component:$r}})},"VSelect"),Po=G()({name:"VSelect",props:Lf(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:n}=t;const{t:i}=Qi(),s=z(),a=z(),r=z(),{items:o,transformIn:c,transformOut:l}=Nh(e),u=pe(e,"modelValue",[],V=>c(V===null?[null]:He(V)),V=>{const D=l(V);return e.multiple?D:D[0]??null}),d=k(()=>typeof e.counterValue=="function"?e.counterValue(u.value):typeof e.counterValue=="number"?e.counterValue:u.value.length),f=Hr(e),v=k(()=>u.value.map(V=>V.value)),h=te(!1);let p="",g;const y=k(()=>e.hideSelected?o.value.filter(V=>!u.value.some(D=>(e.valueComparator||vt)(D,V))):o.value),b=k(()=>e.hideNoData&&!y.value.length||f.isReadonly.value||f.isDisabled.value),w=pe(e,"menu"),C=k({get:()=>w.value,set:V=>{var D;w.value&&!V&&((D=a.value)!=null&&D.openChildren.size)||V&&b.value||(w.value=V)}}),S=k(()=>C.value?e.closeText:e.openText),R=k(()=>{var V;return{...e.menuProps,activatorProps:{...((V=e.menuProps)==null?void 0:V.activatorProps)||{},"aria-haspopup":"listbox"}}}),x=z(),E=Of(x,s);function O(V){e.openOnClear&&(C.value=!0)}function B(){b.value||(C.value=!C.value)}function _(V){Ts(V)&&P(V)}function P(V){var F,j;if(!V.key||f.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(V.key)&&V.preventDefault(),["Enter","ArrowDown"," "].includes(V.key)&&(C.value=!0),["Escape","Tab"].includes(V.key)&&(C.value=!1),V.key==="Home"?(F=x.value)==null||F.focus("first"):V.key==="End"&&((j=x.value)==null||j.focus("last"));const D=1e3;if(!Ts(V))return;const L=performance.now();L-g>D&&(p=""),p+=V.key.toLowerCase(),g=L;const N=o.value.find(ne=>ne.title.toLowerCase().startsWith(p));if(N!==void 0){u.value=[N];const ne=y.value.indexOf(N);Te&&window.requestAnimationFrame(()=>{var le;ne>=0&&((le=r.value)==null||le.scrollToIndex(ne))})}}function A(V){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!V.props.disabled)if(e.multiple){const L=u.value.findIndex(F=>(e.valueComparator||vt)(F.value,V.value)),N=D??!~L;if(~L){const F=N?[...u.value,V]:[...u.value];F.splice(L,1),u.value=F}else N&&(u.value=[...u.value,V])}else{const L=D!==!1;u.value=L?[V]:[],Le(()=>{C.value=!1})}}function M(V){var D;(D=x.value)!=null&&D.$el.contains(V.relatedTarget)||(C.value=!1)}function H(){var V;e.eager&&((V=r.value)==null||V.calculateVisibleItems())}function W(){var V;h.value&&((V=s.value)==null||V.focus())}function Y(V){h.value=!0}function U(V){if(V==null)u.value=[];else if(Ln(s.value,":autofill")||Ln(s.value,":-webkit-autofill")){const D=o.value.find(L=>L.title===V);D&&A(D)}else s.value&&(s.value.value="")}return ie(C,()=>{if(!e.hideSelected&&C.value&&u.value.length){const V=y.value.findIndex(D=>u.value.some(L=>(e.valueComparator||vt)(L.value,D.value)));Te&&window.requestAnimationFrame(()=>{var D;V>=0&&((D=r.value)==null||D.scrollToIndex(V))})}}),ie(()=>e.items,(V,D)=>{C.value||h.value&&!D.length&&V.length&&(C.value=!0)}),ee(()=>{const V=!!(e.chips||n.chip),D=!!(!e.hideNoData||y.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),L=u.value.length>0,N=Nt.filterProps(e),F=L||!h.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return m(Nt,Z({ref:s},N,{modelValue:u.value.map(j=>j.props.value).join(", "),"onUpdate:modelValue":U,focused:h.value,"onUpdate:focused":j=>h.value=j,validationValue:u.externalValue,counterValue:d.value,dirty:L,class:["v-select",{"v-select--active-menu":C.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":u.value.length,"v-select--selection-slot":!!n.selection},e.class],style:e.style,inputmode:"none",placeholder:F,"onClick:clear":O,"onMousedown:control":B,onBlur:M,onKeydown:P,"aria-label":i(S.value),title:i(S.value)}),{...n,default:()=>m(fe,null,[m(gf,Z({ref:a,modelValue:C.value,"onUpdate:modelValue":j=>C.value=j,activator:"parent",contentClass:"v-select__content",disabled:b.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:H,onAfterLeave:W},R.value),{default:()=>[D&&m(Fh,Z({ref:x,selected:v.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:j=>j.preventDefault(),onKeydown:_,onFocusin:Y,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},E,e.listProps),{default:()=>{var j,ne,le;return[(j=n["prepend-item"])==null?void 0:j.call(n),!y.value.length&&!e.hideNoData&&(((ne=n["no-data"])==null?void 0:ne.call(n))??m($n,{key:"no-data",title:i(e.noDataText)},null)),m(Af,{ref:r,renderless:!0,items:y.value,itemKey:"value"},{default:X=>{var De;let{item:re,index:Oe,itemRef:ge}=X;const dt=Z(re.props,{ref:ge,key:re.value,onClick:()=>A(re,null)});return((De=n.item)==null?void 0:De.call(n,{item:re,index:Oe,props:dt}))??m($n,Z(dt,{role:"option"}),{prepend:No=>{let{isSelected:Io}=No;return m(fe,null,[e.multiple&&!e.hideSelected?m(lh,{key:re.value,modelValue:Io,ripple:!1,tabindex:"-1"},null):void 0,re.props.prependAvatar&&m(Tt,{image:re.props.prependAvatar},null),re.props.prependIcon&&m(Se,{icon:re.props.prependIcon},null)])}})}}),(le=n["append-item"])==null?void 0:le.call(n)]}})]}),u.value.map((j,ne)=>{function le(ge){ge.stopPropagation(),ge.preventDefault(),A(j,!1)}const X={"onClick:close":le,onKeydown(ge){ge.key!=="Enter"&&ge.key!==" "||(ge.preventDefault(),ge.stopPropagation(),le(ge))},onMousedown(ge){ge.preventDefault(),ge.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},re=V?!!n.chip:!!n.selection,Oe=re?dl(V?n.chip({item:j,index:ne,props:X}):n.selection({item:j,index:ne})):void 0;if(!(re&&!Oe))return m("div",{key:j.value,class:"v-select__selection"},[V?n.chip?m(ke,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:j.title}}},{default:()=>[Oe]}):m(mh,Z({key:"chip",closable:e.closableChips,size:"small",text:j.title,disabled:j.props.disabled},X),null):Oe??m("span",{class:"v-select__selection-text"},[j.title,e.multiple&&ne<u.value.length-1&&m("span",{class:"v-select__selection-comma"},[me(",")])])])})]),"append-inner":function(){var X,re;for(var j=arguments.length,ne=new Array(j),le=0;le<j;le++)ne[le]=arguments[le];return m(fe,null,[(X=n["append-inner"])==null?void 0:X.call(n,...ne),e.menuIcon?m(Se,{class:"v-select__menu-icon",color:(re=s.value)==null?void 0:re.fieldIconColor,icon:e.menuIcon},null):void 0])}})}),ai({isFocused:h,menu:C,select:A},s)}}),Vf=$({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...si(),...Cs()},"VTextarea"),Df=G()({name:"VTextarea",directives:{Intersect:us},inheritAttrs:!1,props:Vf(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:i,slots:s}=t;const a=pe(e,"modelValue"),{isFocused:r,focus:o,blur:c}=ii(e),l=k(()=>typeof e.counterValue=="function"?e.counterValue(a.value):(a.value||"").toString().length),u=k(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function d(_,P){var A,M;!e.autofocus||!_||(M=(A=P[0].target)==null?void 0:A.focus)==null||M.call(A)}const f=z(),v=z(),h=te(""),p=z(),g=k(()=>e.persistentPlaceholder||r.value||e.active);function y(){var _;p.value!==document.activeElement&&((_=p.value)==null||_.focus()),r.value||o()}function b(_){y(),i("click:control",_)}function w(_){i("mousedown:control",_)}function C(_){_.stopPropagation(),y(),Le(()=>{a.value="",Zi(e["onClick:clear"],_)})}function S(_){var A;const P=_.target;if(a.value=P.value,(A=e.modelModifiers)!=null&&A.trim){const M=[P.selectionStart,P.selectionEnd];Le(()=>{P.selectionStart=M[0],P.selectionEnd=M[1]})}}const R=z(),x=z(Number(e.rows)),E=k(()=>["plain","underlined"].includes(e.variant));it(()=>{e.autoGrow||(x.value=Number(e.rows))});function O(){e.autoGrow&&Le(()=>{if(!R.value||!v.value)return;const _=getComputedStyle(R.value),P=getComputedStyle(v.value.$el),A=parseFloat(_.getPropertyValue("--v-field-padding-top"))+parseFloat(_.getPropertyValue("--v-input-padding-top"))+parseFloat(_.getPropertyValue("--v-field-padding-bottom")),M=R.value.scrollHeight,H=parseFloat(_.lineHeight),W=Math.max(parseFloat(e.rows)*H+A,parseFloat(P.getPropertyValue("--v-input-control-height"))),Y=parseFloat(e.maxRows)*H+A||1/0,U=ft(M??0,W,Y);x.value=Math.floor((U-A)/H),h.value=ae(U)})}bt(O),ie(a,O),ie(()=>e.rows,O),ie(()=>e.maxRows,O),ie(()=>e.density,O);let B;return ie(R,_=>{_?(B=new ResizeObserver(O),B.observe(R.value)):B==null||B.disconnect()}),Xe(()=>{B==null||B.disconnect()}),ee(()=>{const _=!!(s.counter||e.counter||e.counterValue),P=!!(_||s.details),[A,M]=qn(n),{modelValue:H,...W}=Mt.filterProps(e),Y=Fn.filterProps(e);return m(Mt,Z({ref:f,modelValue:a.value,"onUpdate:modelValue":U=>a.value=U,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":E.value},e.class],style:e.style},A,W,{centerAffix:x.value===1&&!E.value,focused:r.value}),{...s,default:U=>{let{id:V,isDisabled:D,isDirty:L,isReadonly:N,isValid:F}=U;return m(Fn,Z({ref:v,style:{"--v-textarea-control-height":h.value},onClick:b,onMousedown:w,"onClick:clear":C,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},Y,{id:V.value,active:g.value||L.value,centerAffix:x.value===1&&!E.value,dirty:L.value||e.dirty,disabled:D.value,focused:r.value,error:F.value===!1}),{...s,default:j=>{let{props:{class:ne,...le}}=j;return m(fe,null,[e.prefix&&m("span",{class:"v-text-field__prefix"},[e.prefix]),Ve(m("textarea",Z({ref:p,class:ne,value:a.value,onInput:S,autofocus:e.autofocus,readonly:N.value,disabled:D.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:y,onBlur:c},le,M),null),[[gt("intersect"),{handler:d},null,{once:!0}]]),e.autoGrow&&Ve(m("textarea",{class:[ne,"v-textarea__sizer"],id:`${le.id}-sizer`,"onUpdate:modelValue":X=>a.value=X,ref:R,readonly:!0,"aria-hidden":"true"},null),[[hl,a.value]]),e.suffix&&m("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:P?U=>{var V;return m(fe,null,[(V=s.details)==null?void 0:V.call(s,U),_&&m(fe,null,[m("span",null,null),m(Eo,{active:e.persistentCounter||r.value,value:l.value,max:u.value,disabled:e.disabled},s.counter)])])}:void 0})}),ai({},f,v,p)}}),Bf={props:["projectName","artist","title"],data:()=>({geniusURL:null,lyrics:null,language:null,languages:[]}),async mounted(){await this.getSupportedLanguages(),this.guessLyricsLanguageDebounced=la(this.guessLyricsLanguage,500),this.getGeniusLyricsDebounced=la(this.getGeniusLyrics,500);try{const e=await ve.post("/search-genius-lyrics",{artist:this.artist,title:this.title});this.geniusURL=e.data.url}catch(e){console.log(e)}},watch:{geniusURL(e){e&&this.getGeniusLyricsDebounced()},lyrics(e){e&&this.guessLyricsLanguageDebounced()}},methods:{async getSupportedLanguages(){const e=await ve.get("/languages"),t={en:"Anglais",fr:"Franais",ja:"Japonais (rmaji)"};this.languages=e.data.map(n=>({value:n,title:t[n]}))},async guessLyricsLanguage(){const e=await ve.post("/_guess_language",this.lyrics,{headers:{"Content-Type":"text/plain"}});this.language=e.data.language},async getGeniusLyrics(){const e=await ve.post("/get-genius-lyrics",{url:this.geniusURL});this.lyrics=e.data.lyrics},async saveLyrics(){const e={genius_url:this.geniusURL,lyrics:this.lyrics,language:this.language};await ve.patch(`/karaoke/${this.projectName}`,e),this.$emit("lyrics-selected")}}};function Mf(e,t,n,i,s,a){return K(),Q(ct,{class:"py-4",color:"surface-variant","prepend-icon":"mdi-rocket-launch-outline",rounded:"lg",variant:"tonal"},{title:I(()=>t[3]||(t[3]=[oe("h2",{class:"text-h5 font-weight-bold"},[me(" Copier le lien "),oe("a",{href:"https://genius.com/",target:"_blank"},"Genius"),me(" des paroles (ou directement les paroles) ")],-1)])),text:I(()=>[m(Nt,{variant:"solo-inverted",modelValue:e.geniusURL,"onUpdate:modelValue":t[0]||(t[0]=r=>e.geniusURL=r)},null,8,["modelValue"]),m(Df,{variant:"solo-inverted",modelValue:e.lyrics,"onUpdate:modelValue":t[1]||(t[1]=r=>e.lyrics=r)},null,8,["modelValue"]),m(Po,{modelValue:e.language,"onUpdate:modelValue":t[2]||(t[2]=r=>e.language=r),items:e.languages},null,8,["modelValue","items"])]),actions:I(()=>[m(xe),e.lyrics?(K(),Q(be,{key:0,variant:"flat",color:"primary",onClick:a.saveLyrics,disabled:!e.lyrics||!e.language},{default:I(()=>t[4]||(t[4]=[me(" C'est bien a ! ")])),_:1},8,["onClick","disabled"])):de("",!0),m(xe)]),_:1})}const To=ze(Bf,[["render",Mf],["__scopeId","data-v-7e0719be"]]),Nf={props:["projectName"],data:()=>({youTubeURL:""}),computed:{embeddedYouTubeURL(){if(!this.youTubeURL)return null;let e="watch?v=";const t=this.youTubeURL.indexOf(e);return t===-1?null:`https://www.youtube.com/embed/${this.youTubeURL.substring(t+e.length)}`}},methods:{async saveYoutubeURL(){await ve.patch(`/karaoke/${this.projectName}`,{youtube_url:this.youTubeURL}),this.$emit("video-selected")}}},If={key:0,class:"center"},$f=["src"];function jf(e,t,n,i,s,a){return K(),Q(ct,{class:"py-4",color:"surface-variant","prepend-icon":"mdi-rocket-launch-outline",rounded:"lg",variant:"tonal"},{title:I(()=>t[1]||(t[1]=[oe("h2",{class:"text-h5 font-weight-bold"},[me(" Copier le lien d'une vido "),oe("a",{href:"https://www.youtube.com/",target:"_blank"},"YouTube")],-1)])),text:I(()=>[m(Nt,{variant:"solo-inverted",modelValue:e.youTubeURL,"onUpdate:modelValue":t[0]||(t[0]=r=>e.youTubeURL=r)},null,8,["modelValue"]),a.embeddedYouTubeURL?(K(),Ft("div",If,[oe("iframe",{width:"560",height:"315",src:a.embeddedYouTubeURL,title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerpolicy:"strict-origin-when-cross-origin",allowfullscreen:""},null,8,$f)])):de("",!0)]),actions:I(()=>[m(xe),a.embeddedYouTubeURL?(K(),Q(be,{key:0,variant:"flat",color:"primary",onClick:a.saveYoutubeURL},{default:I(()=>t[2]||(t[2]=[me(" C'est bien celle-l ! ")])),_:1},8,["onClick"])):de("",!0),m(xe)]),_:1})}const Ao=ze(Nf,[["render",jf],["__scopeId","data-v-c7574a30"]]),Ff={data:()=>({artist:"",title:""}),methods:{async createKaraoke(){const t=(await ve.post("/create-karaoke",{artist:this.artist,title:this.title})).data.project_name;this.$emit("karaoke-created",t)}}};function Wf(e,t,n,i,s,a){return K(),Q(ct,{class:"py-4",color:"surface-variant","prepend-icon":"mdi-rocket-launch-outline",rounded:"lg",variant:"tonal"},{title:I(()=>t[2]||(t[2]=[oe("h2",{class:"text-h5 font-weight-bold"}," On chante quoi ? ",-1)])),text:I(()=>[m(Vt,{class:"mt-5"},{default:I(()=>[m(ue,{cols:"6"},{default:I(()=>[m(Nt,{variant:"solo-inverted",label:"Artiste",modelValue:e.artist,"onUpdate:modelValue":t[0]||(t[0]=r=>e.artist=r)},null,8,["modelValue"])]),_:1}),m(ue,{cols:"6"},{default:I(()=>[m(Nt,{variant:"solo-inverted",label:"Titre",modelValue:e.title,"onUpdate:modelValue":t[1]||(t[1]=r=>e.title=r)},null,8,["modelValue"])]),_:1})]),_:1})]),actions:I(()=>[m(xe),m(be,{variant:"flat",color:"primary",onClick:a.createKaraoke},{default:I(()=>t[3]||(t[3]=[me(" C'est parti ")])),_:1},8,["onClick"]),m(xe)]),_:1})}const Oo=ze(Ff,[["render",Wf]]),zf={data:()=>({projectName:null,karaokes:[]}),async beforeMount(){const e=await ve.get("/karaokes");this.karaokes=e.data.map(({project_name:t,artist:n,title:i})=>({value:t,title:`${n} - ${i}`}))},methods:{async openKaraoke(){await ve.post(`/open-karaoke?project_name=${this.projectName}`),this.$emit("open-karaoke",this.projectName)}}};function Hf(e,t,n,i,s,a){return K(),Q(ct,{class:"py-4",color:"surface-variant","prepend-icon":"mdi-rocket-launch-outline",rounded:"lg",variant:"tonal"},{title:I(()=>t[1]||(t[1]=[oe("h2",{class:"text-h5 font-weight-bold"}," Lequel ? ",-1)])),text:I(()=>[m(Po,{modelValue:e.projectName,"onUpdate:modelValue":t[0]||(t[0]=r=>e.projectName=r),items:e.karaokes},null,8,["modelValue","items"])]),actions:I(()=>[m(xe),m(be,{variant:"flat",color:"primary",onClick:a.openKaraoke},{default:I(()=>t[2]||(t[2]=[me(" C'est parti ")])),_:1},8,["onClick"]),m(xe)]),_:1})}const _o=ze(zf,[["render",Hf]]),Uf={};function qf(e,t){return K(),Ft(fe,null,[t[6]||(t[6]=oe("div",null,null,-1)),m(ct,{class:"py-4",color:"surface-variant","prepend-icon":"mdi-rocket-launch-outline",rounded:"lg",variant:"tonal"},{title:I(()=>t[2]||(t[2]=[oe("h2",{class:"text-h5 font-weight-bold"}," Crer un nouveau karaok ou slectionner un karaok existant ",-1)])),text:I(()=>t[3]||(t[3]=[])),actions:I(()=>[m(xe),m(be,{variant:"flat",color:"primary",onClick:t[0]||(t[0]=n=>e.$emit("new-karaoke"))},{default:I(()=>t[4]||(t[4]=[me(" Crer ")])),_:1}),m(be,{variant:"flat",color:"primary",onClick:t[1]||(t[1]=n=>e.$emit("open-karaoke"))},{default:I(()=>t[5]||(t[5]=[me(" Slectionner ")])),_:1}),m(xe)]),_:1})],64)}const Lo=ze(Uf,[["render",qf]]);function Re(e,t,n,i){return new(n||(n=Promise))(function(s,a){function r(l){try{c(i.next(l))}catch(u){a(u)}}function o(l){try{c(i.throw(l))}catch(u){a(u)}}function c(l){var u;l.done?s(l.value):(u=l.value,u instanceof n?u:new n(function(d){d(u)})).then(r,o)}c((i=i.apply(e,t||[])).next())})}let mn=class{constructor(){this.listeners={}}on(t,n,i){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),i==null?void 0:i.once){const s=()=>{this.un(t,s),this.un(t,n)};return this.on(t,s),s}return()=>this.un(t,n)}un(t,n){var i;(i=this.listeners[t])===null||i===void 0||i.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(i=>i(...n))}};const wn={decode:function(e,t){return Re(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})},createBuffer:function(e,t){return typeof e[0]=="number"&&(e=[e]),function(n){const i=n[0];if(i.some(s=>s>1||s<-1)){const s=i.length;let a=0;for(let r=0;r<s;r++){const o=Math.abs(i[r]);o>a&&(a=o)}for(const r of n)for(let o=0;o<s;o++)r[o]/=a}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function Vo(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[i,s]of Object.entries(t))if(i==="children")for(const[a,r]of Object.entries(t))typeof r=="string"?n.appendChild(document.createTextNode(r)):n.appendChild(Vo(a,r));else i==="style"?Object.assign(n.style,s):i==="textContent"?n.textContent=s:n.setAttribute(i,s.toString());return n}function ya(e,t,n){const i=Vo(e,t||{});return n==null||n.appendChild(i),i}var Gf=Object.freeze({__proto__:null,createElement:ya,default:ya});const Kf={fetchBlob:function(e,t,n){return Re(this,void 0,void 0,function*(){const i=yield fetch(e,n);if(i.status>=400)throw new Error(`Failed to fetch ${e}: ${i.status} (${i.statusText})`);return function(s,a){Re(this,void 0,void 0,function*(){if(!s.body||!s.headers)return;const r=s.body.getReader(),o=Number(s.headers.get("Content-Length"))||0;let c=0;const l=d=>Re(this,void 0,void 0,function*(){c+=(d==null?void 0:d.length)||0;const f=Math.round(c/o*100);a(f)}),u=()=>Re(this,void 0,void 0,function*(){let d;try{d=yield r.read()}catch{return}d.done||(l(d.value),yield u())});u()})}(i.clone(),t),i.blob()})}};let Xf=class extends mn{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)},{once:!0})}onMediaEvent(t,n,i){return this.media.addEventListener(t,n,i),()=>this.media.removeEventListener(t,n,i)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,n){const i=this.getSrc();if(t&&i===t)return;this.revokeSrc();const s=n instanceof Blob&&(this.canPlayType(n.type)||!t)?URL.createObjectURL(n):t;i&&(this.media.src="");try{this.media.src=s}catch{this.media.src=t}}destroy(){this.isExternalMedia||(this.media.pause(),this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return Re(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=Math.max(0,Math.min(t,this.getDuration()))}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}},qi=class Gi extends mn{constructor(t,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.subscriptions=[],this.options=t;const i=this.parentFromOptionsContainer(t.container);this.parent=i;const[s,a]=this.initHtml();i.appendChild(s),this.container=s,this.scrollContainer=a.querySelector(".scroll"),this.wrapper=a.querySelector(".wrapper"),this.canvasWrapper=a.querySelector(".canvases"),this.progressWrapper=a.querySelector(".progress"),this.cursor=a.querySelector(".cursor"),n&&a.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=n=>{const i=this.wrapper.getBoundingClientRect(),s=n.clientX-i.left,a=n.clientY-i.top;return[s/i.width,a/i.height]};if(this.wrapper.addEventListener("click",n=>{const[i,s]=t(n);this.emit("click",i,s)}),this.wrapper.addEventListener("dblclick",n=>{const[i,s]=t(n);this.emit("dblclick",i,s)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:n,scrollWidth:i,clientWidth:s}=this.scrollContainer,a=n/i,r=(n+s)/i;this.emit("scroll",a,r,n,n+s)}),typeof ResizeObserver=="function"){const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push(function(t,n,i,s,a=3,r=0,o=100){if(!t)return()=>{};const c=matchMedia("(pointer: coarse)").matches;let l=()=>{};const u=d=>{if(d.button!==r)return;d.preventDefault(),d.stopPropagation();let f=d.clientX,v=d.clientY,h=!1;const p=Date.now(),g=S=>{if(S.preventDefault(),S.stopPropagation(),c&&Date.now()-p<o)return;const R=S.clientX,x=S.clientY,E=R-f,O=x-v;if(h||Math.abs(E)>a||Math.abs(O)>a){const B=t.getBoundingClientRect(),{left:_,top:P}=B;h||(i==null||i(f-_,v-P),h=!0),n(E,O,R-_,x-P),f=R,v=x}},y=S=>{if(h){const R=S.clientX,x=S.clientY,E=t.getBoundingClientRect(),{left:O,top:B}=E;s==null||s(R-O,x-B)}l()},b=S=>{S.relatedTarget&&S.relatedTarget!==document.documentElement||y(S)},w=S=>{h&&(S.stopPropagation(),S.preventDefault())},C=S=>{h&&S.preventDefault()};document.addEventListener("pointermove",g),document.addEventListener("pointerup",y),document.addEventListener("pointerout",b),document.addEventListener("pointercancel",b),document.addEventListener("touchmove",C,{passive:!1}),document.addEventListener("click",w,{capture:!0}),l=()=>{document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",y),document.removeEventListener("pointerout",b),document.removeEventListener("pointercancel",b),document.removeEventListener("touchmove",C),setTimeout(()=>{document.removeEventListener("click",w,{capture:!0})},10)}};return t.addEventListener("pointerdown",u),()=>{l(),t.removeEventListener("pointerdown",u)}}(this.wrapper,(t,n,i)=>{this.emit("drag",Math.max(0,Math.min(1,i/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}))}getHeight(t,n){var i;const s=((i=this.audioData)===null||i===void 0?void 0:i.numberOfChannels)||1;if(t==null)return 128;if(!isNaN(Number(t)))return Number(t);if(t==="auto"){const a=this.parent.clientHeight||128;return n!=null&&n.every(r=>!r.overlay)?a/s:a}return 128}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"}),i=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return n.innerHTML=`
      <style${i?` nonce="${i}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:n}=this.scrollContainer,i=n*t;this.setScroll(i)}destroy(){var t,n;this.subscriptions.forEach(i=>i()),this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(n=this.unsubscribeOnScroll)===null||n===void 0||n.forEach(i=>i()),this.unsubscribeOnScroll=[]}createDelay(t=10){let n,i;const s=()=>{n&&clearTimeout(n),i&&i()};return this.timeouts.push(s),()=>new Promise((a,r)=>{s(),i=r,n=setTimeout(()=>{n=void 0,i=void 0,a()},t)})}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),i=n.getContext("2d"),s=n.height*(window.devicePixelRatio||1),a=i.createLinearGradient(0,0,0,s),r=1/(t.length-1);return t.forEach((o,c)=>{const l=c*r;a.addColorStop(l,o)}),a}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(t,n,i,s){const a=t[0],r=t[1]||t[0],o=a.length,{width:c,height:l}=i.canvas,u=l/2,d=this.getPixelRatio(),f=n.barWidth?n.barWidth*d:1,v=n.barGap?n.barGap*d:n.barWidth?f/2:0,h=n.barRadius||0,p=c/(f+v)/o,g=h&&"roundRect"in i?"roundRect":"rect";i.beginPath();let y=0,b=0,w=0;for(let C=0;C<=o;C++){const S=Math.round(C*p);if(S>y){const E=Math.round(b*u*s),O=E+Math.round(w*u*s)||1;let B=u-E;n.barAlign==="top"?B=0:n.barAlign==="bottom"&&(B=l-O),i[g](y*(f+v),B,f,O,h),y=S,b=0,w=0}const R=Math.abs(a[C]||0),x=Math.abs(r[C]||0);R>b&&(b=R),x>w&&(w=x)}i.fill(),i.closePath()}renderLineWaveform(t,n,i,s){const a=r=>{const o=t[r]||t[0],c=o.length,{height:l}=i.canvas,u=l/2,d=i.canvas.width/c;i.moveTo(0,u);let f=0,v=0;for(let h=0;h<=c;h++){const p=Math.round(h*d);if(p>f){const y=u+(Math.round(v*u*s)||1)*(r===0?-1:1);i.lineTo(f,y),f=p,v=0}const g=Math.abs(o[h]||0);g>v&&(v=g)}i.lineTo(f,u)};i.beginPath(),a(0),a(1),i.fill(),i.closePath()}renderWaveform(t,n,i){if(i.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction)return void n.renderFunction(t,i);let s=n.barHeight||1;if(n.normalize){const a=Array.from(t[0]).reduce((r,o)=>Math.max(r,Math.abs(o)),0);s=a?1/a:1}n.barWidth||n.barGap||n.barAlign?this.renderBarWaveform(t,n,i,s):this.renderLineWaveform(t,n,i,s)}renderSingleCanvas(t,n,i,s,a,r,o){const c=this.getPixelRatio(),l=document.createElement("canvas");l.width=Math.round(i*c),l.height=Math.round(s*c),l.style.width=`${i}px`,l.style.height=`${s}px`,l.style.left=`${Math.round(a)}px`,r.appendChild(l);const u=l.getContext("2d");if(this.renderWaveform(t,n,u),l.width>0&&l.height>0){const d=l.cloneNode(),f=d.getContext("2d");f.drawImage(l,0,0),f.globalCompositeOperation="source-in",f.fillStyle=this.convertColorValues(n.progressColor),f.fillRect(0,0,l.width,l.height),o.appendChild(d)}}renderMultiCanvas(t,n,i,s,a,r){const o=this.getPixelRatio(),{clientWidth:c}=this.scrollContainer,l=i/o;let u=Math.min(Gi.MAX_CANVAS_WIDTH,c,l),d={};if(u===0)return;if(n.barWidth||n.barGap){const g=n.barWidth||.5,y=g+(n.barGap||g/2);u%y!=0&&(u=Math.floor(u/y)*y)}const f=g=>{if(g<0||g>=v||d[g])return;d[g]=!0;const y=g*u,b=Math.min(l-y,u);if(b<=0)return;const w=t.map(C=>{const S=Math.floor(y/l*C.length),R=Math.floor((y+b)/l*C.length);return C.slice(S,R)});this.renderSingleCanvas(w,n,b,s,y,a,r)},v=Math.ceil(l/u);if(!this.isScrollable){for(let g=0;g<v;g++)f(g);return}const h=this.scrollContainer.scrollLeft/l,p=Math.floor(h*v);if(f(p-1),f(p),f(p+1),v>1){const g=this.on("scroll",()=>{const{scrollLeft:y}=this.scrollContainer,b=Math.floor(y/l*v);Object.keys(d).length>Gi.MAX_NODES&&(a.innerHTML="",r.innerHTML="",d={}),f(b-1),f(b),f(b+1)});this.unsubscribeOnScroll.push(g)}}renderChannel(t,n,i,s){var{overlay:a}=n,r=function(u,d){var f={};for(var v in u)Object.prototype.hasOwnProperty.call(u,v)&&d.indexOf(v)<0&&(f[v]=u[v]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function"){var h=0;for(v=Object.getOwnPropertySymbols(u);h<v.length;h++)d.indexOf(v[h])<0&&Object.prototype.propertyIsEnumerable.call(u,v[h])&&(f[v[h]]=u[v[h]])}return f}(n,["overlay"]);const o=document.createElement("div"),c=this.getHeight(r.height,r.splitChannels);o.style.height=`${c}px`,a&&s>0&&(o.style.marginTop=`-${c}px`),this.canvasWrapper.style.minHeight=`${c}px`,this.canvasWrapper.appendChild(o);const l=o.cloneNode();this.progressWrapper.appendChild(l),this.renderMultiCanvas(t,r,i,c,o,l)}render(t){return Re(this,void 0,void 0,function*(){var n;this.timeouts.forEach(c=>c()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const i=this.getPixelRatio(),s=this.scrollContainer.clientWidth,a=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=a>s;const r=this.options.fillParent&&!this.isScrollable,o=(r?s:a)*i;if(this.wrapper.style.width=r?"100%":`${a}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render"),this.options.splitChannels)for(let c=0;c<t.numberOfChannels;c++){const l=Object.assign(Object.assign({},this.options),(n=this.options.splitChannels)===null||n===void 0?void 0:n[c]);this.renderChannel([t.getChannelData(c)],l,o,c)}else{const c=[t.getChannelData(0)];t.numberOfChannels>1&&c.push(t.getChannelData(1)),this.renderChannel(c,this.options,o,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){if(this.unsubscribeOnScroll.forEach(i=>i()),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:t}=this.scrollContainer,{right:n}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&t!==this.scrollContainer.scrollWidth){const{right:i}=this.progressWrapper.getBoundingClientRect();let s=i-n;s*=2,s=s<0?Math.floor(s):Math.ceil(s),s/=2,this.scrollContainer.scrollLeft+=s}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{scrollLeft:i,scrollWidth:s,clientWidth:a}=this.scrollContainer,r=t*s,o=i,c=i+a,l=a/2;if(this.isDragging)r+30>c?this.scrollContainer.scrollLeft+=30:r-30<o&&(this.scrollContainer.scrollLeft-=30);else{(r<o||r>c)&&(this.scrollContainer.scrollLeft=r-(this.options.autoCenter?l:0));const u=r-i-l;n&&this.options.autoCenter&&u>0&&(this.scrollContainer.scrollLeft+=Math.min(u,10))}{const u=this.scrollContainer.scrollLeft,d=u/s,f=(u+a)/s;this.emit("scroll",d,f,u,u+a)}}renderProgress(t,n){if(isNaN(t))return;const i=100*t;this.canvasWrapper.style.clipPath=`polygon(${i}% 0, 100% 0, 100% 100%, ${i}% 100%)`,this.progressWrapper.style.width=`${i}%`,this.cursor.style.left=`${i}%`,this.cursor.style.transform=`translateX(-${Math.round(i)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,n)}exportImage(t,n,i){return Re(this,void 0,void 0,function*(){const s=this.canvasWrapper.querySelectorAll("canvas");if(!s.length)throw new Error("No waveform data");if(i==="dataURL"){const a=Array.from(s).map(r=>r.toDataURL(t,n));return Promise.resolve(a)}return Promise.all(Array.from(s).map(a=>new Promise((r,o)=>{a.toBlob(c=>{c?r(c):o(new Error("Could not export image"))},t,n)})))})}};qi.MAX_CANVAS_WIDTH=8e3,qi.MAX_NODES=10;let Yf=class extends mn{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}},Ei=class extends mn{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return Re(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then(n=>{if(n.status>=400)throw new Error(`Failed to fetch ${t}: ${n.status} (${n.statusText})`);return n.arrayBuffer()}).then(n=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(n)).then(n=>{this.currentSrc===t&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var t;if(!this.paused)return;this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let n=this.playedDuration*this._playbackRate;(n>=this.duration||n<0)&&(n=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,n),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return Re(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){const n=t-this.currentTime,i=this.bufferNode;i==null||i.stop(this.audioContext.currentTime+n),i==null||i.addEventListener("ended",()=>{i===this.bufferNode&&(this.bufferNode=null,this.pause())},{once:!0})}setSinkId(t){return Re(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const n=!this.paused;n&&this._pause(),this.playedDuration=t/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,n;return(t=this._duration)!==null&&t!==void 0?t:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const n=this.buffer.numberOfChannels;for(let i=0;i<n;i++)t.push(this.buffer.getChannelData(i));return t}};const Jf={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};let Ki=class Do extends Xf{static create(t){return new Do(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new Ei:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.stopAtPosition=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},Jf,t),this.timer=new Yf;const i=n?void 0:this.getMediaElement();this.renderer=new qi(this.options,i),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const s=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:a,duration:r}=this.options;(s||a&&r)&&this.load(s,a,r).catch(()=>null)})}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t),this.stopAtPosition!=null&&this.isPlaying()&&t>=this.stopAtPosition&&this.pause()}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.updateProgress();this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop(),this.stopAtPosition=null}),this.onMediaEvent("emptied",()=>{this.timer.stop(),this.stopAtPosition=null}),this.onMediaEvent("ended",()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish"),this.stopAtPosition=null}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",()=>{var t;this.emit("error",(t=this.getMediaElement().error)!==null&&t!==void 0?t:new Error("Media error")),this.stopAtPosition=null}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n,i,s)=>{const a=this.getDuration();this.emit("scroll",t*a,n*a,i,s)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",t=>{this.emit("dragstart",t)}),this.renderer.on("dragend",t=>{this.emit("dragend",t)}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{if(!this.options.interact)return;let i;this.renderer.renderProgress(n),clearTimeout(t),this.isPlaying()?i=0:this.options.dragToSeek===!0?i=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(i=this.options.dragToSeek.debounceTime),t=setTimeout(()=>{this.seekTo(n)},i),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),t.duration&&!t.peaks&&(this.decodedData=wn.createBuffer(this.exportPeaks(),t.duration)),t.peaks&&t.duration&&(this.decodedData=wn.createBuffer(t.peaks,t.duration)),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t._init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const n=t/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(t,n,i,s){return Re(this,void 0,void 0,function*(){var a;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,this.stopAtPosition=null,!n&&!i){const o=this.options.fetchParams||{};window.AbortController&&!o.signal&&(this.abortController=new AbortController,o.signal=(a=this.abortController)===null||a===void 0?void 0:a.signal);const c=u=>this.emit("loading",u);n=yield Kf.fetchBlob(t,c,o);const l=this.options.blobMimeType;l&&(n=new Blob([n],{type:l}))}this.setSrc(t,n);const r=yield new Promise(o=>{const c=s||this.getDuration();c?o(c):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>o(this.getDuration()),{once:!0}))});if(!t&&!n){const o=this.getMediaElement();o instanceof Ei&&(o.duration=r)}if(i)this.decodedData=wn.createBuffer(i,r||0);else if(n){const o=yield n.arrayBuffer();this.decodedData=yield wn.decode(o,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(t,n,i){return Re(this,void 0,void 0,function*(){try{return yield this.loadAudio(t,void 0,n,i)}catch(s){throw this.emit("error",s),s}})}loadBlob(t,n,i){return Re(this,void 0,void 0,function*(){try{return yield this.loadAudio("",t,n,i)}catch(s){throw this.emit("error",s),s}})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:i=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const s=Math.min(t,this.decodedData.numberOfChannels),a=[];for(let r=0;r<s;r++){const o=this.decodedData.getChannelData(r),c=[],l=o.length/n;for(let u=0;u<n;u++){const d=o.slice(Math.floor(u*l),Math.ceil((u+1)*l));let f=0;for(let v=0;v<d.length;v++){const h=d[v];Math.abs(h)>Math.abs(f)&&(f=h)}c.push(Math.round(f*i)/i)}a.push(c)}return a}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){this.stopAtPosition=null,super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}play(t,n){const i=Object.create(null,{play:{get:()=>super.play}});return Re(this,void 0,void 0,function*(){t!=null&&this.setTime(t);const s=yield i.play.call(this);return n!=null&&(this.media instanceof Ei?this.media.stopAt(n):this.stopAtPosition=n),s})}playPause(){return Re(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return Re(this,arguments,void 0,function*(t="image/png",n=1,i="dataURL"){return this.renderer.exportImage(t,n,i)})}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach(n=>n.destroy()),this.subscriptions.forEach(n=>n()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}};Ki.BasePlugin=class extends mn{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}_init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}},Ki.dom=Gf;const Qf=({containerRef:e,options:t})=>{const n=z(null),i=()=>{e.value&&(n.value=Ki.create({container:e.value,...t}))},s=()=>{n.value&&(n.value.destroy(),n.value=null)};return bt(()=>{i()}),Ea(()=>{s()}),{waveSurfer:n}},Zf=e=>{const t=z(!1),n=z(!1),i=z(0),s=z(0),a=()=>{t.value=!1,n.value=!1,i.value=0},r=d=>{t.value=!0,n.value=!1,i.value=0,s.value=d},o=()=>{n.value=!0},c=()=>{n.value=!1},l=()=>{e.value&&(i.value=e.value.getCurrentTime())},u=()=>{t.value=!1,n.value=!1};return bt(()=>{e.value&&(e.value.on("load",a),e.value.on("ready",r),e.value.on("play",o),e.value.on("pause",c),e.value.on("timeupdate",l),e.value.on("destroy",u))}),Ea(()=>{e.value&&e.value.unAll()}),{isReady:t,isPlaying:n,currentTime:i,totalDuration:s}},ev=({containerRef:e,options:t})=>{const{waveSurfer:n}=Qf({containerRef:e,options:t}),{isReady:i,totalDuration:s,isPlaying:a,currentTime:r}=Zf(n);return{waveSurfer:n,isReady:i,totalDuration:s,isPlaying:a,currentTime:r}},tv=["audioprocess","click","dblclick","decode","drag","finish","init","interaction","load","loading","pause","play","ready","redraw","redrawcomplete","scroll","seeking","timeupdate","zoom"],nv=xa({__name:"WaveSurferPlayer",props:{options:{}},setup(e){const t=e,n=z(null),{waveSurfer:i}=ev({containerRef:n,options:t.options}),s=fl();return bt(()=>{tv.forEach(a=>{var r;(r=i.value)==null||r.on(a,(...o)=>{s==null||s.emit(a,...o)})}),s==null||s.emit("waveSurfer",i.value)}),(a,r)=>(K(),Ft("div",{ref_key:"containerRef",ref:n},null,512))}});class gn{constructor(){this.listeners={}}on(t,n,i){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),i==null?void 0:i.once){const s=()=>{this.un(t,s),this.un(t,n)};return this.on(t,s),s}return()=>this.un(t,n)}un(t,n){var i;(i=this.listeners[t])===null||i===void 0||i.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(i=>i(...n))}}class Bo extends gn{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}_init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}}function Pe(e,t,n,i){return new(n||(n=Promise))(function(s,a){function r(l){try{c(i.next(l))}catch(u){a(u)}}function o(l){try{c(i.throw(l))}catch(u){a(u)}}function c(l){var u;l.done?s(l.value):(u=l.value,u instanceof n?u:new n(function(d){d(u)})).then(r,o)}c((i=i.apply(e,t||[])).next())})}const Cn={decode:function(e,t){return Pe(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})},createBuffer:function(e,t){return typeof e[0]=="number"&&(e=[e]),function(n){const i=n[0];if(i.some(s=>s>1||s<-1)){const s=i.length;let a=0;for(let r=0;r<s;r++){const o=Math.abs(i[r]);o>a&&(a=o)}for(const r of n)for(let o=0;o<s;o++)r[o]/=a}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function Mo(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[i,s]of Object.entries(t))if(i==="children")for(const[a,r]of Object.entries(t))typeof r=="string"?n.appendChild(document.createTextNode(r)):n.appendChild(Mo(a,r));else i==="style"?Object.assign(n.style,s):i==="textContent"?n.textContent=s:n.setAttribute(i,s.toString());return n}function Wn(e,t,n){const i=Mo(e,t||{});return n==null||n.appendChild(i),i}var iv=Object.freeze({__proto__:null,createElement:Wn,default:Wn});const sv={fetchBlob:function(e,t,n){return Pe(this,void 0,void 0,function*(){const i=yield fetch(e,n);if(i.status>=400)throw new Error(`Failed to fetch ${e}: ${i.status} (${i.statusText})`);return function(s,a){Pe(this,void 0,void 0,function*(){if(!s.body||!s.headers)return;const r=s.body.getReader(),o=Number(s.headers.get("Content-Length"))||0;let c=0;const l=d=>Pe(this,void 0,void 0,function*(){c+=(d==null?void 0:d.length)||0;const f=Math.round(c/o*100);a(f)}),u=()=>Pe(this,void 0,void 0,function*(){let d;try{d=yield r.read()}catch{return}d.done||(l(d.value),yield u())});u()})}(i.clone(),t),i.blob()})}};class av extends gn{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)},{once:!0})}onMediaEvent(t,n,i){return this.media.addEventListener(t,n,i),()=>this.media.removeEventListener(t,n,i)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,n){const i=this.getSrc();if(t&&i===t)return;this.revokeSrc();const s=n instanceof Blob&&(this.canPlayType(n.type)||!t)?URL.createObjectURL(n):t;i&&(this.media.src="");try{this.media.src=s}catch{this.media.src=t}}destroy(){this.isExternalMedia||(this.media.pause(),this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return Pe(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=Math.max(0,Math.min(t,this.getDuration()))}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}class It extends gn{constructor(t,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.subscriptions=[],this.options=t;const i=this.parentFromOptionsContainer(t.container);this.parent=i;const[s,a]=this.initHtml();i.appendChild(s),this.container=s,this.scrollContainer=a.querySelector(".scroll"),this.wrapper=a.querySelector(".wrapper"),this.canvasWrapper=a.querySelector(".canvases"),this.progressWrapper=a.querySelector(".progress"),this.cursor=a.querySelector(".cursor"),n&&a.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=n=>{const i=this.wrapper.getBoundingClientRect(),s=n.clientX-i.left,a=n.clientY-i.top;return[s/i.width,a/i.height]};if(this.wrapper.addEventListener("click",n=>{const[i,s]=t(n);this.emit("click",i,s)}),this.wrapper.addEventListener("dblclick",n=>{const[i,s]=t(n);this.emit("dblclick",i,s)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:n,scrollWidth:i,clientWidth:s}=this.scrollContainer,a=n/i,r=(n+s)/i;this.emit("scroll",a,r,n,n+s)}),typeof ResizeObserver=="function"){const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push(function(t,n,i,s,a=3,r=0,o=100){if(!t)return()=>{};const c=matchMedia("(pointer: coarse)").matches;let l=()=>{};const u=d=>{if(d.button!==r)return;d.preventDefault(),d.stopPropagation();let f=d.clientX,v=d.clientY,h=!1;const p=Date.now(),g=S=>{if(S.preventDefault(),S.stopPropagation(),c&&Date.now()-p<o)return;const R=S.clientX,x=S.clientY,E=R-f,O=x-v;if(h||Math.abs(E)>a||Math.abs(O)>a){const B=t.getBoundingClientRect(),{left:_,top:P}=B;h||(i==null||i(f-_,v-P),h=!0),n(E,O,R-_,x-P),f=R,v=x}},y=S=>{if(h){const R=S.clientX,x=S.clientY,E=t.getBoundingClientRect(),{left:O,top:B}=E;s==null||s(R-O,x-B)}l()},b=S=>{S.relatedTarget&&S.relatedTarget!==document.documentElement||y(S)},w=S=>{h&&(S.stopPropagation(),S.preventDefault())},C=S=>{h&&S.preventDefault()};document.addEventListener("pointermove",g),document.addEventListener("pointerup",y),document.addEventListener("pointerout",b),document.addEventListener("pointercancel",b),document.addEventListener("touchmove",C,{passive:!1}),document.addEventListener("click",w,{capture:!0}),l=()=>{document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",y),document.removeEventListener("pointerout",b),document.removeEventListener("pointercancel",b),document.removeEventListener("touchmove",C),setTimeout(()=>{document.removeEventListener("click",w,{capture:!0})},10)}};return t.addEventListener("pointerdown",u),()=>{l(),t.removeEventListener("pointerdown",u)}}(this.wrapper,(t,n,i)=>{this.emit("drag",Math.max(0,Math.min(1,i/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}))}getHeight(t,n){var i;const s=((i=this.audioData)===null||i===void 0?void 0:i.numberOfChannels)||1;if(t==null)return 128;if(!isNaN(Number(t)))return Number(t);if(t==="auto"){const a=this.parent.clientHeight||128;return n!=null&&n.every(r=>!r.overlay)?a/s:a}return 128}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"}),i=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return n.innerHTML=`
      <style${i?` nonce="${i}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:n}=this.scrollContainer,i=n*t;this.setScroll(i)}destroy(){var t,n;this.subscriptions.forEach(i=>i()),this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(n=this.unsubscribeOnScroll)===null||n===void 0||n.forEach(i=>i()),this.unsubscribeOnScroll=[]}createDelay(t=10){let n,i;const s=()=>{n&&clearTimeout(n),i&&i()};return this.timeouts.push(s),()=>new Promise((a,r)=>{s(),i=r,n=setTimeout(()=>{n=void 0,i=void 0,a()},t)})}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),i=n.getContext("2d"),s=n.height*(window.devicePixelRatio||1),a=i.createLinearGradient(0,0,0,s),r=1/(t.length-1);return t.forEach((o,c)=>{const l=c*r;a.addColorStop(l,o)}),a}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(t,n,i,s){const a=t[0],r=t[1]||t[0],o=a.length,{width:c,height:l}=i.canvas,u=l/2,d=this.getPixelRatio(),f=n.barWidth?n.barWidth*d:1,v=n.barGap?n.barGap*d:n.barWidth?f/2:0,h=n.barRadius||0,p=c/(f+v)/o,g=h&&"roundRect"in i?"roundRect":"rect";i.beginPath();let y=0,b=0,w=0;for(let C=0;C<=o;C++){const S=Math.round(C*p);if(S>y){const E=Math.round(b*u*s),O=E+Math.round(w*u*s)||1;let B=u-E;n.barAlign==="top"?B=0:n.barAlign==="bottom"&&(B=l-O),i[g](y*(f+v),B,f,O,h),y=S,b=0,w=0}const R=Math.abs(a[C]||0),x=Math.abs(r[C]||0);R>b&&(b=R),x>w&&(w=x)}i.fill(),i.closePath()}renderLineWaveform(t,n,i,s){const a=r=>{const o=t[r]||t[0],c=o.length,{height:l}=i.canvas,u=l/2,d=i.canvas.width/c;i.moveTo(0,u);let f=0,v=0;for(let h=0;h<=c;h++){const p=Math.round(h*d);if(p>f){const y=u+(Math.round(v*u*s)||1)*(r===0?-1:1);i.lineTo(f,y),f=p,v=0}const g=Math.abs(o[h]||0);g>v&&(v=g)}i.lineTo(f,u)};i.beginPath(),a(0),a(1),i.fill(),i.closePath()}renderWaveform(t,n,i){if(i.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction)return void n.renderFunction(t,i);let s=n.barHeight||1;if(n.normalize){const a=Array.from(t[0]).reduce((r,o)=>Math.max(r,Math.abs(o)),0);s=a?1/a:1}n.barWidth||n.barGap||n.barAlign?this.renderBarWaveform(t,n,i,s):this.renderLineWaveform(t,n,i,s)}renderSingleCanvas(t,n,i,s,a,r,o){const c=this.getPixelRatio(),l=document.createElement("canvas");l.width=Math.round(i*c),l.height=Math.round(s*c),l.style.width=`${i}px`,l.style.height=`${s}px`,l.style.left=`${Math.round(a)}px`,r.appendChild(l);const u=l.getContext("2d");if(this.renderWaveform(t,n,u),l.width>0&&l.height>0){const d=l.cloneNode(),f=d.getContext("2d");f.drawImage(l,0,0),f.globalCompositeOperation="source-in",f.fillStyle=this.convertColorValues(n.progressColor),f.fillRect(0,0,l.width,l.height),o.appendChild(d)}}renderMultiCanvas(t,n,i,s,a,r){const o=this.getPixelRatio(),{clientWidth:c}=this.scrollContainer,l=i/o;let u=Math.min(It.MAX_CANVAS_WIDTH,c,l),d={};if(u===0)return;if(n.barWidth||n.barGap){const g=n.barWidth||.5,y=g+(n.barGap||g/2);u%y!=0&&(u=Math.floor(u/y)*y)}const f=g=>{if(g<0||g>=v||d[g])return;d[g]=!0;const y=g*u,b=Math.min(l-y,u);if(b<=0)return;const w=t.map(C=>{const S=Math.floor(y/l*C.length),R=Math.floor((y+b)/l*C.length);return C.slice(S,R)});this.renderSingleCanvas(w,n,b,s,y,a,r)},v=Math.ceil(l/u);if(!this.isScrollable){for(let g=0;g<v;g++)f(g);return}const h=this.scrollContainer.scrollLeft/l,p=Math.floor(h*v);if(f(p-1),f(p),f(p+1),v>1){const g=this.on("scroll",()=>{const{scrollLeft:y}=this.scrollContainer,b=Math.floor(y/l*v);Object.keys(d).length>It.MAX_NODES&&(a.innerHTML="",r.innerHTML="",d={}),f(b-1),f(b),f(b+1)});this.unsubscribeOnScroll.push(g)}}renderChannel(t,n,i,s){var{overlay:a}=n,r=function(u,d){var f={};for(var v in u)Object.prototype.hasOwnProperty.call(u,v)&&d.indexOf(v)<0&&(f[v]=u[v]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function"){var h=0;for(v=Object.getOwnPropertySymbols(u);h<v.length;h++)d.indexOf(v[h])<0&&Object.prototype.propertyIsEnumerable.call(u,v[h])&&(f[v[h]]=u[v[h]])}return f}(n,["overlay"]);const o=document.createElement("div"),c=this.getHeight(r.height,r.splitChannels);o.style.height=`${c}px`,a&&s>0&&(o.style.marginTop=`-${c}px`),this.canvasWrapper.style.minHeight=`${c}px`,this.canvasWrapper.appendChild(o);const l=o.cloneNode();this.progressWrapper.appendChild(l),this.renderMultiCanvas(t,r,i,c,o,l)}render(t){return Pe(this,void 0,void 0,function*(){var n;this.timeouts.forEach(c=>c()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const i=this.getPixelRatio(),s=this.scrollContainer.clientWidth,a=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=a>s;const r=this.options.fillParent&&!this.isScrollable,o=(r?s:a)*i;if(this.wrapper.style.width=r?"100%":`${a}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render"),this.options.splitChannels)for(let c=0;c<t.numberOfChannels;c++){const l=Object.assign(Object.assign({},this.options),(n=this.options.splitChannels)===null||n===void 0?void 0:n[c]);this.renderChannel([t.getChannelData(c)],l,o,c)}else{const c=[t.getChannelData(0)];t.numberOfChannels>1&&c.push(t.getChannelData(1)),this.renderChannel(c,this.options,o,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){if(this.unsubscribeOnScroll.forEach(i=>i()),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:t}=this.scrollContainer,{right:n}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&t!==this.scrollContainer.scrollWidth){const{right:i}=this.progressWrapper.getBoundingClientRect();let s=i-n;s*=2,s=s<0?Math.floor(s):Math.ceil(s),s/=2,this.scrollContainer.scrollLeft+=s}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{scrollLeft:i,scrollWidth:s,clientWidth:a}=this.scrollContainer,r=t*s,o=i,c=i+a,l=a/2;if(this.isDragging)r+30>c?this.scrollContainer.scrollLeft+=30:r-30<o&&(this.scrollContainer.scrollLeft-=30);else{(r<o||r>c)&&(this.scrollContainer.scrollLeft=r-(this.options.autoCenter?l:0));const u=r-i-l;n&&this.options.autoCenter&&u>0&&(this.scrollContainer.scrollLeft+=Math.min(u,10))}{const u=this.scrollContainer.scrollLeft,d=u/s,f=(u+a)/s;this.emit("scroll",d,f,u,u+a)}}renderProgress(t,n){if(isNaN(t))return;const i=100*t;this.canvasWrapper.style.clipPath=`polygon(${i}% 0, 100% 0, 100% 100%, ${i}% 100%)`,this.progressWrapper.style.width=`${i}%`,this.cursor.style.left=`${i}%`,this.cursor.style.transform=`translateX(-${Math.round(i)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,n)}exportImage(t,n,i){return Pe(this,void 0,void 0,function*(){const s=this.canvasWrapper.querySelectorAll("canvas");if(!s.length)throw new Error("No waveform data");if(i==="dataURL"){const a=Array.from(s).map(r=>r.toDataURL(t,n));return Promise.resolve(a)}return Promise.all(Array.from(s).map(a=>new Promise((r,o)=>{a.toBlob(c=>{c?r(c):o(new Error("Could not export image"))},t,n)})))})}}It.MAX_CANVAS_WIDTH=8e3,It.MAX_NODES=10;class rv extends gn{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class Ri extends gn{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return Pe(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then(n=>{if(n.status>=400)throw new Error(`Failed to fetch ${t}: ${n.status} (${n.statusText})`);return n.arrayBuffer()}).then(n=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(n)).then(n=>{this.currentSrc===t&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var t;if(!this.paused)return;this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let n=this.playedDuration*this._playbackRate;(n>=this.duration||n<0)&&(n=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,n),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return Pe(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){const n=t-this.currentTime,i=this.bufferNode;i==null||i.stop(this.audioContext.currentTime+n),i==null||i.addEventListener("ended",()=>{i===this.bufferNode&&(this.bufferNode=null,this.pause())},{once:!0})}setSinkId(t){return Pe(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const n=!this.paused;n&&this._pause(),this.playedDuration=t/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,n;return(t=this._duration)!==null&&t!==void 0?t:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const n=this.buffer.numberOfChannels;for(let i=0;i<n;i++)t.push(this.buffer.getChannelData(i));return t}}const ov={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class rn extends av{static create(t){return new rn(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new Ri:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.stopAtPosition=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},ov,t),this.timer=new rv;const i=n?void 0:this.getMediaElement();this.renderer=new It(this.options,i),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const s=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:a,duration:r}=this.options;(s||a&&r)&&this.load(s,a,r).catch(()=>null)})}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t),this.stopAtPosition!=null&&this.isPlaying()&&t>=this.stopAtPosition&&this.pause()}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.updateProgress();this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop(),this.stopAtPosition=null}),this.onMediaEvent("emptied",()=>{this.timer.stop(),this.stopAtPosition=null}),this.onMediaEvent("ended",()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish"),this.stopAtPosition=null}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",()=>{var t;this.emit("error",(t=this.getMediaElement().error)!==null&&t!==void 0?t:new Error("Media error")),this.stopAtPosition=null}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n,i,s)=>{const a=this.getDuration();this.emit("scroll",t*a,n*a,i,s)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",t=>{this.emit("dragstart",t)}),this.renderer.on("dragend",t=>{this.emit("dragend",t)}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{if(!this.options.interact)return;let i;this.renderer.renderProgress(n),clearTimeout(t),this.isPlaying()?i=0:this.options.dragToSeek===!0?i=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(i=this.options.dragToSeek.debounceTime),t=setTimeout(()=>{this.seekTo(n)},i),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),t.duration&&!t.peaks&&(this.decodedData=Cn.createBuffer(this.exportPeaks(),t.duration)),t.peaks&&t.duration&&(this.decodedData=Cn.createBuffer(t.peaks,t.duration)),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t._init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const n=t/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(t,n,i,s){return Pe(this,void 0,void 0,function*(){var a;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,this.stopAtPosition=null,!n&&!i){const o=this.options.fetchParams||{};window.AbortController&&!o.signal&&(this.abortController=new AbortController,o.signal=(a=this.abortController)===null||a===void 0?void 0:a.signal);const c=u=>this.emit("loading",u);n=yield sv.fetchBlob(t,c,o);const l=this.options.blobMimeType;l&&(n=new Blob([n],{type:l}))}this.setSrc(t,n);const r=yield new Promise(o=>{const c=s||this.getDuration();c?o(c):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>o(this.getDuration()),{once:!0}))});if(!t&&!n){const o=this.getMediaElement();o instanceof Ri&&(o.duration=r)}if(i)this.decodedData=Cn.createBuffer(i,r||0);else if(n){const o=yield n.arrayBuffer();this.decodedData=yield Cn.decode(o,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(t,n,i){return Pe(this,void 0,void 0,function*(){try{return yield this.loadAudio(t,void 0,n,i)}catch(s){throw this.emit("error",s),s}})}loadBlob(t,n,i){return Pe(this,void 0,void 0,function*(){try{return yield this.loadAudio("",t,n,i)}catch(s){throw this.emit("error",s),s}})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:i=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const s=Math.min(t,this.decodedData.numberOfChannels),a=[];for(let r=0;r<s;r++){const o=this.decodedData.getChannelData(r),c=[],l=o.length/n;for(let u=0;u<n;u++){const d=o.slice(Math.floor(u*l),Math.ceil((u+1)*l));let f=0;for(let v=0;v<d.length;v++){const h=d[v];Math.abs(h)>Math.abs(f)&&(f=h)}c.push(Math.round(f*i)/i)}a.push(c)}return a}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){this.stopAtPosition=null,super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}play(t,n){const i=Object.create(null,{play:{get:()=>super.play}});return Pe(this,void 0,void 0,function*(){t!=null&&this.setTime(t);const s=yield i.play.call(this);return n!=null&&(this.media instanceof Ri?this.media.stopAt(n):this.stopAtPosition=n),s})}playPause(){return Pe(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return Pe(this,arguments,void 0,function*(t="image/png",n=1,i="dataURL"){return this.renderer.exportImage(t,n,i)})}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach(n=>n.destroy()),this.subscriptions.forEach(n=>n()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}rn.BasePlugin=Bo,rn.dom=iv;const lv={height:50,overlayColor:"rgba(100, 100, 100, 0.1)",insertPosition:"afterend"};class ks extends Bo{constructor(t){super(t),this.miniWavesurfer=null,this.container=null,this.options=Object.assign({},lv,t),this.minimapWrapper=this.initMinimapWrapper(),this.overlay=this.initOverlay()}static create(t){return new ks(t)}onInit(){var t,n;if(!this.wavesurfer)throw Error("WaveSurfer is not initialized");this.options.container?(typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.options.container instanceof HTMLElement&&(this.container=this.options.container),(t=this.container)===null||t===void 0||t.appendChild(this.minimapWrapper)):(this.container=this.wavesurfer.getWrapper().parentElement,(n=this.container)===null||n===void 0||n.insertAdjacentElement(this.options.insertPosition,this.minimapWrapper)),this.initWaveSurferEvents(),Promise.resolve().then(()=>{this.initMinimap()})}initMinimapWrapper(){return Wn("div",{part:"minimap",style:{position:"relative"}})}initOverlay(){return Wn("div",{part:"minimap-overlay",style:{position:"absolute",zIndex:"2",left:"0",top:"0",bottom:"0",transition:"left 100ms ease-out",pointerEvents:"none",backgroundColor:this.options.overlayColor}},this.minimapWrapper)}initMinimap(){if(this.miniWavesurfer&&(this.miniWavesurfer.destroy(),this.miniWavesurfer=null),!this.wavesurfer)return;const t=this.wavesurfer.getDecodedData(),n=this.wavesurfer.getMediaElement();if(!t||!n)return;const i=[];for(let s=0;s<t.numberOfChannels;s++)i.push(t.getChannelData(s));this.miniWavesurfer=rn.create(Object.assign(Object.assign({},this.options),{container:this.minimapWrapper,minPxPerSec:0,fillParent:!0,media:n,peaks:i,duration:t.duration})),this.subscriptions.push(this.miniWavesurfer.on("audioprocess",s=>{this.emit("audioprocess",s)}),this.miniWavesurfer.on("click",(s,a)=>{this.emit("click",s,a)}),this.miniWavesurfer.on("dblclick",(s,a)=>{this.emit("dblclick",s,a)}),this.miniWavesurfer.on("decode",s=>{this.emit("decode",s)}),this.miniWavesurfer.on("destroy",()=>{this.emit("destroy")}),this.miniWavesurfer.on("drag",s=>{this.emit("drag",s)}),this.miniWavesurfer.on("dragend",s=>{this.emit("dragend",s)}),this.miniWavesurfer.on("dragstart",s=>{this.emit("dragstart",s)}),this.miniWavesurfer.on("interaction",()=>{this.emit("interaction")}),this.miniWavesurfer.on("init",()=>{this.emit("init")}),this.miniWavesurfer.on("ready",()=>{this.emit("ready")}),this.miniWavesurfer.on("redraw",()=>{this.emit("redraw")}),this.miniWavesurfer.on("redrawcomplete",()=>{this.emit("redrawcomplete")}),this.miniWavesurfer.on("seeking",s=>{this.emit("seeking",s)}),this.miniWavesurfer.on("timeupdate",s=>{this.emit("timeupdate",s)}))}getOverlayWidth(){var t;const n=((t=this.wavesurfer)===null||t===void 0?void 0:t.getWrapper().clientWidth)||1;return Math.round(this.minimapWrapper.clientWidth/n*100)}onRedraw(){const t=this.getOverlayWidth();this.overlay.style.width=`${t}%`}onScroll(t){if(!this.wavesurfer)return;const n=this.wavesurfer.getDuration();this.overlay.style.left=t/n*100+"%"}initWaveSurferEvents(){this.wavesurfer&&this.subscriptions.push(this.wavesurfer.on("decode",()=>{this.initMinimap()}),this.wavesurfer.on("scroll",t=>{this.onScroll(t)}),this.wavesurfer.on("redraw",()=>{this.onRedraw()}))}destroy(){var t;(t=this.miniWavesurfer)===null||t===void 0||t.destroy(),this.minimapWrapper.remove(),super.destroy()}}const uv=xa({__name:"WaveSurferExample",setup(e){const t=z({height:48,waveColor:"gray",progressColor:"red",barGap:5,barWidth:5,barRadius:8,duration:80,barHeight:2,minPxPerSec:100,height:300,hideScrollbar:!1,autoCenter:!1,url:"/static/op2op/vocals.wav",plugins:[ks.create({height:20,waveColor:"#ddd",progressColor:"#999"})]}),n=z("00:00"),i=z("00:00"),s=z(null),a=l=>[l/60,l%60].map(u=>`0${Math.floor(u)}`.slice(-2)).join(":"),r=l=>{n.value=a(l)},o=l=>{i.value=a(l)},c=l=>{s.value=l,s.setTime(8)};return(l,u)=>(K(),Ft(fe,null,[u[4]||(u[4]=oe("h1",null,"WaveSurferPlayer Using Components ",-1)),oe("div",null,[m(Jt(nv),{options:t.value,onTimeupdate:u[0]||(u[0]=d=>r(d)),onReady:u[1]||(u[1]=d=>o(d)),onWaveSurfer:u[2]||(u[2]=d=>c(d))},null,8,["options"])]),oe("p",null," currentTime: "+Ke(n.value),1),oe("p",null,"totalDuration:"+Ke(i.value),1),oe("button",{onClick:u[3]||(u[3]=d=>{var f;return(f=s.value)==null?void 0:f.playPause()}),style:{minWidth:"5em"}}," Play ")],64))}}),cv={mounted(){const e=Ar.create(),t=nn.create({barGap:5,mediaControls:!0,autoCenter:!0,barWidth:5,barRadius:8,duration:80,barHeight:2,minPxPerSec:100,height:300,hideScrollbar:!1,container:"#waveform-audio",waveColor:"rgb(200, 0, 200)",progressColor:"rgb(100, 0, 100)",url:"/data/frieren-hareru/audio.wav",plugins:[e]}),n=nn.create({barGap:5,mediaControls:!0,autoCenter:!0,barWidth:5,barRadius:8,duration:80,barHeight:3,minPxPerSec:100,height:300,hideScrollbar:!1,container:"#waveform",waveColor:"rgb(200, 0, 200)",progressColor:"rgb(100, 0, 100)",url:"/data/frieren-hareru/vocals.wav",plugins:[e]});this.$ws=n;const i=(a,r)=>Math.random()*(r-a)+a,s=()=>`rgba(${i(0,255)}, ${i(0,255)}, ${i(0,255)}, 0.5)`;n.on("play",()=>{t.play()}),n.on("pause",()=>{t.pause()}),n.on("seeking",a=>{console.log(a),t.seekTo(a/93)}),n.on("decode",()=>{n.setMuted(!0),t.seekTo(.096774194),n.seekTo(.096774194)}),e.enableDragSelection({color:"rgba(255, 0, 0, 0.1)"}),e.on("region-updated",a=>{console.log("Updated region",a)}),document.querySelector('input[type="checkbox"]').onclick=a=>{a.target.checked},e.on("region-in",a=>{console.log("region-in",a)}),e.on("region-out",a=>{console.log("region-out",a)}),e.on("region-clicked",(a,r)=>{r.stopPropagation(),a.play(!0),a.setOptions({color:s()})}),n.on("interaction",()=>{}),n.once("decode",()=>{document.querySelector('input[type="range"]').oninput=a=>{const r=Number(a.target.value);n.zoom(r)}})},methods:{play(){var e;(e=this.$ws)==null||e.playPause()}}};function dv(e,t,n,i,s,a){return K(),Ft(fe,null,[t[1]||(t[1]=oe("div",{id:"waveform-audio",style:{display:"none"}},null,-1)),t[2]||(t[2]=oe("div",{id:"waveform"},null,-1)),t[3]||(t[3]=oe("p",null,[oe("label",{style:{"margin-left":"2em"}},[me(" Zoom: "),oe("input",{type:"range",min:"10",max:"1000",value:"10"})])],-1)),oe("button",{onClick:t[0]||(t[0]=(...r)=>a.play&&a.play(...r)),style:{minWidth:"5em"}}," Play ")],64)}const hv=ze(cv,[["render",dv]]),fv=$({app:Boolean,appear:Boolean,extended:Boolean,layout:Boolean,offset:Boolean,modelValue:{type:Boolean,default:!0},...Wt(Mr({active:!0}),["location"]),...ml(),...Zn(),...Ut({transition:"fab-transition"})},"VFab"),vv=G()({name:"VFab",props:fv(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=pe(e,"modelValue"),s=te(56),a=z(),{resizeRef:r}=Bt(d=>{d.length&&(s.value=d[0].target.clientHeight)}),o=k(()=>e.app||e.absolute),c=k(()=>{var d;return o.value?((d=e.location)==null?void 0:d.split(" ").shift())??"bottom":!1}),l=k(()=>{var d;return o.value?((d=e.location)==null?void 0:d.split(" ")[1])??"end":!1});Rt(()=>e.app,()=>{const d=vl({id:e.name,order:k(()=>parseInt(e.order,10)),position:c,layoutSize:k(()=>e.layout?s.value+24:0),elementSize:k(()=>s.value+24),active:k(()=>e.app&&i.value),absolute:q(e,"absolute")});it(()=>{a.value=d.layoutItemStyles.value})});const u=z();return ee(()=>{const d=be.filterProps(e);return m("div",{ref:u,class:["v-fab",{"v-fab--absolute":e.absolute,"v-fab--app":!!e.app,"v-fab--extended":e.extended,"v-fab--offset":e.offset,[`v-fab--${c.value}`]:o.value,[`v-fab--${l.value}`]:o.value},e.class],style:[e.app?{...a.value}:{height:e.absolute?"100%":"inherit"},e.style]},[m("div",{class:"v-fab__container"},[m(nt,{appear:e.appear,transition:e.transition},{default:()=>[Ve(m(be,Z({ref:r},d,{active:void 0,location:void 0}),n),[[At,e.active]])]})])])}),{}}}),mv={components:{RealignWords:xr,KaraokeResult:Zr,CorrectSegmentAlignment:Kr,GenerateKaraoke:eo,OpenKaraoke:_o,SelectLyrics:To,SelectVideo:Ao,WaveSurferExampleNative:hv,WaveSurferExample:uv,NewOrExistingKaraoke:Lo,NewKaraoke:Oo},data:()=>({initialized:!1,projectName:null,projectData:{},freshKaraokeAction:null,width:"1366px"}),async beforeMount(){try{const e=await ve.get("/check-session");this.projectName=e.data.project_name}catch(e){if(e.response&&e.response.status===403){const t=await ve.get("/create-session");this.projectName=t.data.project_name}else console.error(e)}this.projectName&&await this.getKaraokeData(),this.initialized=!0},computed:{freshKaraoke(){return!this.projectName}},methods:{async closeKaraoke(e){this.projectName=null,this.projectData={},await ve.post("/close-karaoke")},async karaokeSelected(e){this.projectName=e,await this.getKaraokeData()},async getKaraokeData(){try{const e=await ve.get(`/karaoke/${this.projectName}`);this.projectData=e.data}catch{this.projectName=null,this.projectData={}}}}};function gv(e,t,n,i,s,a){const r=Lo,o=_o,c=Oo,l=Ao,u=To,d=eo,f=Zr,v=Kr,h=xr;return K(),Q(Tc,{class:"fill-height","max-width":e.width},{default:I(()=>[m(vv,{absolute:"",app:"",location:"top right",color:"primary",icon:"",onClick:a.closeKaraoke},{default:I(()=>[m(Se,null,{default:I(()=>t[2]||(t[2]=[me("mdi-reload")])),_:1})]),_:1},8,["onClick"]),e.initialized?(K(),Q(Vt,{key:0},{default:I(()=>[a.freshKaraoke&&e.freshKaraokeAction===null?(K(),Q(ue,{key:0,cols:"12",style:{width:"900px"}},{default:I(()=>[m(r,{onNewKaraoke:t[0]||(t[0]=p=>e.freshKaraokeAction="create"),onOpenKaraoke:t[1]||(t[1]=p=>e.freshKaraokeAction="open")})]),_:1})):de("",!0),a.freshKaraoke&&e.freshKaraokeAction==="open"?(K(),Q(ue,{key:1,cols:"12",style:{width:"900px"}},{default:I(()=>[m(o,{onOpenKaraoke:a.karaokeSelected},null,8,["onOpenKaraoke"])]),_:1})):de("",!0),a.freshKaraoke&&e.freshKaraokeAction==="create"?(K(),Q(ue,{key:2,cols:"12"},{default:I(()=>[m(c,{onKaraokeCreated:a.karaokeSelected},null,8,["onKaraokeCreated"])]),_:1})):de("",!0),e.projectName&&!e.projectData.youtube_url?(K(),Q(ue,{key:3,cols:"12"},{default:I(()=>[m(l,{"project-name":e.projectName,onVideoSelected:a.getKaraokeData},null,8,["project-name","onVideoSelected"])]),_:1})):de("",!0),e.projectName&&e.projectData.youtube_url&&(!e.projectData.lyrics||!e.projectData.language)?(K(),Q(ue,{key:4,cols:"12"},{default:I(()=>[m(u,{"project-name":e.projectName,artist:e.projectData.artist,title:e.projectData.title,onLyricsSelected:a.getKaraokeData},null,8,["project-name","artist","title","onLyricsSelected"])]),_:1})):de("",!0),e.projectName&&e.projectData.lyrics&&e.projectData.language&&!e.projectData.video_accompaniment_mp4?(K(),Q(ue,{key:5,cols:"12"},{default:I(()=>[m(d,{"project-name":e.projectName,onKaraokeGenerated:a.getKaraokeData},null,8,["project-name","onKaraokeGenerated"])]),_:1})):de("",!0),e.projectName&&e.projectData.video_accompaniment_mp4&&e.projectData.alignment_correction===null?(K(),Q(ue,{key:6,cols:"12"},{default:I(()=>[m(f,{version:"preview","project-name":e.projectName,"project-data":e.projectData,onCorrectAlignment:a.getKaraokeData},null,8,["project-name","project-data","onCorrectAlignment"])]),_:1})):de("",!0),e.projectName&&e.projectData.video_accompaniment_mp4&&e.projectData.alignment_correction===!0?(K(),Q(ue,{key:7,cols:"12"},{default:I(()=>[m(v,{width:e.width,"project-name":e.projectName,"project-data":e.projectData,onAlignmentCorrected:a.getKaraokeData},null,8,["width","project-name","project-data","onAlignmentCorrected"])]),_:1})):de("",!0),e.projectName&&e.projectData.video_accompaniment_mp4&&e.projectData.alignment_correction===!1&&!e.projectData.realignment_ready?(K(),Q(ue,{key:8,cols:"12"},{default:I(()=>[m(h,{"project-name":e.projectName,onWordsRealigned:a.getKaraokeData},null,8,["project-name","onWordsRealigned"])]),_:1})):de("",!0),e.projectName&&e.projectData.video_accompaniment_mp4&&e.projectData.alignment_correction===!1&&e.projectData.realignment_ready?(K(),Q(ue,{key:9,cols:"12"},{default:I(()=>[m(f,{version:"realigned","project-name":e.projectName,"project-data":e.projectData,onCorrectAlignment:a.getKaraokeData},null,8,["project-name","project-data","onCorrectAlignment"])]),_:1})):de("",!0)]),_:1})):de("",!0)]),_:1},8,["max-width"])}const pv=ze(mv,[["render",gv]]),Yv={__name:"index",setup(e){return(t,n)=>(K(),Q(pv))}};export{Yv as default};
